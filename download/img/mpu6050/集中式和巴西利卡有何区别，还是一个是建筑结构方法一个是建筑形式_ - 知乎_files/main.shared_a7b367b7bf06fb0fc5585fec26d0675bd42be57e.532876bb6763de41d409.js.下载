(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1061:function(e,t,n){"use strict";var r=n(1),a=n(26),o=n(46),i=n(42),c=n.n(i),s=n(45),l=n.n(s),u=n(205);t.a=Object(a.connect)((function(e){var t;return{vipInfo:null===(t=Object(o.b)(e))||void 0===t?void 0:t.vipInfo}}))((function(e){var t=e.widget,n=e.className,a=e.vipInfo,o=t.id,i=t.url;return Object(r.b)(u.a,{className:n,onClick:function(){var e;(null==a||null===(e=a.widget)||void 0===e?void 0:e.id)!=="".concat(o)&&(l.a.set("widgetId",o),l.a.set("widgetUrl",i))},preset:"link",a:!0,to:"https://".concat(c.a.wwwHost,"/settings/stickers"),children:Object(r.b)("img",{src:i,style:{width:"100%"},alt:""})})}))},1062:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("defs",null,a.a.createElement("linearGradient",{id:"id-3811055512-a",x1:"11.015%",x2:"87.655%",y1:"18.594%",y2:"96.14%"},a.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),a.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),a.a.createElement("path",{fill:"url(#id-3811055512-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};i.defaultProps={name:"VIP"},t.a=i},1069:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(131),a=n.n(r),o=n(75),i=function(e,t){var n=[];return a()((function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];n.push(a),setTimeout((function(){n.length&&(t(n),n.length=0)}),e)}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}))}(550,(function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),Object(o.e)("/lastread/touch",{method:"POST",body:t})})),c="read",s="touch";t.c=i},1088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var r=n(1362);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return r.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return r.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return r.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return r.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return r.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return r.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return r.stripHTML}})},1212:function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&(("answer"===t||"post"===t||"article"===t)&&(null===(n=e.settings)||void 0===n||null===(r=n.tableOfContents)||void 0===r?void 0:r.enabled)));var n,r}},1213:function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return r}))},1238:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(31),a=n.n(r),o=n(21),i=n.n(o),c=n(23),s=n.n(c),l=n(22),u=n.n(l),d=n(25),p=n.n(d),h=n(14),f=n.n(h),b=n(39),v=n.n(b),m=n(0),g=n(47),O=n(12),j=n.n(O),y=n(1312),C=n.n(y),w=n(88),k=n.n(w),x=n(7),R=["className","url","alt","threshold","thumbnail"];function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}function N(e,t,n){var r=new Image;return r.addEventListener("load",t),r.onerror=n,r.src=e,r}var P=function(e){u()(n,e);var t=T(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:e.props.width,computedHeight:e.props.height},e.wrapperNode=null,e.hasLoaded=!1,e.loadThumbnail=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.thumbnail=N(e.props.thumbnail,e.handleThumbnailLoaded,(function(){n&&n({type:"thumbnail",url:e.props.thumbnail})})),r&&setTimeout((function(){e.thumbnail&&!e.thumbnail.complete&&r({type:"thumbnail",url:e.props.thumbnail})}),3e3)},e.loadImage=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.image=N(e.props.url,e.handleImageLoaded,(function(){n&&n({type:"image",url:e.props.url})})),r&&setTimeout((function(){e.image&&!e.image.complete&&r({type:"image",url:e.props.url})}),3e3)},e.handleObserve=function(t){t&&e.hasLoaded||t&&(e.hasLoaded=!0,e.loadThumbnail(),e.loadImage())},e.handleThumbnailLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"thumbnail",url:e.props.thumbnail});var n=e.state,r=n.computedWidth;if(!n.computedHeight){var a=e.thumbnail,o=a.naturalWidth,i=a.naturalHeight*(Number(r)/o);e.setState({computeHeight:i})}e.setState({thumbnailLoaded:!0})},e.handleImageLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"image",url:e.props.url}),e.setState({loaded:!0}),e.timeout=window.setTimeout((function(){return e.setState({vagued:!1})}),500)},e}return s()(n,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(g.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,r=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:r||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=k()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,r=t.url,o=t.alt,i=t.threshold,c=t.thumbnail,s=a()(t,R),l=this.state,u=l.thumbnailLoaded,d=l.loaded,p=l.vagued,h=l.computedWidth,f=l.computedHeight;if(!p)return Object(x.g)("img",v()({className:n,width:h,src:r,alt:o},s));var b=C.a;return Object(x.g)(b,{rootMargin:"".concat(i,"px 0px ").concat(i,"px 0px"),onChange:this.handleObserve,className:j()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign(Object.assign({},h&&{width:"".concat(h,"px")}),f&&{height:"".concat(f,"px")}),"data-src":r},Object(x.g)("div",{className:j()("VagueImage-mask",{"is-active":!d}),style:u?{backgroundImage:"url(".concat(c,")")}:{}}),d&&Object(x.g)("img",{className:"VagueImage-innerLarge",src:r,alt:o}))}}]),n}(m.Component);P.defaultProps={threshold:200};var I=P},1312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(1438);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e,n,r;c(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={inView:!1},r.node=null,r.handleNode=function(e){r.node&&(0,i.unobserve)(r.node),r.node=e,r.observeNode(),r.props.innerRef&&r.props.innerRef(e)},r.handleChange=function(e){r.setState({inView:e}),r.props.onChange&&r.props.onChange(e)},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,a=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r},a)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,a=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return o.createElement(a,r({},i,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}(o.Component);l.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=l},1315:function(e,t,n){var r=n(640),a=n(212),o=n(366),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var s=null==n?0:o(n);return s<0&&(s=i(c+s,0)),r(e,a(t,3),s)}},1362:function(e,t,n){"use strict";var r=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var a=["img","br"],o=/([\w|-]+)(?:="([^"]*)")?/;function i(e){var t={};if((e=e.trim()).length)for(var n,a=new RegExp(o.source,"g");n=a.exec(e);){var i=n.slice(1),c=r(i,2),s=c[0],l=c[1];t[s]=l}return t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(e,5),o=n[0],c=n[1],s=n[2],l=n[3],u=n[4],d="open";"/"===c?d="close":(a.includes(s)||"/"===u)&&(d="self-close");var p=t.parseAttrs?i(l):l;return{tagHTML:o,tagName:s,tagType:d,attrs:p}}function s(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function l(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"sup":return{type:"replace-self",content:""};case"invisible":return{type:"hide"};default:return null}}function u(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e.sup||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=i,t.parseTagGroup=c,t.parseTag=function(e,n){var r=t.TAG_RE.exec(e);if(r)return c(r,n)},t.getBlockType=s,t.truncateHTML=function(e){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.endsWith,d=void 0===i?"…":i,p=o.placeholders,h=void 0===p?{}:p,f=[],b=[],v=[],m={},g={},O=new RegExp(t.TAG_RE.source,"g"),j=0,y=0,C=0,w=0,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.push(e),t||(j+=e.length),y+=e.length};n=O.exec(e);){var x=c(n,{parseAttrs:!0}),R=x.tagHTML,T=x.tagType,N=x.tagName,P="close"===T&&a.includes(N)?"invalid":s("close"!==T?x:b[b.length-1]),I=h[P]?{type:"replace",content:h[P]}:l(P);"close"!==T&&(m[P]=(m[P]||0)+1);var S=e.slice(y,n.index),A=S.length;if(j+A>=r&&0===C&&0===w){for(k(S.slice(0,r-j));v.length;){var E=v.pop();f.push("</".concat(E.tagName,">"))}break}0===C&&k(S,0!==w),"invalid"!==P&&("open"===T?b.push(x):"close"===T&&b.pop(),I?("replace"===I.type&&(0===C&&"close"!==T&&f.push(I.content),"open"===T?C++:"close"===T&&C--),0===C&&"replace-self"===I.type&&f.push(I.content),0===C&&"hide"===I.type&&("open"===T?w++:"close"===T&&w--,f.push(R))):0===C&&(f.push(R),"open"===T?v.push(x):"close"===T&&v.pop())),"video-box"!==P||g.type||"string"==typeof x.attrs||(g.type="video",g.url=x.attrs["data-poster"],g.id=x.attrs["data-lens-id"]),y=O.lastIndex}if(j<r){var L=e.slice(y).slice(0,r-j);k(L)}var M=j>r||j===r&&y<e.length||u(m);return{isTruncated:M,thumbnailInfo:g,content:"".concat(f.join("").trim().replace(/\s{2,}/g," ")).concat(M?d:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1379:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(53),a=n.n(r);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],s=function(e){return c.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};function l(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var r,i=o(a()(n.childNodes));try{for(i.s();!(r=i.n()).done;){var c=r.value;if("BR"===c.nodeName&&c.previousSibling&&"BR"!==c.previousSibling.nodeName&&c.nextSibling&&"BR"===c.nextSibling.nodeName){for(var l=t.createElement("p"),u=c.previousSibling;u&&!s(u)&&("BR"!==u.nodeName||u.previousSibling&&"BR"!==u.previousSibling.nodeName&&!s(u.previousSibling));){var d=l.childNodes;d.length>0?l.insertBefore(u,d[0]):l.appendChild(u),u=c.previousSibling}l.childNodes.length>0&&(n.insertBefore(l,c),c.nextSibling.parentNode.removeChild(c.nextSibling),c.parentNode.removeChild(c))}}}catch(e){i.e(e)}finally{i.f()}return n.innerHTML}},1438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=o,t.unobserve=i,t.destroy=c;var r=new Map,a=new Map;function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],i=n.root,c=n.rootMargin,l=n.threshold||0;if(e&&t){var u=c?l.toString()+"_"+c:""+l.toString();i&&(u=o?o+"_"+u:null);var d=u?a.get(u):null;d||(d=new IntersectionObserver(s,n),u&&a.set(u,d));var p={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return r.set(e,p),d.observe(e),p}}function i(e){if(e){var t=r.get(e);if(t){var n=t.observerId,o=t.observer,i=n?a.get(n):o;i&&i.unobserve(e);var c=!1;n&&r.forEach((function(t,r){t&&t.observerId===n&&r!==e&&(c=!0)})),i&&!c&&(i.disconnect(),a.delete(n)),r.delete(e)}}}function c(){a.forEach((function(e){e.disconnect()})),a.clear(),r.clear()}function s(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,a=e.target,o=r.get(a);if(o&&n>=0){var i=o.options,c=!1;Array.isArray(i.threshold)?c=i.threshold.some((function(e){return o.visible?n>e:n>=e})):void 0!==i.threshold&&(c=o.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(c=c&&t),o.callback&&o.callback(c)}}))}t.default={observe:o,unobserve:i,destroy:c}},1514:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(77),i=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(3),p=n.n(d),h=n(35),f=n(452),b=n(895),v=n(915);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=m(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!0},e.handleTitleClick=function(t){h.a.trackEvent(Object(o.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,r=t.url,a=t.author;return Object(l.c)("div",{className:"AbstractCard-header",children:[Object(l.c)("div",{className:"AbstractCard-desc",children:[Object(l.b)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(r,n)},children:n}),Object(l.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(l.b)(v.a,{zaId:6120,className:"AbstractCard-author",author:a,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,r=t.member.name,a=t.theme;return Object(l.c)("div",{className:"AbstractCard-content",children:[Object(l.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(a),children:n}),Object(l.b)("div",{className:"AbstractCard-tip",children:Object(l.c)("span",{className:"AbstractCard-info",children:[r," 摘录于 ",e.createdFormat]})})]})},e}return Object(a.a)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(f.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}},{key:"componentDidMount",value:function(){Object(b.onViewedOnce)(this.node,(function(){h.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(l.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}}]),n}(u.Component);g.propTypes={title:p.a.string.isRequired,url:p.a.string.isRequired,author:p.a.object,member:p.a.object,content:p.a.string.isRequired,created:p.a.number,theme:p.a.string.isRequired};t.a=g},889:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return h}));var r=n(935),a=(n(0),n(12)),o=n.n(a),i=(n(966),n(7)),c=function(e){var t=e.className,n=e.options,r=e.children;return Object(i.g)("div",{className:o()("Card-header",t)},Object(i.g)("div",{className:"Card-headerText"},r),n&&Object(i.g)("div",{className:"Card-headerOptions"},n))},s=n(31),l=n.n(s),u=n(39),d=n.n(u),p=["className"],h=function(e){var t=e.className,n=l()(e,p);return Object(i.g)("div",d()({className:o()("Card-section",t)},n))}},894:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return P}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(33),l=n(1),u=n(3),d=n.n(u),p=n(0),h=n(12),f=n.n(h),b=n(88),v=n.n(b),m=n(895),g=n(245),O=n(1069),j=["onRef","listClassName","itemClassName","className","children"],y=["className","title","meta","children","extra","image","link"];function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function w(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function k(e){var t=e.onRef,n=e.listClassName,r=e.itemClassName,a=e.className,o=e.children,i=Object(s.default)(e,j);return Object(l.b)("div",Object.assign(Object.assign({ref:t,className:f()(n,a)},i),{},{children:p.Children.map(o,(function(e){return"string"==typeof e?Object(l.b)("span",{className:r,children:e}):e?Object(p.cloneElement)(e,{className:f()(r,e.props.className)}):e}))}))}var x=function(e){return Object(l.b)(k,Object.assign({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},R=function(e){return Object(l.b)(k,Object.assign({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},T=function(e){return Object(l.b)(k,Object.assign({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},N=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onRef=function(t){e.domNode=t,e.props.onRef&&e.props.onRef(t)},e.onAccessContent=function(t,n){n===document.activeElement&&window.open(e.props.link)},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(m.onViewedOnce)(this.domNode,(function(){var t=e.props,n=t.data,r=(n=void 0===n?{}:n).type,a=n.id,o=t.lastreadTouchable;e.context.currentUser&&o&&r&&a&&Object(O.c)("article"===r?"post":r,a,O.b)}))}},{key:"render",value:function(){var e=v()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,r=e.meta,a=e.children,o=e.extra,i=e.image,c=e.link,u=Object(s.default)(e,y),d=Object(l.c)(p.Fragment,{children:[n&&Object(l.b)("h2",{className:"ContentItem-title",children:n}),w(r)&&Object(l.b)("div",{className:"ContentItem-meta",children:r})]});return Object(l.c)("div",Object.assign(Object.assign({ref:this.onRef,className:f()("ContentItem",t)},u),{},{children:[c&&Object(l.b)(g.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),i||o?Object(l.c)("div",{className:"ContentItem-main",children:[i&&Object(l.b)("div",{className:"ContentItem-image",children:i}),Object(l.b)("div",{className:"ContentItem-head",children:d}),o&&Object(l.b)("div",{className:"ContentItem-extra",children:o})]}):d,a]}))}}]),n}(p.Component);N.contextTypes={currentUser:d.a.object};var P={plain:"plain",default:"default",interactive:"interactive"};t.e=N},895:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=t.onViewedOnce=t.isViewed=void 0;var r=n(924);Object.defineProperty(t,"isViewed",{enumerable:!0,get:function(){return r.isViewed}}),Object.defineProperty(t,"onViewedOnce",{enumerable:!0,get:function(){return r.onViewedOnce}});var a=n(925);Object.defineProperty(t,"isFullyViewed",{enumerable:!0,get:function(){return a.isFullyViewed}}),Object.defineProperty(t,"onFullyViewedOnce",{enumerable:!0,get:function(){return a.onFullyViewedOnce}})},899:function(e,t,n){"use strict";var r=n(33),a=n(1),o=n(3),i=n.n(o),c=n(26),s=n(41),l=n(44),u=n(12),d=n.n(u),p=n(206),h=n(66),f=n(88),b=n.n(f),v=n(57),m=n(421),g=n(920),O=n(35),j=(n(921),["isPinProfile","onClick","isPinDaily","user","avatar","avatarProps","showVipIcon","vipIconZaViewName","badgeProps","noBadge","noLink","noHoverCard","style","className","children"]);var y=function(e){var t,o=e.isPinProfile,i=e.onClick,u=e.isPinDaily,f=e.user,y=e.avatar,C=e.avatarProps,w=e.showVipIcon,k=e.vipIconZaViewName,x=e.badgeProps,R=e.noBadge,T=e.noLink,N=e.noHoverCard,P=e.style,I=e.className,S=e.children,A=Object(r.default)(e,j),E=Object(c.useSelector)((function(e){return Object(v.isMobileSelector)(e,{includeTablet:!0})})),L=f.id,M=f.name,V=f.avatarUrl,B=f.urlToken,H=f.isOrg,_=f.vipInfo,z=f.url,D=f.maskLevel,U=void 0===N?E:N,q=Object(l.e)((function(){return Promise.all([n.e(0),n.e(7),n.e(97)]).then(n.bind(null,1039))}),!U&&!E);t=y?Object(a.b)(p.a,Object.assign({className:"UserLink-avatar",url:V,alt:M},C)):S||M;var W=Boolean(function(e){var t=e.id,n=e.name,r=e.urlToken;return"0"===t||"知乎用户"===n?null:r||t}(f)),G="//www.zhihu.com/".concat(H?"org":"people","/").concat(B||L),F="zhihu://pin".concat(z,"/moments");return W&&!T&&(t=Object(a.b)(s.Link,Object.assign(Object.assign({className:"UserLink-link","data-za-detail-view-element_name":"User",to:G,target:"_blank",onClick:function(e){return function(t){u&&"A"===t.target.nodeName&&O.a.trackEvent(t.target,{id:2065}),o&&(t.preventDefault(),Object(h.a)("base/openURL").dispatch({url:e})),D&&t.preventDefault(),i&&"function"==typeof i&&i(t)}}(F)},b()(A,["isPinProfile","trackEvent","onClick","dispatch","isPinDaily"])),{},{children:t})),!U&&q&&(t=Object(a.b)(q,{toggler:t,id:L,urlToken:B,user:f}))),Object(a.c)("span",{style:P,className:d()("UserLink",I),children:[t,W&&!R&&!y&&Object(a.b)(m.c,Object.assign({css:{marginLeft:".3em"},isOrg:H,badge:f.badgeV2||f.badge,linkify:!0,enableTooltip:!0},x)),W&&w&&!y&&_&&_.vipIcon&&Object(a.b)(g.a,{vipIcon:_.vipIcon,zaViewName:k})]})};y.propTypes={user:i.a.object.isRequired,avatar:i.a.bool,avatarProps:i.a.object,noBadge:i.a.bool,noHoverCard:i.a.bool,showVipIcon:i.a.bool,style:i.a.object,className:i.a.string,children:i.a.node,isPinProfile:i.a.bool,isPinDaily:i.a.bool},y.defaultProps={avatar:!1,noBadge:!1,showVipIcon:!1},t.a=y},915:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),p=n(19),h=n(26),f=n(41),b=n(12),v=n.n(b),m=(n(422),n(35)),g=n(57),O=n(983),j=n(899),y=n(1061),C=(n(934),n(61)),w=n(83),k=function(e){var t=e.text,n=Object(w.f)();return Object(s.b)(C.Box,{css:{color:n.colors.GBK04A,fontSize:14,lineHeight:1.6,fontWeight:"normal"},children:t})},x=n(941),R=n(931);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var N=function(e){Object(o.a)(n,e);var t=T(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(t){var n=e.props,r=n.zaId,a=n.zaExtra,o=n.author.urlToken,i=n.isSpecialQuestionOrAnswer;if(n.preventOpenUrl)t.preventDefault();else if(r&&m.a.trackEvent(null,{id:r,action:"OpenUrl",element_name:"User"},a),i)return location.href="zhihu://people/".concat(o,"?utm_app_name=zhihu_check"),t.preventDefault(),void t.stopPropagation()},e.renderDetail=function(t){var n=e.props,r=n.extra,a=n.children,o=n.author,i=n.noHeadline,c=n.coCreationAuthorDescriptionText;return c?Object(s.b)("div",{className:"AuthorInfo-badge",children:Object(s.b)(k,{text:c})}):t&&r||Object(s.b)("div",{className:"AuthorInfo-badge",children:a||Object(s.b)(O.a,{className:"AuthorInfo-badgeText",user:o,noHeadline:i})})},e}return Object(a.a)(n,[{key:"render",value:function(){var e,t="plain"===this.props.preset,n=this.props,r=n.author,a=n.noLink,o=n.avatarSize,i=void 0===o?t?24:38:o,c=n.className,l=n.extra,u=n.itemProp,d=n.roundAvatar,p=n.isMobile,h=n.target,f=n.noDetail,b=n.noHoverCard,m=n.router,g=n.noBadge,O=n.noVipBadge,C=n.showVipIcon,w=null==r||null===(e=r.vipInfo)||void 0===e?void 0:e.widget,k=m.getCurrentLocation().pathname,T=-1!==k.indexOf("people")&&3===k.split("/").length,N=this.renderDetail(t),P=this.props.userLinkV2;return Object(s.c)("div",{className:v()("AuthorInfo",c,{"AuthorInfo--plain":t}),itemProp:u,itemScope:!0,itemType:"http://schema.org/Person",children:[Object(s.c)("div",{className:v()("AuthorInfo",{"AuthorInfo--mobile":!1}),children:[Object(s.b)("meta",{itemProp:"name",content:r.name}),Object(s.b)("meta",{itemProp:"image",content:r.avatarUrl}),Object(s.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(r.urlToken)}),Object(s.b)("meta",{itemProp:"zhihu:followerCount",content:r.followerCount}),P&&Object(s.c)(s.a,{children:[Object(s.b)(x.a,Object.assign({onClick:this.handleClick,noHoverCard:p||b,noLink:a,user:r,className:"AuthorInfo-avatarWrapper",avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},h&&{target:h})),Object(s.c)("div",{className:"AuthorInfo-content",children:[Object(s.c)("div",{className:"AuthorInfo-head",children:[Object(s.b)(R.a,Object.assign({noHoverCard:p||b,onClick:this.handleClick,noLink:a,user:r,noBadge:g,noVipBadge:O,showVipIcon:C,className:"AuthorInfo-name"},h&&{target:h})),!t&&l]}),!f&&Object(s.b)("div",{className:"AuthorInfo-detail",children:N})]})]}),!P&&Object(s.c)(s.a,{children:[Object(s.b)(j.a,Object.assign({onClick:this.handleClick,noHoverCard:p||b,noLink:a,className:"AuthorInfo-avatarWrapper",user:r,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},h&&{target:h})),Object(s.c)("div",{className:"AuthorInfo-content",children:[Object(s.c)("div",{className:"AuthorInfo-head",children:[Object(s.b)(j.a,Object.assign({noHoverCard:p||b,onClick:this.handleClick,className:"AuthorInfo-name",noLink:a,user:r},h&&{target:h})),!t&&l]}),!f&&Object(s.b)("div",{className:"AuthorInfo-detail",children:N})]})]})]}),T&&w&&w.id&&Object(s.b)(y.a,{className:"AuthorInfo-Widget",widget:w})]})}}]),n}(d.Component);N.propTypes={author:u.a.object.isRequired,noLink:u.a.bool,avatarSize:u.a.number,preset:u.a.oneOf(["plain","default"]),className:u.a.string,itemProp:u.a.string,roundAvatar:u.a.bool,isMobile:u.a.bool,noDetail:u.a.bool,relatedTo:u.a.string,zaId:u.a.number,zaExtra:u.a.object,noHoverCard:u.a.bool,noHeadline:u.a.bool,preventOpenUrl:u.a.bool,noBadge:u.a.bool,noVipBadge:u.a.bool,showVipIcon:u.a.bool,coCreationAuthorDescriptionText:u.a.oneOf(["视频作者","图文作者"])},N.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1,coCreationAuthorDescriptionText:null};t.a=Object(p.compose)(f.withRouter,Object(h.connect)((function(e,t){var n=t.relatedTo,r=t.params,a=["question","answer"].includes(n);return{isHuman:Object(g.isHumanSelector)(e),shouldOia:Object(g.shouldOiaSelector)(e)&&a,isMobile:Object(g.isMobileSelector)(e,{includeTablet:!0}),isSpecialQuestionOrAnswer:Object(g.specialQuestionOrAnswerSelector)(e,{type:a&&n,id:a?"question"===n?null==r?void 0:r.id:null==r?void 0:r.answerId:""})}})))(N)},920:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),p=n(26),h=n(895),f=n(35);n(921);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var v=function(e){Object(o.a)(n,e);var t=b(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.zaViewName;Object(h.onViewedOnce)(this.node,(function(){f.a.trackCardShow(null,{id:3613,name:e})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaViewName,a=t.vipIcon,o=a.nightModeUrl,i=a.url,c="light"===n?i:o;return Object(s.b)("a",{className:"UserLink-vipIcon",href:"https://www.zhihu.com/vip",target:"_blank",rel:"noopener noreferrer",ref:function(t){return e.node=t},"data-za-detail-view-id":3612,"data-za-detail-view-name":r,children:Object(s.b)("img",{src:c,alt:"zhihu vip"})})}}]),n}(d.Component);v.propTypes={vipIcon:u.a.shape({nightModeUrl:u.a.string,url:u.a.string}).isRequired,zaViewName:u.a.string},t.a=Object(p.connect)((function(e){return{theme:e.env.theme}}))(v)},921:function(e,t,n){},924:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onViewedOnce=t.isViewed=void 0;var a=r(n(244));t.isViewed=function(e){if(!document.body||!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.bottom<(window.innerHeight||n.clientHeight)};var o=function(){};t.onViewedOnce=function(e,n,r){if(t.isViewed(e))return n.call(r,e),o;var i=a.default((function(){t.isViewed(e)&&(n.call(r,e),c())}),250);function c(){window.removeEventListener("scroll",i),window.removeEventListener("resize",i)}return window.addEventListener("scroll",i),window.addEventListener("resize",i),c}},925:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=void 0;var a=r(n(244)),o=r(n(63));t.isFullyViewed=function(e,t){var n=e.getBoundingClientRect(),r=n.right,a=n.bottom,o=t.getBoundingClientRect(),i=o.right;return a<=o.bottom&&r<=i},t.onFullyViewedOnce=function(e,n,r,i){if(t.isFullyViewed(e,n))return r.call(i,e),o.default;var c=a.default((function(){t.isFullyViewed(e,n)&&(r.call(i,e),s())}),250);n.addEventListener("scroll",c),n.addEventListener("resize",c);var s=function(){n.removeEventListener("scroll",c),n.removeEventListener("resize",c)};return s}},926:function(e,t,n){"use strict";function r(e){var t=e.id,n=e.name,r=e.urlToken;return"0"===t||"知乎用户"===n?null:Boolean(r||t)}n.d(t,"a",(function(){return r}))},930:function(e,t,n){"use strict";var r=n(33),a=n(1),o=n(26),i=n(44),c=n(57),s=n(0),l=n(63),u=n.n(l),d=n(41),p=n(66),h=n(35),f=["isPinProfile","user","isPinDaily","onClick","children"];function b(e,t){var n=e.isPinProfile,o=e.user,c=e.isPinDaily,s=e.onClick,l=void 0===s?u.a:s,b=e.children,v=Object(r.default)(e,f),m=o.id,g=o.urlToken,O=o.isOrg,j=o.url,y=o.maskLevel,C="//www.zhihu.com/".concat(O?"org":"people","/").concat(g||m),w="zhihu://pin".concat(j,"/moments"),k=Object(i.d)((function(e){c&&"A"===e.target.nodeName&&h.a.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),Object(p.a)("base/openURL").dispatch({url:w})),y&&e.preventDefault(),l(e)}));return Object(a.b)(d.Link,Object.assign(Object.assign({ref:t,to:C,target:"_blank",onClick:k,className:"UserLink-link","data-za-detail-view-element_name":"User"},v),{},{children:b}))}var v=Object(s.forwardRef)(b),m=n(926),g=["user","noHoverCard","noLink","children"];t.a=function(e){var t=e.user,s=e.noHoverCard,l=e.noLink,u=e.children,d=Object(r.default)(e,g),p=t.id,h=t.urlToken,f=!Object(m.a)(t)||l,b=Object(o.useSelector)((function(e){return Object(c.isMobileSelector)(e,{includeTablet:!0})})),O=null!=s?s:b,j=Object(i.e)((function(){return Promise.all([n.e(0),n.e(7),n.e(97)]).then(n.bind(null,1039))}),!O);if(f)return u||null;var y=Object(a.b)(v,Object.assign(Object.assign({},d),{},{user:t,children:u}));return O||!j?y:Object(a.b)(j,{toggler:y,id:p,urlToken:h,user:t})}},931:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(33),a=n(1),o=n(12),i=n.n(o),c=n(421),s=n(926),l=n(953),u=n(920),d=n(930),p=["className","showVipIcon","vipIconZaViewName","user","noBadge","noVipBadge","children","badgeProps"];function h(e){var t,n,o=e.className,h=e.showVipIcon,f=e.vipIconZaViewName,b=e.user,v=void 0===b?{}:b,m=e.noBadge,g=e.noVipBadge,O=void 0!==g&&g,j=e.children,y=e.badgeProps,C=void 0===y?{}:y,w=Object(r.default)(e,p),k=Object(s.a)(v),x=k&&!m,R=(null===(t=v.vipInfo)||void 0===t?void 0:t.isVip)&&!O,T=k&&h&&(null===(n=v.vipInfo)||void 0===n?void 0:n.vipIcon);return Object(a.c)("span",{className:i()("UserLink",o),children:[Object(a.b)(d.a,Object.assign(Object.assign({},w),{},{user:v,children:j||v.name})),x&&Object(a.b)(c.c,Object.assign({css:{marginLeft:".3em"},isOrg:v.isOrg,badge:v.badgeV2||v.badge,linkify:!0,enableTooltip:!0},C)),R&&Object(a.b)(l.a,{css:{marginLeft:".3em"}}),T&&Object(a.b)(u.a,{vipIcon:v.vipInfo.vipIcon,zaViewName:f})]})}},934:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(49);var r=n(52),a=n.n(r),o=function(e){var t=e||{},n=t.type,r=t.id,o=t.urlToken,i=t.q;switch(n){case"question":return"/questions/".concat(r);case"answer":return"/answers/".concat(r);case"article":case"p":return"/articles/".concat(r);case"column":return"/columns/".concat(r);case"live":return"/lives/".concat(r);case"ebook":case"book":return"/pub/book/".concat(r);case"feed":return"/feed";case"topic":return"/topics/".concat(r);case"people":return"/people/".concat(o||r);case"search":return"/search?".concat(a.a.stringify({q:i}));case"video":return"video_topic/".concat(r);case"zvideo":return"/zvideo/".concat(r);case"zvideo_answer":case"zvideo_article":var c=n.replace("zvideo_","");return"/".concat(c,"s/").concat(r);case"liveplus":return"/liveplus/".concat(r);case"brief":return"/brief/".concat(r);default:return null}},i=function(e,t){var n=t?"?".concat(a.a.stringify(t)):"",r="string"==typeof e?e:o(e);if(r){var i=r.startsWith("/")?r.slice(1):r;return"zhihu://".concat(i).concat(n)}return"zhihu://".concat(n)}},935:function(e,t,n){"use strict";var r=n(31),a=n.n(r),o=n(39),i=n.n(o),c=(n(0),n(12)),s=n.n(c),l=(n(966),n(7)),u=["className","onRef"];t.a=function(e){var t=e.className,n=e.onRef,r=a()(e,u);return Object(l.g)("div",i()({ref:n,className:s()("Card",t)},r))}},941:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(33),a=n(1),o=n(12),i=n.n(o),c=n(206),s=n(930),l=["className","user","avatarProps"];function u(e){var t=e.className,n=e.user,o=void 0===n?{}:n,u=e.avatarProps,d=void 0===u?{}:u,p=Object(r.default)(e,l),h=o.name,f=o.avatarUrl;return Object(a.b)("span",{className:i()("UserLink",t),children:Object(a.b)(s.a,Object.assign(Object.assign({},p),{},{user:o,children:Object(a.b)(c.a,Object.assign({className:"UserLink-avatar",url:f,alt:h},d))}))})}},946:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));var r=n(33),a=n(15),o=n(16),i=n(17),c=n(18),s=n(9),l=n(1),u=n(3),d=n.n(u),p=n(0),h=n(26),f=n(1315),b=n.n(f),v=n(12),m=n.n(v),g=n(36),O=n(939),j=n(1592),y=n(961),C=n(278),w=n(1379),k=n(1238),x=n(438),R=n(895),T=n(1088),N=n(138),P=n(35),I=n(43),S=n.n(I),A=n(57);function E(e){for(var t=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),n=[],r=/<\s*img.*?>/g,a=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,o=/(data-original=").*?"/,i=null;i=null===(c=r.exec(t))||void 0===c?void 0:c[0];){var c;if(a.test(i)){var s=o.exec(i);s&&n.push(s[0].split("data-original=")[1].replace(/"|\\/g,""))}}return n}var L=n(245),M=n(1212),V=n(19),B=n(40),H=n.n(B),_=n(59),z=n(1588);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var U=function(e){Object(i.a)(n,e);var t=D(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,r=e.onSelect,a=e.content,o=this.hintInfo,i=o&&"danger"===o.type;return Object(l.c)("div",{className:m()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i,children:[Object(l.b)("span",{className:"SharePopover-arrow"}),Object(l.c)("div",{role:"button",tabIndex:0,className:m()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||r(a)},children:[Object(l.b)(z.a,{className:"SharePopover-quote",size:24}),Object(l.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),o&&Object(l.b)("span",{className:"SharePopover-hint",children:o.text})]})]})}}]),n}(p.Component);U.propTypes={content:d.a.string,top:d.a.number,visible:d.a.bool};var q=U,W=n(49),G=n(161),F=n(1514),Y=n(475);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Q=function(e){Object(i.a)(n,e);var t=X(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,r=t.actived;return Object(l.b)("div",{className:"TopicSelect",children:Object(l.b)(Y.a,{actived:r,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(p.Component);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Z=function(e){Object(i.a)(n,e);var t=K(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign(Object.assign({},e),{},{topics:t})}))},e.handleSubmit=function(){var t=Object(W.a)(e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(o.a)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,r=e.currentUser,a=e.title,o=e.url,i=e.onClose,c=e.content,s=e.visible;return Object(l.b)(G.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:s&&Object(l.c)(p.Fragment,{children:[Object(l.b)(F.a,{type:t,author:n,member:r,title:a,url:o,content:c,theme:"scroll"}),Object(l.b)(Q,{onChange:this.handleChangeTopics}),Object(l.b)("div",{className:"AbstractForm-footer",children:Object(l.b)(g.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}}]),n}(p.Component);Z.propTypes={type:d.a.string.isRequired,author:d.a.object,currentUser:d.a.object,title:d.a.string.isRequired,content:d.a.string.isRequired,url:d.a.string.isRequired,visible:d.a.bool.isRequired,onClose:d.a.func.isRequired,onSubmit:d.a.func.isRequired};var J=n(179),$=n(1213),ee=n(291);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ne=function(e){Object(i.a)(n,e);var t=te(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;P.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign(Object.assign({},e),{},{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){P.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,r=n.type,a=n.objectId,o=n.createAbstract,i=e.state.content;P.a.trackEvent(null,{id:6117,action:"Submit"}),o({type:r,token:a,topicId:t,content:i}).then((function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:i,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(o.a)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object($.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}},{key:"componentDidMount",value:function(){var e,t,n;e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,e.onmouseup=function(){var r=Object(_.a)(H.a.mark((function r(a){var o,i;return H.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(o=r.sent)?(i=a.target===e?a.offsetY:a.offsetY+a.target.offsetTop+30,t(o,i)):n();case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,r=e.content,a=e.abstractModalVisible,o=this.props,i=o.type,c=o.author,s=o.currentUser,u=o.title,d=o.url,h=o.isCopyable;return this.hasAddBaikeSummaryPermission?Object(l.c)(p.Fragment,{children:[Object(l.b)(q,{top:n,visible:t,content:r,isCopyable:this.isAuthor||h,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(l.b)(Z,{type:i,onSubmit:this.handleCreateAbstract,author:c,visible:a,onClose:this.handleAbstractModalClose,currentUser:s,title:u,url:d,content:r})]}):null}}]),n}(p.Component);ne.propTypes={type:d.a.string.isRequired,author:d.a.object.isRequired,currentUser:d.a.object,title:d.a.string.isRequired,url:d.a.string.isRequired,objectId:d.a.number.isRequired,isCopyable:d.a.bool},ne.defaultProps={isCopyable:!0};var re=Object(V.compose)(ee.b,Object(h.connect)(null,{createAbstract:J.d}))(ne),ae=n(894),oe=n(77),ie=n(505),ce=n(46),se=n(1073);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ue=function(e){Object(i.a)(n,e);var t=le(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(oe.a)(e)),e.handleCopy=e.handleCopy.bind(Object(oe.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(oe.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(o.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],a=["",""];return r=n?r.concat(a):a.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("\n");return r?a+e:e+a}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("<br />");return"<div>".concat(r?a+e:e+a,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),a=this.getRange(r),o=a.toString().trim(),i=this.getRangeHtml(a);if(o&&!(o.length<128)){var c=o.length>=512,s=this.getCopyHtml(i,t,n,c),l=this.getCopyText(o,t,n,c),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+s),u.setData("text/plain",l),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=s;var p=d.firstChild;p.style.position="fixed",p.style.left="-9999px",document.body.appendChild(p),r.selectAllChildren(p),setTimeout((function(){document.body.removeChild(p),r.removeAllRanges(),r.addRange(a)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),a=r.toString().trim(),o=this.randomRange(44,66);if(!(a.length<=o)){e.preventDefault(),e.stopPropagation();var i,c=r.getBoundingClientRect(),s=window.pageYOffset,l=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var p=this.props.viewPort,h=c.top+s,f=c.bottom+s,b=s+p.top+52,v=s+p.bottom-52;f<b?i=b-52:f<v?i=f:(d="top",i=h>b&&h<v?h:v+52)}var m=-1!==l?l+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:m,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,a=n.type,o=n.id,i=n.question,c=n.reshipmentSettings,s=n.relationship,u=(s=void 0===s?{}:s).isAuthor,d=s.isAuthorized,p=t.isCurrentUser,h="";if("article"===a?h="https://zhuanlan.zhihu.com/p/".concat(o):"answer"===a&&(h="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(o)),!p&&!u)switch(c){case"disallowed":this.showTip(e,Object(l.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(l.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(o),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,h,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,r=e.tag,a=e.html,o=e.children,i=e.onClick,c=e.className,s=e.itemProp,u=e.style,d=e.prefix,p=e.ecommerce,h=e.shouldUseArticleCard,f=e.shouldShowCatalog,b=e.shouldCatalogCollapse,v=e.richContentKey,m=e.isCurrentUser,g=e.isNovel,O=e.isExpanded,j=e.entityWords,y=this.state,C=y.tipShown,w=y.tipContent,k=y.tipX,x=y.tipY,R=y.tipPosition;return Object(l.c)("div",{ref:t,onClick:i,className:c,style:u,children:[d,Object(l.b)(se.a,{entityWords:j,richContentKey:v,sourceId:n.id,sourceType:n.type,itemProp:s,tag:r,html:a,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:p,shouldUseArticleCard:h,shouldShowCatalog:f,useCatalogV2:!0,isAuthor:m,isNovel:g,isExpanded:O,shouldCatalogCollapse:b}),o,Object(l.b)(ie.a,{shown:C,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:k,y:x,position:R,content:w,className:"CopyrightRichText-tooltip"})]})}}]),n}(p.Component);ue.propTypes={onRef:d.a.func,viewPort:d.a.object};var de,pe,he,fe,be=Object(V.compose)(Object(h.connect)((function(e,t){return{isCurrentUser:Object(ce.i)(e,t.data.author)}})))(ue),ve=n(1130),me=n(208),ge=n(41),Oe=n(209),je=n.n(Oe),ye=n(178),Ce=n(139);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ke=function(e){Object(i.a)(n,e);var t=we(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,a=e.onClick,o=e.videoPlayCount;return Object(l.c)("div",{className:"ContentItem-time",children:[Object(l.b)(ge.Link,{to:t,target:"_blank",onClick:a,children:Object(l.b)("span",{"data-tooltip":je()(de||(de=Object(me.a)(["发布于",""])),Object(Ce.toDateTimeString)(n)),"aria-label":je()(pe||(pe=Object(me.a)(["发布于",""])),Object(Ce.toDateTimeString)(n)),children:r!==n?je()(he||(he=Object(me.a)(["编辑于",""])),Object(Ce.toDateTimeString)(r)):je()(fe||(fe=Object(me.a)(["发布于",""])),Object(Ce.toDateTimeString)(n))})}),Boolean(o)&&Object(l.c)("span",{css:{marginTop:10,marginLeft:5},children:["· ",Object(ye.cnNiceNumber)(o),"次播放"]})]})}}]),n}(p.Component);ke.propTypes={href:d.a.string,created:d.a.number,updated:d.a.number,videoPlayCount:d.a.number,onClick:d.a.func};var xe=ke,Re=n(582),Te=n(1069),Ne=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),Pe=["url","hasVideo","duration","isVideoAnswer"];function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Se=/.*?(class="link-box")/;var Ae=function(e){Object(i.a)(n,e);var t=Ie(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state=Object.assign(Object.assign({},e.getInitTruncatedState(e.props)),{},{shouldSticky:!1,offset:0,prevImgUrls:[]}),e.richContentRef=Object(p.createRef)(),e.truncateContent=function(){var t=e.props,n=t.isMobile,r=t.onToggleExpend,a=n?400:800,o=e.props.expandedHeight||a;(!e.content||e.content.scrollHeight<o)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==r||r(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,r=t.allowCollapseWithEmptyExcerpt,a=t.html,o=t.expanded,i=t.cover,c=t.unescapable,s=t.limit,l=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,p=!0,h=e.state.truncatedContent;if((n||r)&&(Se.test(n)||d))h=n;else if(!c){var f=i?l:s,b=e.truncate(a,f,u);p=b.isTruncated,h=b.content}return{isTruncated:p,isExpanded:a&&o,truncatedContent:h,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.handleExpand=function(t){var n,r,a,o,i,c,s=e.props.zaIds.expand;null!=t&&t.target&&(((null===(o=a=t.target.textContent)||void 0===o?void 0:o.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(a=null));(P.a.trackEvent(e.richContentRef.current,Object.assign(Object.assign({action:"Expand"},a&&{name:a}),s&&{id:s})),Ne.has(null===(n=e.props)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.id))&&S.a.increment("RichContent.Expand.afterZALog.".concat(a||"default",".").concat(s||"default",".").concat(null===(i=e.props)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id,".count"));var l=e.props.onExpand;if(l)l(t);else{var u=e.props,d=u.onToggleExpend,p=u.data,h=p.type,f=p.id;e.context.currentUser&&Object(Te.c)("article"===h?"post":h,f,Te.a);d&&d(!0),e.setState({isExpanded:!0},(function(){"article"===h&&Object(R.onViewedOnce)(e.richContentRef.current,(function(){P.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;P.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&t(!1),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n,r,a=e.props,o=a.ua,i=a.isMobile,c=e.state,s=c.isExpanded,l=c.isTruncated,u=c.prevImgUrls,d=l&&!s,p=t.target;d||"IMG"!==p.tagName||!p.classList.contains("zh-lightbox-thumb")&&!p.classList.contains("Slideshow-swiperImage")||(i&&o.MQQBrowser&&null!==(n=window.browser)&&void 0!==n&&null!==(r=n.app)&&void 0!==r&&r.openPhotoBrowser?setTimeout((function(){window.browser.app.openPhotoBrowser(u,b()(u,(function(e){return e===p.dataset.original})),0)}),0):e.setState({previewImg:p}))},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleObserve=function(t){var n=t[0].intersectionRatio;if(n||!document.querySelector("#root").style.position){var r=n>0;r!==e.state.shouldSticky&&(e.setState({shouldSticky:r}),r||e.checkOpenInAppStyle(!1))}},e.handleTrunObserve=function(t){var n=e.props,r=n.data,a=(r.type,r.id,n.updateReadStatus,n.html),o=t[0],i=o.intersectionRatio,c=o.isIntersecting;e.truncateComputed||(i>0||c||!a)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,r=t.before,a=t.unescapable,o=e.state,i=o.isExpanded,c=o.isTruncated;return!r&&!n||a?c&&!i:!i},e}return Object(o.a)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,r=e.author,a=e.question;return{objectId:t,type:n,author:r,title:(a=void 0===a?{}:a).title,url:e.url,isCopyable:e.isCopyable}}},{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign(Object.assign({},this.updateStateInBrowser()),{},{viewPort:{top:148,bottom:window.innerHeight-56}}),(function(){var t,n;null===(t=(n=e.props).onToggleExpend)||void 0===t||t.call(n,e.state.isExpanded,{trackUserAction:!1})})),Object(R.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,r=n.type,a=n.id,o=t.expanded;e.context.currentUser&&o&&Object(Te.c)("article"===r?"post":r,a,Te.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){var n=e.ua,r=e.html,a=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var o=this.richContentRef.current.getBoundingClientRect();o.top<this.props.topExcludedHeight&&(this.rect=o,this.scroll=window.pageYOffset)}a&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:E(r)})}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,a=n.bottom,o=n.height,i=this.richContentRef.current.offsetHeight,c=window.innerHeight,s=a<c?i-o:r-(c-i);window.scrollTo(0,this.scroll+s),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,a=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:a?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(T.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,a=t.noCollapsed,o=t.expandText,i=void 0===o?"展开阅读全文":o,c=t.onClick,s=t.videoData,u=t.needExpandArrow,d=void 0===u||u,p=this.state,h=p.isExpanded,f=p.isTruncated,b=p.shouldSticky,v=p.offset;if(!h)return[r&&f&&!s&&Object(l.c)(g.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[i,d&&Object(l.b)(j.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(l.b)(ae.a,{children:n},"actions")];var m=(n||!a)&&Object(l.c)(ae.a,{className:"RichContent-actions",children:[n,!a&&Object(l.c)(g.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(l.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(l.b)(j.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return b&&m?Object(l.b)(C.a,{offset:v,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:m}):m}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,a=t.data,o=t.itemProp,i=void 0===o?"text":o,c=t.expandText,s=void 0===c?"阅读全文":c,u=t.onClick,d=t.prefix,p=t.unescapable,h=(t.isSearchContent,t.collapsedHeight),f=t.ecommerce,b=t.canAbstract,v=t.shouldUseArticleCard,O=t.richContentKey,C=t.shouldCatalogCollapse,k=t.isNovel,R=t.entityWords,T=this.state,N=T.truncatedContent,P=T.previewImg,I=T.viewPort,S=T.contentCollapsed,A=T.isExpanded,E=this.isCollapsed(),L=N||r,V="answer"===a.type?Object(w.a)(n):n,B=E?L:V,H={},_=Object(l.c)(be,Object.assign(Object.assign(Object.assign({entityWords:R,richContentKey:O&&String([O,E]),itemProp:i,className:m()("RichContent-inner",{"RichContent-inner--collapsed":S}),style:E&&p?{maxHeight:h}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:A,data:a,html:B,viewPort:I,prefix:d},E&&{onClick:u||this.handleExpand}),H),{},{ecommerce:f,shouldUseArticleCard:v,shouldCatalogCollapse:C,shouldShowCatalog:Object(M.a)(a)&&(A||p&&!E),isNovel:k,children:[b&&Object(l.b)(re,Object.assign({},this.abstractProps)),!p&&E&&Object(l.c)(g.c,{preset:"plain",className:"ContentItem-more",children:[s,Object(l.b)(j.a,{className:"ContentItem-arrowIcon",center:!0})]}),P&&Object(l.b)(y.a,{img:P,onClose:function(){return e.setState({previewImg:null})}})]}),E);return p?Object(l.b)(x.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:_}):_}},{key:"render",value:function(){var e=this.props,t=e.unescapable,r=e.after,a=e.before,o=e.extra,i=e.cover,c=e.hasVideo,s=e.renderCanExpandExtra,u=e.className,d=e.videoData,h=e.handleClickVideoMoreButton,f=e.duration,b=e.isVideoAnswer,v=this.state.isExpanded,g=this.isCollapsed(),O=d?Object(l.c)(p.Fragment,{children:[Object(l.b)(ve.a,{data:d}),Object(l.b)("p",{className:"RichContent-videoMore",onClick:h,children:"点击查看全文"})]}):this.renderText(),j=v?Object(l.b)(x.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve,children:O}):O;return Object(l.c)("div",{className:m()("RichContent",u,{"is-collapsed":g,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(l.b)(L.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!g&&a,!t&&g&&i&&Object(l.b)(n.Cover,{url:i,hasVideo:c,onClick:this.handleExpand,duration:f,isVideoAnswer:b}),j,o||"function"==typeof s&&s(v,this.handleExpand),!g&&r,this.renderActions()]})}}]),n}(p.Component);Ae.contextTypes={currentUser:d.a.object},Ae.propTypes={enableConvert:d.a.bool,unescapable:d.a.bool,expanded:d.a.bool,noCollapsed:d.a.bool,limit:d.a.number,limitWithImage:d.a.number,collapsedHeight:d.a.number,html:d.a.string,excerpt:d.a.string,allowCollapseWithEmptyExcerpt:d.a.bool,truncateDisabled:d.a.bool,before:d.a.node,after:d.a.node,prefix:d.a.node,extra:d.a.node,renderCanExpandExtra:d.a.func,topExcludedHeight:d.a.number,onPositionStatusChange:d.a.func,type:d.a.string,data:d.a.object,canAbstract:d.a.bool,cover:d.a.string,hasVideo:d.a.bool,truncateHTMLOptions:d.a.object,expandText:d.a.string,onToggleExpend:d.a.func,videoData:d.a.object,handleClickVideoMoreButton:d.a.func,zaIds:d.a.shape({expand:d.a.number})},Ae.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{}},Ae.Cover=function(e){var t=e.url,n=e.hasVideo,a=e.duration,o=e.isVideoAnswer,i=Object(r.default)(e,Pe);return Object(l.c)("div",Object.assign(Object.assign({className:m()("RichContent-cover",{"RichContent-cover--mobile":!1})},i),{},{children:[Object(l.c)("div",{className:"RichContent-cover-inner",children:[Object(l.b)(k.a,{thumbnail:Object(N.imgUrl)(t,"60w"),url:Object(N.imgUrl)(t,"400x224"),alt:"cover"}),a&&Object(l.b)("div",{className:"RichContent-cover-mask"}),a&&Object(l.b)("div",{className:"RichContent-cover-duration",children:a})]}),o&&Object(l.b)("img",{alt:"",css:{position:"absolute",left:0,top:0,width:"64px",height:"18px",objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&Object(l.b)(O.a,{className:"RichContent-cover-play"})]}))};t.b=Object(h.connect)((function(e){return{ua:Object(A.uaSelector)(e),isMobile:Object(A.isMobileSelector)(e)}}),{updateReadStatus:Re.b})(Ae)},953:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(12),d=n.n(u);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(o.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return Object(s.b)("div",{className:d()("Badge",t),children:n})}}]),n}(l.Component),f=n(74),b=n(1062),v=n(959);function m(e){return Object(s.b)(f.a,Object.assign(Object.assign({as:"span",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",onClick:v.a.show},e),{},{children:Object(s.b)(b.a,{css:{height:"1em",width:"1em","&:hover":{cursor:"pointer"}},center:!0})}))}var g=Object(l.memo)(m);t.b=h},954:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(77),i=n(17),c=n(18),s=n(9),l=n(1),u=n(3),d=n.n(u),p=n(0),h=n(41),f=n(36),b=n(955),v=n(30);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=m(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind(Object(o.a)(e)),e}return Object(a.a)(n,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,r=e.ellipsisLength,a=e.expandable,o=e.privacyEnabled,i=e.showPrivacyPage,c=this.state.expanded,s="等 ".concat(t.length," 个"),u=t;return c||(u=t.slice(0,r)),0===t.length?null:Object(l.c)("span",{children:[u.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(b.a,{showPrivacyPage:o&&i,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:Object(l.b)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:Object(l.b)(h.Link,{to:"".concat(v.E,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<u.length-1?"、":" "]},t)})),!c&&t.length>r&&(a?Object(l.b)(f.c,{preset:"plain",onClick:this.onExpand,children:s}):s),"话题"]})}}]),n}(p.Component);g.propTypes={topics:d.a.array.isRequired,user:d.a.object,ellipsisLength:d.a.number,expandable:d.a.bool,noHoverCard:d.a.bool,privacyEnabled:d.a.bool,showPrivacyPage:d.a.bool},g.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1},t.a=g},955:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(0),o=n(444),i=function(e){var t=e.children,n=e.showPrivacyPage,i=e.authWrapperClassName,c=e.authChild,s=a.Children.only(t),l=c?a.Children.only(c):s;return n?Object(r.b)(o.a,{wrapperClassName:i,loginButton:l}):s}},966:function(e,t,n){},983:function(e,t,n){"use strict";var r=n(33),a=n(1),o=n(0),i=n(3),c=n.n(i),s=n(419),l=n(421),u=n(954),d=["user","noHeadline"];function p(e){var t,n=e.user,i=e.noHeadline,c=Object(r.default)(e,d),p=n.headline,h=n.isOrg,f=Object(o.useMemo)((function(){return Object(l.e)(n.badgeV2||n.badge)}),[n]),b=f.identity,v=f.bestAnswerer,m=f.baike,g=f.title;return g?Object(a.b)(s.a,Object.assign({html:g},c)):!h&&null!=v&&null!==(t=v.topics)&&void 0!==t&&t.length?Object(a.c)("div",Object.assign(Object.assign({},c),{},{children:[Object(a.b)(u.a,{topics:v.topics,user:n}),"的优秀答主"]})):b?Object(a.b)("div",Object.assign(Object.assign({},c),{},{children:b[0].description})):m?Object(a.b)("div",Object.assign(Object.assign({},c),{},{children:m.description})):p&&!i?Object(a.b)(s.a,Object.assign({html:p},c)):null}p.propTypes={user:c.a.object.isRequired,noHeadline:c.a.bool},t.a=Object(o.memo)(p)}}]);
//# sourceMappingURL=main.shared_a7b367b7bf06fb0fc5585fec26d0675bd42be57e.532876bb6763de41d409.js.map