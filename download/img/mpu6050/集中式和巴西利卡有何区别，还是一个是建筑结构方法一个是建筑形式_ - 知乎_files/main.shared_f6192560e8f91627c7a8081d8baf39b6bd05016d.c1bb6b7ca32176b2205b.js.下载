(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1006:function(e,t,n){"use strict";var r=n(33),a=n(1),o=n(122),i=n(414),c=["checked","children"];t.a=function(e){var t=e.checked,n=e.children,s=Object(r.default)(e,c);return Object(a.c)(o.b,Object.assign(Object.assign({},s),{},{children:[Object(a.b)("span",{css:{display:"inline-block",width:24,marginLeft:-24},children:t&&Object(a.b)(i.a,{text:!0,center:!0})}),n]}))}},1007:function(e,t,n){"use strict";n.d(t,"a",(function(){return Do}));var r=n(49),a=n(4),o=n(15),i=n(16),c=n(77),s=n(17),l=n(18),u=n(9),d=n(7),b=n(1),f=n(0),h=n.n(f),p=n(19),m=n(61),v=n(3),O=n.n(v),g=n(12),j=n.n(g),y=n(26),w=n(34),C=n(41),x=n(68),S=n.n(x),k=n(878),A=n(1134),R=n(1089),T=n(2817),I=n(2818),E=n(35),B=n(74),N=n(36),L=n(122),D=n(160),M=n(45),z=n.n(M),P=n(166),_=n(161),F=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}];function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var V=function(e){Object(s.a)(n,e);var t=U(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,a=e.className;return Object(b.b)("div",{className:j()("RadioButtons",a),children:t.map((function(e,t){var a=e.value,o=e.text,i=e.placeholder;return Object(b.c)("label",{className:"RadioButtons-item",children:[Object(b.b)("span",{className:"RadioButtons-text",children:o}),Object(b.b)("input",{type:"radio",className:"RadioButtons-input",value:a,checked:n===a,onChange:function(){return r(a,i)}})]},t)}))})}}]),n}(f.PureComponent);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}V.propTypes={options:O.a.arrayOf(O.a.shape({value:O.a.string,text:O.a.string,placeholder:O.a.string})).isRequired,value:O.a.string,onChange:O.a.func,className:O.a.string};var q=function(){return Promise.all([n.e(2),n.e(6),n.e(67),n.e(70),n.e(1),n.e(3),n.e(10),n.e(24),n.e(25),n.e(86)]).then(n.bind(null,2825))},G=F.map((function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}})),K=function(e){Object(s.a)(n,e);var t=H(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},e.handleReasonCodeChange=function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")},e.handleAddAnnotation=function(){var t=e.props,n=t.addAnnotation,r=t.type,a=t.urlToken,o=t.showNotification,i=t.onClose;n(r,a,e.state.selectedReasonCode,e.input.toHTML()).then((function(){i(),o&&o("标记内容成功")}))},e.handleReasonDescriptionChange=function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state,i=o.selectedReasonCode,c=o.isReasonDescriptionEmpty,s=o.selectedReasonPlaceholder,l=function(e){var t=F.find((function(t){return t.code===e}));return t&&t.description}(i),u=32300===i;return Object(b.b)(_.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:a,children:r&&Object(b.c)("div",{children:[Object(b.c)("div",{className:"AddAnnotationModal-body",children:[Object(b.b)(V,{options:G,onChange:this.handleReasonCodeChange,value:String(i)}),i&&Object(b.c)("div",{children:[Object(b.c)("div",{className:"AddAnnotationModal-description",children:[l,"（",u?"必填":"选填","）"]}),Object(b.b)(P.a,{getComponent:q,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:s,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),Object(b.b)(_.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:Object(b.b)(N.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&c,children:"标记"})})]})})}}]),n}(f.PureComponent);K.propTypes={addAnnotation:O.a.func.isRequired,onClose:O.a.func.isRequired,shown:O.a.bool.isRequired,type:O.a.oneOf([0,1,2]).isRequired,urlToken:O.a.oneOfType([O.a.number,O.a.string]),showNotification:O.a.func,className:O.a.string};var W=n(55),Q=n(95),Y=n.n(Q),Z=n(157);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var X=function(e){Object(s.a)(n,e);var t=J(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isReasonDescriptionEmpty:!0},e.handleCancelAnnotation=function(){var t=e.props,n=t.cancelAnnotation,r=t.type,a=t.urlToken,o=t.showNotification,i=t.onClose;n(r,a,32305,e.input.value).then((function(){i(),o&&o("撤销标记成功")}))},e.handleReasonDescriptionChange=function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state.isReasonDescriptionEmpty;return Object(b.b)(_.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:a,children:r&&Object(b.c)("div",{className:"CancelAnnotationModal",children:[Object(b.b)(Z.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(b.c)(_.a,{direction:"horizontal",children:[Object(W.isBrowser)()&&!Y()(window.navigator.userAgent).Mobile&&Object(b.b)(N.c,{onClick:n,size:"spread",children:"取消"}),Object(b.b)(N.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:o,children:"撤销标记"})]})]})})}}]),n}(f.PureComponent);X.propTypes={cancelAnnotation:O.a.func.isRequired,onClose:O.a.func.isRequired,shown:O.a.bool.isRequired,type:O.a.oneOf([0,1,2]).isRequired,urlToken:O.a.oneOfType([O.a.number.isRequired,O.a.string.isRequired]),showNotification:O.a.func,className:O.a.string};var $=n(422),ee=n(474),te=n(415),ne=n(30),re=n(85),ae=n.n(re),oe=n(79),ie=n(121),ce=n(2),se=n(6),le=n(37),ue=n(5),de=Object.assign({},Object(ue.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),be=function(e){return e===ne.e?"answers":e===ne.g?"pins":e===ne.f?"articles":null},fe=n(29),he=n(446),pe=n(57),me=n(260),ve=n(46),Oe=n(156),ge=n(1215),je=n(934),ye=n(1016),we=n(1006),Ce=n(181),xe=n(1166),Se=n(1212),ke=n(1048),Ae=n(1109),Re=n(94),Te=n.n(Re),Ie=n(21),Ee=n.n(Ie),Be=n(23),Ne=n.n(Be),Le=n(22),De=n.n(Le),Me=n(25),ze=n.n(Me),Pe=n(14),_e=n.n(Pe),Fe=n(28),Ue=n.n(Fe),Ve=n(40),He=n.n(Ve),qe=n(207),Ge=n.n(qe),Ke=n(31),We=n.n(Ke),Qe=n(53),Ye=n.n(Qe),Ze=n(63),Je=n.n(Ze),Xe=n(44),$e=n(66),et=n(178),tt=n(1439),nt=n(2236),rt=n(2770),at=n(1592),ot=n(888),it=n(204),ct=n(114),st=(n(435),n(412)),lt=n(414),ut=n(852),dt=n(83),bt=(n(209),["as","size"]),ft=["fg","bg","stroke","icon"],ht=["size","center","icon","stroke","fg","bg"],pt=["Icon","badgeInfo","containerProps"],mt=["badgeInfo","badge","isOrg","className","linkify","enableTooltip"],vt=["badgeInfo","badge","size","linkify","enableTooltip","isOrg"],Ot=function(e){var t=e.as,n=void 0===t?"svg":t,r=e.size,a=We()(e,bt);return Object(b.b)(n,Object.assign({},a,r&&{width:r,height:r}),void 0)},gt=function(e){var t=e.children;return Object(b.c)("span",Object.assign({css:{display:"inline-flex",alignItems:"center"}},{children:["​",t]}),void 0)},jt=function(e){return Object(b.b)("path",Object.assign({d:"M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z"},e),void 0)},yt=function(){return Object(b.b)("path",{d:"M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"},void 0)},wt=function(){return Object(b.b)("path",{d:"M15.7813142,3.57503307 L15.7854711,3.57151971 L15.8921602,3.69421038 C16.4424581,4.28431051 17.5350358,4.74412453 18.2894455,4.73316843 C19.9333771,4.58833861 21.2181294,5.79159049 21.15505,7.4886116 C21.0701034,8.2865101 21.5265142,9.46606744 22.1127648,10.035647 C23.3717224,11.0894606 23.4353862,12.8395995 22.2012979,14.0008558 C21.5713113,14.5098203 21.0601754,15.6488699 21.0713212,16.4574574 C21.2178026,18.101598 20.0080847,19.4177693 18.3112241,19.3546942 C17.5092159,19.2692363 16.3558202,19.7109277 15.7654686,20.3212774 L15.6621219,20.4336952 C14.6500533,21.6427249 13.0849849,21.6436494 11.9474232,20.5631265 C10.8923672,21.6870601 9.32522077,21.5992584 8.24023034,20.4486779 L8.1078387,20.3064513 C7.55404654,19.712602 6.49129072,19.2608283 5.70952995,19.2733367 L5.54483281,19.2812165 C3.90192421,19.4259562 2.78153527,18.2170275 2.84495915,16.5118397 C2.93043705,15.7096812 2.48857834,14.5554516 1.90697576,13.9902121 C0.646877359,12.9371723 0.564979867,11.1620752 1.79820938,10.0003274 C2.42856138,9.49033387 2.93982368,8.35088862 2.92860713,7.54223086 C2.78363994,5.89831142 3.99233598,4.58198069 5.68797562,4.64483357 C6.48630047,4.72917193 7.66684346,4.2727307 8.23582678,3.68720379 C9.25777524,2.46637146 10.9345424,2.36957086 12.0582149,3.44874212 C13.122914,2.42536528 14.7150653,2.44435809 15.755462,3.54647107 L15.7776557,3.57086138 L15.7813142,3.57503307 Z"},void 0)},Ct=function(e){return Object(b.b)(Ot,Object.assign({viewBox:"0 0 24 24",size:30,x:-3,y:-3},e),void 0)},xt=function(e){var t=e.fg,n=e.bg,r=e.stroke,a=e.icon,o=We()(e,ft),i=Boolean(n);return Object(b.c)(Ot,Object.assign({viewBox:"0 0 24 24",size:24,css:{overflow:"visible!important"}},o,{children:[Object(b.b)(Ct,Object.assign({fill:r},{children:i?Object(b.b)(wt,{},void 0):Object(b.b)(yt,{},void 0)}),void 0),i?Object(b.c)(b.a,{children:[Object(b.b)(jt,{fill:n,transform:"translate(".concat(2,")")},void 0),Object(b.b)(jt,{fill:t,transform:"translate(-".concat(2,")")},void 0)]},void 0):Object(b.b)(jt,{fill:t},void 0),Object(b.b)(a,{size:12,fill:"#fff",x:6+(i?-2:0),y:6},void 0)]}),void 0)},St=f.memo((function(e){var t=e.size,n=void 0===t?18:t,r=e.center,a=void 0===r||r,o=e.icon,i=e.stroke,c=void 0===i?"background":i,s=e.fg,l=void 0===s?"currentColor":s,u=e.bg,d=We()(e,ht),f=Object(dt.f)().colors,h=function(e){return f[e]||e},p=Object(b.b)(xt,Object.assign({size:n,bg:h(u),fg:h(l),stroke:h(c),icon:o},d),void 0);return a?Object(b.b)(gt,{children:p},void 0):p})),kt={BadgeG:{fg:"#FF9607",icon:st.a},BadgeC:{fg:"#0066FF",icon:lt.a},BadgeW:{fg:"#6C53F1",icon:ut.a},BadgeGC:{fg:"#FF9607",bg:"#0066FF",icon:st.a},BadgeCW:{fg:"#0066FF",bg:"#6C53F1",icon:lt.a},BadgeGW:{fg:"#FF9607",bg:"#6C53F1",icon:st.a}},At=function(e){return Object(b.b)(St,Object.assign({},kt.BadgeG,e),void 0)},Rt=function(e){return Object(b.b)(St,Object.assign({},kt.BadgeC,e),void 0)},Tt=function(e){return Object(b.b)(St,Object.assign({},kt.BadgeW,e),void 0)},It=function(e){return Object(b.b)(St,Object.assign({},kt.BadgeGC,e),void 0)},Et=function(e){return Object(b.b)(St,Object.assign({},kt.BadgeCW,e),void 0)},Bt=function(e){return Object(b.b)(St,Object.assign({},kt.BadgeGW,e),void 0)};var Nt="https://www.zhihu.com/question/48509984",Lt="https://www.zhihu.com/question/48510028",Dt="https://www.zhihu.com/question/330307214";function Mt(e){var t=e.Icon,n=e.badgeInfo,r=e.containerProps,a=We()(e,pt);return Object(b.b)(m.Link,Object.assign({href:Object(f.useMemo)((function(){return function(e){if(!e)return null;var t=e.bestAnswerer,n=e.identity,r=e.active,a=e.baike;return t?t.url||Nt:n?n.url||Lt:r?r.url:a?Dt:null}(n)}),[n]),target:"_blank",display:"inline-block"},r,{children:Object(b.b)(t,Object.assign({},a),void 0)}),void 0)}function zt(e){return!0===e?"已认证的官方帐号":!1===e?"已认证的个人":"已认证的帐号"}function Pt(e,t){return Object(f.useMemo)((function(){var n=e||function(e){if(!e)return{};if((e=e).mergedBadges)return e.mergedBadges.reduce((function(e,t){return"best"===t.type?e.bestAnswerer=Object.assign(Object.assign({},t),{},{topics:t.sources}):"identity"===t.type?(e.identity||(e.identity=[]),e.identity.push(t)):e[t.type]=t,e}),{title:e.title});if(!(e=e).length)return{};var t,n,r=void 0;return e.forEach((function(e){"identity"===e.type&&(r?r.push(e):r=[e]),"best_answerer"===e.type&&(t=e),"baike"===e.type&&(n=e)})),{identity:r,bestAnswerer:t,baike:n}}(t);return{Icon:function(e){if(!e)return null;var t=e.identity,n=e.bestAnswerer,r=e.baike;return t?n?It:r?Et:Rt:n?r?Bt:At:r?Tt:null}(n),parsedBadge:n}}),[e,t])}function _t(e){var t=e.badgeInfo,n=e.badge,r=e.isOrg,a=e.className,o=e.linkify,i=e.enableTooltip,c=We()(e,mt),s=Pt(t,n),l=s.Icon,u=s.parsedBadge,d=Object(f.useMemo)((function(){return i?function(e,t){if(e.title)return e.title;var n=e.identity,r=e.bestAnswerer,a=e.baike;return[null==r?void 0:r.description,n&&zt(t),null==a?void 0:a.description].filter(Boolean).join(" · ")}(u,r):null}),[i,u,r]);if(!l)return null;var h=Object.assign({className:a},d&&{"aria-label":d,"data-tooltip":d});return o?Object(b.b)(Mt,Object.assign({Icon:l,badgeInfo:u,containerProps:h},c),void 0):Object(b.b)(l,Object.assign({},h,c),void 0)}var Ft=Object(f.memo)((function(e){var t=e.badgeInfo,n=e.badge,r=e.size,a=void 0===r?18:r,o=e.linkify,i=void 0!==o&&o,c=e.enableTooltip,s=void 0!==c&&c,l=e.isOrg,u=void 0!==l&&l,d=We()(e,vt);return n||t&&Object.keys(t).length?Object(b.b)(_t,Object.assign({},d,{badgeInfo:t,badge:n,size:a,linkify:i,enableTooltip:s,isOrg:u}),void 0):null}));var Ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=e/2*(1-1/Math.SQRT2)-t/2,r=parseFloat(n.toFixed(2));return{position:"absolute",right:r,bottom:r}};var Vt=n(80),Ht=n.n(Vt),qt=n(64),Gt=["getProps","params","onRequestOpen","children","extra"],Kt=["params","onRequestOpen","extra","as"],Wt=function(e){return/^(\w+:)?\/\//.test(e)?e:location.origin+e},Qt=function(e,t){var n=t.params,r=t.onRequestOpen,a=Object(it.b)();return function(t){var o=e.href,i=e.onClick;if(i&&i(t),!t.defaultPrevented&&o){var c=function(e,t){if(!t)return e;var n=e.split("#"),r=Ue()(n,2),a=r[0],o=r[1],i=a+(a.includes("?")?"&":"?")+t;return o?i+"#"+o:i}(Wt(o),n);if(null!=a&&a.ZhihuHybrid||null!=a&&a.Zhihu)return t.preventDefault(),void $e.a.dispatch("base/openURL",{url:c});null!=r&&r({ua:a,url:c})&&t.preventDefault()}}},Yt=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:Boolean(e),extra:Ht()({link:{get url(){return Wt(e)}}},n)}},Zt=function(e){var t=e.getProps,n=e.params,r=e.onRequestOpen,a=e.children,o=e.extra,i=We()(e,Gt),c=function(e,t){return Object.assign(Object.assign({},e),"function"==typeof t&&t(e))}(a.props,t);return Object(f.cloneElement)(a,Object(B.j)(Object.assign(Object.assign(Object.assign({},Yt(c.href,{extra:o})),i),{},{ref:a.ref,onClick:Qt(c,{params:n,onRequestOpen:r})})))},Jt=Object(f.forwardRef)((function(e,t){var n=e.params,r=e.onRequestOpen,a=e.extra,o=e.as,i=void 0===o?m.Link:o,c=We()(e,Kt);return Object(qt.jsx)(B.c,Object.assign(Object.assign(Object.assign({as:i},Yt(c.href,{extra:a})),c),{},{ref:t,onClick:Qt(c,{params:n,onRequestOpen:r})}))})),Xt=n(469),$t=n(52),en=n(218),tn=n.n(en),nn=n(512),rn=n(47),an=n(248),on=n(11),cn=n(118),sn=n(595),ln=n(272);function un(){var e=!1,t=[],n=new Set,r={subscribe:function(e){return n.add(e),function(){n.delete(e)}},start:function(r,a){if(e){var o=[];return n.forEach((function(e){o.push(Object(sn.a)(e,r,{transitionOverride:a}))})),Promise.all(o)}return new Promise((function(e){t.push({animation:[r,a],resolve:e})}))},set:function(t){return Object(cn.invariant)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),n.forEach((function(e){Object(ln.d)(e,t)}))},stop:function(){n.forEach((function(e){Object(sn.b)(e)}))},mount:function(){return e=!0,t.forEach((function(e){var t=e.animation,n=e.resolve;r.start.apply(r,Object(on.__spreadArray)([],Object(on.__read)(t),!1)).then(n)})),function(){e=!1,r.stop()}}};return r}var dn=n(124);var bn=n(268),fn=n(139),hn=["user","className","badgeSize","isHybrid"],pn=["query","children","innerStyle","innerRef","onClick"],mn=["name","className","defaultClassName","size","center"];function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e()(e);if(t){var a=_e()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ze()(this,n)}}var On=function(e){var t=e.medalAvatarFrame,n=Object(it.b)();return Object(Xt.versionControl)(n,{IOS:"7.39",ANDROID:"7.39"})&&t?Object(b.b)("div",{css:{position:"absolute",width:"38px",height:"38px",pointerEvents:"none",top:"-4px",left:"-4px"},children:Object(b.b)(m.Image,{alt:"头像挂件",src:t})}):null},gn=function(e){var t=e.user,n=e.className,r=e.badgeSize,a=void 0===r?14:r,o=e.isHybrid,i=We()(e,hn),c=t.avatarUrl,s=t.badge,l=t.badgeV2,u=t.isOrg,d=t.id,f=t.exposedMedal,h=Object(dt.e)(),p=o?30:24,v="0"===d||""===d,O=Object(b.c)(b.a,{children:[Object(b.b)(m.Image,{size:p,src:c,css:{borderRadius:o?"50%":"2px"},className:n}),(null!=l?l:s)&&o&&Object(b.b)(Ft,{size:a,badge:null!=l?l:s,css:Ut(2*a,a)})]});return v?Object(b.b)("span",Object.assign(Object.assign({},i),{},{children:O})):Object(b.c)(m.Box,{size:p,css:Object.assign({position:"relative"},h),className:n,children:[o&&(null==f?void 0:f.medalAvatarFrame)&&Object(b.b)(On,{medalAvatarFrame:f.medalAvatarFrame}),Object(b.b)(Jt,{href:"https://www.zhihu.com/".concat(u?"org":"people","/").concat(d),zaType:"Image",css:{position:"relative"},onClick:function(e){E.a.trackEvent(e.target,{id:1200,action:"OpenUrl",element_name:"User"})},children:O})]})},jn=!1,yn=!1,wn=function(){var e=Ge()(He.a.mark((function e(t){var n;return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yn){e.next=3;break}return e.next=3,yn=!0,$e.a.ready().catch((function(){jn=!0}));case 3:if(!jn){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,$e.a.dispatch("account/showLoginDialog",{next:t}).catch((function(e){return e}));case 7:if("object"!=typeof(n=e.sent)||"ERR_AUTH_ALREADYLOGIN"!==n.name&&"ERR_ACOUNT_NOTGUEST"!==n.name){e.next=11;break}return jn=!0,e.abrupt("return",jn);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cn=Object(f.createContext)({data:null,dispatch:Je.a,authRequired:Je.a}),xn="LOAD_COMMENT_PREVIEW",Sn="TOGGLE_LIKE",kn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;if(n===xn)return Object(se.camelizeKeys)(r);if(n===Sn){var a=r.id,o=r.nextAction,i=r.rootCommentId;return Object.assign(Object.assign({},e),{},{data:e.data.map((function(e){return i?i!==e.id?e:Object.assign(Object.assign({},e),{},{childComments:e.childComments.map((function(t){return t.id!==a?t:Object.assign(Object.assign({},t),{},{likeCount:e.likeCount+("like"===o?1:-1),liked:"like"===o})}))}):e.id!==a?e:Object.assign(Object.assign({},e),{},{likeCount:e.likeCount+("like"===o?1:-1),liked:"like"===o})}))})}return e},An=function(e){var t=e.children,n=e.resourceType,r=e.resourceId,a=e.redirectUrl,o=e.commentUnfoldable,i=e.showInteractions,c=void 0===i||i,s=e.showSecondaryComment,l=e.showSecondaryCommentButton,u=e.showLevelInfo,d=e.listHeight,h=e.maskTransparent,p=e.onAllCommentsShow,m=void 0===p?Je.a:p,v=e.openInApp,O=void 0===v?Je.a:v,g=Object(f.useReducer)(kn,null),j=Ue()(g,2),y=j[0],w=j[1],C=Object(nn.b)(),x=Object(Xe.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://www.zhihu.com";return function(t){return function(n){var r=n.target;return wn(e).then((function(e){if(e)return t(r)}))}}}(a)),S=Object(Xe.d)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return C.apply(void 0,["https://www.zhihu.com".concat(e)].concat(n))}));return Object(b.b)(Cn.Provider,{value:{data:y,dispatch:w,authRequired:x,fetcher:S,resourceType:n,resourceId:r,commentUnfoldable:o,showInteractions:c,showSecondaryComment:s,showSecondaryCommentButton:l,showLevelInfo:u,onAllCommentsShow:m,listHeight:d,maskTransparent:h,openInApp:O},children:t})};function Rn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;return function(){var a=Date.now();if(!n&&!r||a-r<t){r||(r=a);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return e.apply(this,i)}r=a}}var Tn=Object(f.forwardRef)((function(e,t){var n=e.query,r=void 0===n?{}:n,a=e.children,o=e.innerStyle,i=e.innerRef,c=e.onClick,s=We()(e,pn),l=Object(f.useContext)(Cn),u=l.resourceType,d=l.resourceId,h=l.onAllCommentsShow,p=l.listHeight,m=l.maskTransparent,v=l.openInApp,O=r.rootCommentId,g=r.anchorCommentId,j=r.openEditor,y=r.replyAuthorName,w=Object(it.b)(),C=Object(f.useMemo)((function(){var e=Object($t.stringify)(Object(se.decamelizeKeys)(tn()(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),O&&{isChild:!0}),{},{rootCommentId:void 0,isChild:void 0,anchorCommentId:null!=O?O:g},j&&{openEditor:!0,replyCommentId:g,replyRootCommentId:O,replyAuthorName:y}),p&&{listHeight:p,maskTransparent:!0}),void 0!==m&&{maskTransparent:m}),Boolean))),t=d,n=u;return r.resourceType&&r.resourceType!==u&&(n=r.resourceType,t=r.resourceId),"https://www.zhihu.com/comment/list/".concat(n,"/").concat(t,"?").concat(e)}),[r,u,d,g,O,y,j,p,m]);return Object(b.b)(Jt,Object.assign(Object.assign({as:"div",ref:t,href:C,onClick:function(e){if(!w.ZhihuHybrid)return e.preventDefault(),void v();null==c||c(e),e.defaultPrevented||null==h||h()}},s),{},{children:Object(b.b)("div",{role:"link",tabIndex:0,ref:i,onClick:Rn((function(e){e.stopPropagation()}),1e3),css:function(e){return Object.assign({":focus":{outline:"none"},":focus-visible":{outline:"".concat(e.colorMod(e.colors.GBL01A).alpha(.3)," auto 5px")}},o)},children:a})}))})),In=function(e){De()(n,e);var t=vn(n);function n(){var e;Ee()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t,n){var r=e.props,a=r.onObserve,o=r.onChange;a&&a(t),t.forEach((function(e){o&&o(e,n)}))},e}return Ne()(n,[{key:"componentDidMount",value:function(){var e=Object(rn.findDOMNode)(this);e&&(this.observer=this.createObserver(),this.observer.observe(e))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}},{key:"createObserver",value:function(){var e=this.props,t=e.root,n=e.rootMargin,r=e.threshold,a=e.trackVisibility,o=e.delay;return new window.IntersectionObserver(this.handleChange,{root:t,rootMargin:n,threshold:r,trackVisibility:a,delay:o})}},{key:"render",value:function(){return this.props.children}}]),n}(f.Component);function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}In.propTypes={root:O.a.object,rootMargin:O.a.string,threshold:O.a.oneOfType([O.a.number,O.a.arrayOf(O.a.number)]),trackVisibility:O.a.bool,delay:O.a.number,onObserve:O.a.func,onChange:O.a.func};var Bn=function(e){De()(n,e);var t=vn(n);function n(){var e;Ee()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),En(Te()(e),"trackCardShowTimer",null),En(Te()(e),"handleIntersectionChange",(function(t,n){if(t.isIntersecting&&t.intersectionRatio>0){n.disconnect();var r=e.props,a=r.view,o=void 0===a?{}:a,i=r.extra;e.trackCardShowTimer=setTimeout((function(){E.a.trackCardShow(Te()(e),o,i)}))}})),e}return Ne()(n,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.trackCardShowTimer)}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,r=e.isAd,a=e.moduleName,o=e.content,i=e.list,c=e.card,s=e.attachedInfoBytes;if(t){var l=Object(rn.findDOMNode)(this);l&&E.a.setModule(l,{module:t,index:n,is_ad:r,module_name:a},function(e,t,n,r){return Object.assign(Object.assign(Object.assign(Object.assign({},e&&{card:{content:e}}),t&&{card:t}),n&&{list:n}),r&&{attached_info_bytes:r})}(o,c,i,s))}}},{key:"render",value:function(){var e=this.props,t=e.visibleThreshold,n=e.trackCardShow,r=e.children;return n?Object(b.b)(In,{threshold:t,onChange:this.handleIntersectionChange,children:r}):r}}]),n}(f.Component);En(Bn,"propTypes",{id:O.a.string,module:O.a.string,moduleName:O.a.string,index:O.a.number,isAd:O.a.bool,content:O.a.object,extra:O.a.object,trackCardShow:O.a.bool,attachedInfoBytes:O.a.string}),En(Bn,"defaultProps",{id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1,visibleThreshold:0});var Nn={avatarUrl:"https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_s.jpeg",badge:null,id:"0"},Ln=["1","0.7","0.4"],Dn=["[666]","[谢邀]","[赞同]"],Mn=function(e){var t=e.inputPlaceholder,n=e.commentStatus,r=e.emoticons,a=e.currentUserId,o=e.onInputShowTips,i=Object(it.b)(),c=(null==i?void 0:i.ZhihuHybrid)||(null==i?void 0:i.Zhihu),s=Object(f.useState)([]),l=Ue()(s,2),u=l[0],d=l[1],h=Object(f.useState)(Nn),p=Ue()(h,2),v=p[0],O=p[1],g=n.type,j=n.text,y=n.induceText,w=4===g,C=5===g,x=w||C,S=x?j:t;Object(f.useEffect)((function(){r.length>0&&$e.a.dispatch("base/getFrequentlyUsedEmoticon",{count:3}).then((function(e){var t=null==e?void 0:e.data;return t&&0!==t.length||(t=Dn),d(t.map((function(e){return function(e,t){return t.find((function(t){return t.placeholder===e}))}(e,r)})))}))}),[r]),Object(f.useEffect)((function(){a?$e.a.dispatch("base/getData",{type:"people",id:a}).then((function(e){var t=e.data;t&&O(Object(se.camelizeKeys)(t))})):$e.a.dispatch("account/me").then((function(e){if(null!=e&&e.url_token){var t=e.avatar_url,n=e.url_token,r=e.badge_v2,a=e.badge;O({avatarUrl:t,id:n,badgeV2:r,badge:a})}}))}),[a]);var k=Object(Xe.d)((function(e){E.a.trackEvent(e.target,{id:1203,action:"Click"}),x&&e.preventDefault(),w&&Object($e.a)("ui/showToast").dispatch({text:j}),C&&(null==o||o(y||"评论区功能升级中，暂时无法发送评论，可以使用「赞同并推荐」功能参与互动"))}));return Object(b.c)(m.Flex,{css:{width:"100%",alignItems:"center"},children:[Object(b.b)(gn,{user:v,isHybrid:c}),Object(b.b)(Bn,{module:"CommentEditView",children:Object(b.c)(Tn,{as:m.Flex,query:{openEditor:!0},css:function(e){return{flex:1,border:"1px solid ".concat(e.colors.GBK09A),marginLeft:"10px",borderRadius:"8px",height:"36px",paddingLeft:"10px",fontSize:"13px",color:e.colors.GBK06A}},innerStyle:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:k,children:[Object(b.b)(m.Text,{css:{lineHeight:"normal"},children:S||"写下你的评论..."}),u.length>0&&Object(b.b)(m.Flex,{css:{height:"34px",alignItems:"center",marginRight:"4px"},children:u.filter(Boolean).map((function(e,t){var n=e.static_image_url,r=e.title;return Object(b.b)("img",{alt:"icon",src:n,css:{width:"20px",height:"20px",marginRight:"4px",opacity:Ln[t]}},r)}))})]})})]})},zn={hybrid:{username:{fontSize:14,color:"GBK02A"},authorTag:{fontSize:13},content:{lineHeight:"21px"},commentTag:{fontSize:12,height:20,lineHeight:"16px",color:"GBK06A",marginTop:"6px"}},web:{username:{fontSize:15,color:"GBK03A"},authorTag:{fontSize:15},content:{lineHeight:"24px"},commentTag:{fontSize:14,height:24,lineHeight:"24px",color:"GBL05A",marginTop:"4px"}}};function Pn(e){var t=e.name,n=e.nicknameColor,r=void 0===n?{}:n,a=e.showLevelInfo,o=e.isOrg,i=e.id,c=e.className,s=e.uaType,l=Object(dt.f)(),u=r.color,d=r.nightModeColor,f=Boolean(a&&u&&d&&!o),h=l.isDarkMode?d:u,p=l.isDarkMode?"#999999":"#1a1a1a",v=f?h:p,O="0"===i||""===i,g=O?m.Text:Jt,j=zn[s].username,y=j.fontSize,w=j.color;return Object(b.b)(g,Object.assign(Object.assign({},!O&&{href:"https://www.zhihu.com/".concat(o?"org":"people","/").concat(i),as:m.Text}),{},{color:v||w,fontSize:y,fontWeight:"bold",lineHeight:"16px",css:[{flex:"0 1 auto"},Object(dt.d)(1)],className:c,children:t}))}function _n(e){var t=e.levelInfo,n=void 0===t?{}:t,r=n.level,a=n.iconInfo,o=a.url,i=a.nightModeUrl,c=Object(dt.f)().isDarkMode?i:o;return Object(b.b)("a",{href:"https://www.zhihu.com/level-detail",css:{marginLeft:6,height:16,display:"flex",alignItems:"center"},children:Object(b.b)(m.Image,{height:"14px",src:c,alt:"等级 ".concat(r)})})}var Fn=["comment_gif","comment_img","comment_sticker"],Un=function(e,t){return e instanceof NodeList?Object(b.b)(b.a,{children:[].map.call(e,(function(e,n){return Object(b.b)(f.Fragment,{children:t(e,n)},n)}))}):t(e)},Vn={class:"className"},Hn=function(e,t){function n(e,t){return e.nodeType===Node.TEXT_NODE?e.nodeValue:e.nodeType===Node.ELEMENT_NODE?Object(f.createElement)("A"===e.nodeName&&t?Jt:e.tagName.toLowerCase(),e.attributes?Array.from(e.attributes).reduce((function(e,t){return e[Vn[t.name]||t.name]=t.value,e}),{}):{},e.childNodes.length?Un(e.childNodes,n):null):null}return Un(e,(function(e){return t(e,(function(t){return n(e,t)}))}))},qn=function(e,t){return e.replace(/(\[[^[^\]]+\])/g,(function(e){var n=t.find((function(t){return t.placeholder===e}));return n?"<img src=".concat(n.static_image_url,' class="sticker" />'):e}))},Gn=Object(f.memo)((function(e){return function(e){if("undefined"==typeof DOMParser)return Object(b.b)("div",{dangerouslySetInnerHTML:{__html:e}});var t=(new DOMParser).parseFromString(e,"text/html");return Hn(t.body.childNodes,(function(e,t){return e.nodeType===Node.ELEMENT_NODE?t(!0):e.textContent}))}(e.text)})),Kn=function(e){var t=e.tagInfo,n=e.richText,r=e.responseLink,a=e.className,o=Object(an.b)().isDarkMode;if(!t)return null;var i=t.text,c=t.color,s=t.nightColor,l=t.hasBorder,u=t.borderColor,d=t.borderNightColor,h=t.targetLink,p=h&&r,m=Object(f.useContext)(Cn).openInApp,v=Object(it.b)(),O=Object(Xe.d)((function(e){p&&!v.ZhihuHybrid&&(e.preventDefault(),m())})),g=p?Jt:"span";return Object(b.c)(g,Object.assign(Object.assign({css:function(e){return Object.assign(Object.assign(Object.assign({},l&&u&&Object(dt.c)({border:"1px solid ".concat(o?d:u),borderRadius:"4px"})),p&&{textDecoration:"none"}),{},{height:"14px",fontSize:"10px",lineHeight:"15px",boxSizing:"border-box",marginLeft:"4px",padding:"0 4px","& a":{color:e.colors.GBL01A,textDecoration:"none"}})},className:a,style:{color:o?s:c},onClick:O},Boolean(p)&&{href:h}),{},{children:[n?Object(b.b)(Gn,{text:i}):i,Boolean(h)&&Object(b.b)(rt.a,{css:function(e){return{fill:e.colors[c],marginRight:"-2px"}},center:!0,size:12})]}))},Wn={answer:"回答",article:"文章",pin:"想法"},Qn=function(e){var t=e.vipInfo,n=t.vipIcon,r=(n=void 0===n?{}:n).url,a=t.isVip,o=Object(f.useContext)(Cn).resourceType;return Object(f.useEffect)((function(){E.a.trackCardShow(null,{id:3613,name:Wn[o]})}),[o]),r&&a?Object(b.b)(Zt,{shouldTrackShow:!0,zaType:"Image",zaBlock:"VIP",children:Object(b.b)(m.Flex,{as:"a",href:"https://www.zhihu.com/vip?entry_privileges_type=member_id",css:{marginLeft:"4px"},onClick:function(){E.a.trackEvent(null,{id:3612,action:"Click",name:Wn[o]})},children:Object(b.b)(m.Image,{src:r,css:{height:"14px",width:"14px"}})})}):null},Yn=function(e){var t=e.medalId,n=e.avatarUrl,r=e.userToken,a=e.medalName,o=Object(it.b)();return Object(Xt.versionControl)(o,{IOS:"7.39",ANDROID:"7.39"})?Object(b.b)(m.Flex,{as:"button",onClick:function(e){e.preventDefault(),Object($e.a)("base/openURL").dispatch({url:"zhihu://popup_container?"+new URLSearchParams({url:"https://www.zhihu.com/appview/v2/badge_center/detail?userToken=".concat(encodeURIComponent(r),"&badgeId=").concat(encodeURIComponent(t)),min_percent:"0.6",show_header:"false",cancelable:"true",enable_drag:"false",canchangeheight:"false"}).toString()})},css:{padding:0,marginLeft:"6px"},children:Object(b.b)(m.Image,{alt:a,css:{height:"14px",width:"14px"},src:n})}):null},Zn=function(e){var t=e.showLevelInfo,n=void 0!==t&&t,r=e.authorTags,a=void 0===r?[]:r,o=e.className,i=e.user,c=e.uaType,s=e.badgeSize,l=void 0===s?14:s,u=i.name,d=i.vipInfo,f=i.levelInfo,h=i.badge,p=i.badgeV2,v=i.isOrg,O=i.id,g=i.exposedMedal,j=void 0===g?null:g,y=i.urlToken,w=j&&j.avatarUrl&&j.medalId&&y;return Object(b.c)(m.Flex,{css:{alignItems:"center",lineHeight:"16px"},className:o,children:[Object(b.b)(Pn,Object.assign(Object.assign({name:u},f),{},{isOrg:v,id:O,showLevelInfo:n,uaType:c})),n&&f&&Object(b.b)(_n,{levelInfo:f}),a.map((function(e){return Object(b.b)(Kn,{responseLink:!0,richText:!0,tagInfo:e},e.text)})),(null!=p?p:h)&&"hybrid"!==c&&Object(b.b)(Ft,{size:l,badge:null!=p?p:h,css:{marginLeft:4}}),d&&Object(b.b)(Qn,{vipInfo:d}),w&&Object(b.b)(Yn,Object.assign({userToken:y},j))]})},Jn=function(e){var t=e.onClick,n=Object(dt.f)().colors,r=n.GBK04A,a=n.GBK99A;return Object(b.c)("span",{role:"button",tabIndex:0,css:{position:"absolute",right:0,bottom:0,paddingLeft:18,backgroundImage:"linear-gradient(90deg, ".concat(Object(dt.b)(a).alpha(0),", ").concat(a," 25%, ").concat(a,")"),display:"inline-block",color:r},onClick:t,children:["展开",Object(b.b)(at.a,{center:!0,color:r,css:{height:21}})]})},Xn=function(e){var t=e.comment,n=t.content,r=t.collapsed,a=t.isDeleted,o=t.id,i=e.emoticons,c=e.className,s=e.rootCommentId,l=e.unfoldable,u=e.uaType,d=!r&&!a,h=Object(f.useRef)(),p=Object(f.useRef)(),v=Object(f.useState)(!1),O=Ue()(v,2),g=O[0],j=O[1],y=Object(f.useState)(!1),w=Ue()(y,2),C=w[0],x=w[1],S=Object(f.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("undefined"==typeof DOMParser)return Object(b.b)("div",{dangerouslySetInnerHTML:{__html:e}});var n=qn(e,t),r=new DOMParser,a=r.parseFromString(n,"text/html");return Hn(a.body.childNodes,(function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("sticker")?t(!1):e.nodeType===Node.ELEMENT_NODE&&e.textContent.match("http")?t(!0):e.textContent}))}(n,null!=i?i:[])}),[n,i]),k=zn[u].content.lineHeight;Object(f.useLayoutEffect)((function(){var e,t;l&&!C&&(null===(e=h.current)||void 0===e?void 0:e.clientHeight)<(null===(t=p.current)||void 0===t?void 0:t.clientHeight)&&j(!0)}),[h,p,j,C,l]);var A=Object(Xe.d)((function(e){E.a.trackEvent(e.target,{id:1201,action:"OpenUrl",element_name:"Body"});var t,n=e.target;if(Fn.some((function(e){return n.classList.contains(e)}))){var r=n.href;r&&(t=r,$e.a.dispatch("base/openImage",{images:[t],index:0})),e.preventDefault()}})),R=Object(Xe.d)((function(e){e.stopPropagation(),x(!0)}));return Object(b.c)(Tn,{ref:h,innerRef:p,as:m.Box,onClick:A,fontSize:"15px",lineHeight:k,color:d?"GBK03A":"GBK07A",mt:"6px",css:Object.assign(Object.assign(Object.assign({position:"relative",overflowWrap:"break-word"},!C&&Object(dt.d)(2)),l&&!C&&{display:"block",overflow:"hidden",maxHeight:42}),{},{img:{width:"1.24em",height:"1.24em",marginBottom:"-0.25em"}}),className:c,zaType:"Card",query:{rootCommentId:s,anchorCommentId:o},children:[S,g&&!C&&Object(b.b)(Jn,{onClick:R})]})},$n=function e(t){var n=function(e,t){return Object.keys(t).reduce((function(e,n){var r=e[n];if(delete e[n],r){var a=t[n],o="function"==typeof a?a(e):a;return Object.assign(Object.assign(Object.assign({},e),o),o&&o.style&&{style:Object.assign(Object.assign({},e.style),o.style)})}return e}),Object.assign({},e))}(t,e.mapProps),r=n.name,a=n.className,o=n.defaultClassName,i=n.size,c=n.center,s=We()(n,mn),l=Object(b.b)("svg",Object.assign(Object.assign({className:"".concat(o," ").concat(o,"--").concat(r).concat(a?" ".concat(a):"")},s),i&&{width:i,height:i}));return c?Object(b.c)("span",{style:e.strutStyle,children:["​",l]}):l};$n.defaultProps={defaultClassName:"Icon",fill:"currentColor"},$n.mapProps={text:{size:"1.2em"}},$n.strutStyle={display:"inline-flex",alignItems:"center"};var er=function(e){return Object(b.b)($n,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3C16.9706 3 21 7.02944 21 12C21 12.9242 20.7842 14.037 20.3617 15.3551C20.2673 15.6497 20.2603 15.9655 20.3417 16.264L20.4506 16.64C21.073 18.8462 21.1396 20.1542 20.6504 20.5641C20.1634 20.972 18.8358 20.9294 16.6675 20.4363L16.264 20.3417C15.9655 20.2603 15.6497 20.2673 15.3551 20.3617C14.037 20.7842 12.9242 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3ZM12 4.61093C7.9191 4.61093 4.6109 7.91913 4.6109 12C4.6109 16.0809 7.9191 19.3891 12 19.3891C12.7277 19.3891 13.6797 19.2071 14.8633 18.8277C15.4548 18.6381 16.0886 18.6241 16.6417 18.7757C17.687 19.0279 18.5219 19.1739 19.1295 19.2169L19.248 19.2241L19.349 19.228L19.3449 19.1745C19.2933 18.6329 19.1303 17.872 18.846 16.8877L18.7875 16.6878C18.6241 16.0886 18.638 15.4548 18.8276 14.8633C19.2071 13.6797 19.389 12.7277 19.389 12C19.389 7.91913 16.0808 4.61093 12 4.61093Z"})}))};er.defaultProps={name:"CommentLikeNormal"};var tr=function(e){return Object(b.b)($n,Object.assign(Object.assign({viewBox:"0 0 43 41"},e),{},{children:Object(b.b)("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z"})}))};tr.defaultProps={name:"Star"};var nr=function(e){return Object(b.b)($n,Object.assign(Object.assign({viewBox:"0 0 43 41"},e),{},{children:Object(b.c)("g",{fillRule:"evenodd",children:[Object(b.b)("path",{d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z",opacity:".2"}),Object(b.b)("path",{d:"M21.5.162v34.931c-.716.01-1.43.188-2.083.53L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165c.29-.59.872-.94 1.486-.965z"})]})}))};nr.defaultProps={name:"HalfStar"};var rr=Ye()(Array(5)),ar=function(e){var t=e.score/2,n=Object(dt.f)().colors.GRD10A,r=Object(dt.b)(n).alpha(.2);return Object(b.b)(m.Flex,{flexDirection:"row",height:"20px",alignItems:"center",mt:"2px",children:rr.map((function(e,a){var o=function(e,t){return e-t>=0?1:e-t<=-1?0:.5}(t,a+1);return.5===o?Object(b.b)(nr,{css:{marginRight:"2px"},color:n,size:12},"".concat(a,"-").concat(o)):Object(b.b)(tr,{css:{marginRight:"2px"},color:o?n:r,size:12},"".concat(a,"-").concat(o))}))})},or=function(e){return Object(b.b)($n,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 4.07782C8.5 2.24411 10.4861 1.09899 12.0731 2.01775C13.7298 2.9769 14.663 4.82463 14.4516 6.72727L14.3379 7.74996H17.9194C20.4493 7.74996 22.2533 10.2038 21.4987 12.6185L19.6761 18.4508C19.1559 20.1155 17.5599 21.197 15.8279 21.0902C13.456 20.9438 9.78636 20.75 7 20.75H4.49936C3.53225 20.75 2.75 19.9658 2.75 19V9.49996C2.75 8.53346 3.5335 7.74996 4.5 7.74996H5.1371C6.55156 7.74996 7.81995 6.87883 8.32771 5.55864C8.4416 5.26254 8.5 4.94801 8.5 4.63076V4.07782ZM11.3215 3.31589C10.7346 2.97608 10 3.39961 10 4.07782V4.63076C10 5.13211 9.90771 5.62918 9.72773 6.09711C8.99716 7.99659 7.17222 9.24996 5.1371 9.24996H4.5C4.36193 9.24996 4.25 9.36189 4.25 9.49996V19C4.25 19.1386 4.36191 19.25 4.49936 19.25H7C9.83637 19.25 13.5459 19.4465 15.9203 19.593C16.9721 19.6579 17.9327 19.0008 18.2444 18.0034L20.067 12.1711C20.5198 10.7222 19.4374 9.24996 17.9194 9.24996H13.5C13.2867 9.24996 13.0834 9.15911 12.9412 9.00015C12.7989 8.84119 12.731 8.62916 12.7546 8.41713L12.9608 6.56162C13.1065 5.25035 12.4633 3.97693 11.3215 3.31589Z"})}))};or.defaultProps={name:"CommentLikeNormal"};var ir=function(e){return Object(b.b)($n,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 4.07782C8.5 2.24411 10.4861 1.09899 12.0731 2.01775C13.7298 2.9769 14.663 4.82463 14.4516 6.72727L14.3379 7.74996H17.9194C20.4493 7.74996 22.2533 10.2038 21.4987 12.6185L19.6761 18.4508C19.1559 20.1155 17.5599 21.197 15.8279 21.0902C13.456 20.9438 9.78636 20.75 7 20.75H4.49936C3.53225 20.75 2.75 19.9658 2.75 19V9.49996C2.75 8.53346 3.5335 7.74996 4.5 7.74996H5.1371C6.55156 7.74996 7.81995 6.87883 8.32771 5.55864C8.4416 5.26254 8.5 4.94801 8.5 4.63076V4.07782Z",fill:"#0066FF"})}))};ir.defaultProps={name:"CommentLikeActive"};var cr=function(e){var t,n=e.comment,r=e.rootCommentId,a=n.likeCount,o=n.liked,i=Object(it.b)(),c=Object(f.useRef)(!1),s=Object(f.useContext)(Cn),l=s.dispatch,u=s.fetcher,d=s.authRequired,h=s.openInApp,p=o?ir:or,m=(t=Object(dn.a)(un),Object(f.useEffect)(t.mount,[]),t),v=Object(Xe.d)(Ge()(He.a.mark((function e(){return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){$e.a.dispatch("iOS/hapticFeedback")}),300),e.next=3,m.start({scale:1.3,transition:{type:"tween",duration:.2,ease:[0,0,.58,1]}});case 3:return e.next=5,m.start({scale:1,transition:{type:"tween",duration:.3,ease:[.42,0,.2,1.8]}});case 5:case"end":return e.stop()}}),e)})))),O=Object(Xe.d)(function(){var e=Ge()(He.a.mark((function e(t){var a;return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.ZhihuHybrid){e.next=3;break}return h(),e.abrupt("return");case 3:if(!c.current){e.next=5;break}return e.abrupt("return");case 5:return c.current=!0,E.a.trackEvent(t,{action:o?"UnUpvote":"Upvote",id:o?1444:1202}),"like"===(a=o?"dislike":"like")&&v(),e.prev=9,e.next=12,u("/api/v4/comment_v5/comment/".concat(n.id,"/reaction/").concat(a),{method:"PUT"});case 12:l({type:Sn,payload:{nextAction:a,id:n.id,rootCommentId:r}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),$e.a.dispatch("ui/showToast",{icon:"fail",text:e.t0&&e.t0.toastMsg||"操作失败"});case 18:return e.prev=18,c.current=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),g=i.ZhihuHybrid?"":"赞";return Object(b.c)(b.a,{children:[Object(b.b)(B.a,{zaType:"Button",zaAction:o?"UnUpvote":"Upvote",as:bn.a.button,css:function(){return{marginLeft:"16px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,color:"inherit",font:"inherit",background:"none",outline:"none",border:"none",appearance:"none"}},initial:{scale:1},animate:m,onClick:d(O),children:i.ZhihuHybrid?Object(b.b)(p,{size:20,css:function(e){return{fill:e.colors.GBK06A}}}):Object(b.b)(tt.a,{size:16,css:function(e){return{fill:e.colors.GBL05A}}})}),Object(b.b)("span",{css:function(e){return{marginLeft:"4px",color:e.colors[o?"GBL01A":"GBK06A"]}},children:a>0?Object(et.cnNiceNumber)(a):g})]})},sr=function(e){var t=e.comment,n=e.editStatus,r=e.rootCommentId,a=e.className,o=e.uaType,i=e.isSecondary,c=t.score,s=t.createdTime,l=t.contentTag,u=t.commentTag,d=t.canLike,h=t.resourceId,p=t.resourceType,v=Object(f.useContext)(Cn).showInteractions,O=zn[o].commentTag,g=O.fontSize,j=O.color,y=O.height,w=O.lineHeight,C=O.marginTop,x="hybrid"===o;return Object(b.c)(m.Flex,{css:{flexDirection:"column"},className:a,children:[c>0&&Object(b.b)(ar,{score:c}),Object(b.b)(m.Flex,{flexDirection:"row",children:l.map((function(e){return Object(b.b)(Kn,{richText:!0,tagInfo:e,css:{height:"auto",padding:0,fontSize:"11px",lineHeight:"16px",marginTop:"6px","&:first-of-type":{marginLeft:0}}},e.text)}))}),Object(b.c)(m.Flex,{fontSize:g,justifyContent:"space-between",alignItems:"center",height:y,lineHeight:w,mt:C,color:j,children:[Object(b.c)(m.Flex,{css:{flexShrink:0,alignItems:"baseline"},children:[Object(b.c)("span",{children:[Object(fn.toSmartString)(s),Boolean(u.length)&&" · "]}),u.map((function(e){return Object(b.b)(Kn,{tagInfo:e,css:{fontSize:g,paddingLeft:0,paddingRight:0}},e.text)}))]}),v&&Object(b.c)(m.Flex,{css:{flexShrink:0,alignItems:"center"},children:[Object(b.c)(Tn,{query:{openEditor:!0,anchorCommentId:t.id,rootCommentId:r,replyAuthorName:t.author.name,resourceId:h,resourceType:p},onClick:function(e){n&&!n.canReply&&n.toast&&(e.preventDefault(),Object($e.a)("ui/showToast").dispatch({text:n.toast}))},children:[x?Object(b.b)(er,{size:20,center:!0}):Object(b.b)(nt.a,{size:18,center:!0}),!x&&!i&&Object(b.b)("span",{css:function(e){return{marginLeft:"4px",color:e.colors.GBL05A}},children:"回复"})]}),(!x||d)&&Object(b.b)(cr,{comment:t,rootCommentId:r})]})]})]})},lr=function(e){var t=e.comment,n=e.emoticons,r=e.rootCommentId,a=e.uaType,o=t.author,i=t.authorTag,c=t.index,s=t.id,l=t.replyToAuthor,u=t.replyAuthorTag,d=zn[a].authorTag.fontSize,f=Object(it.b)(),h=(null==f?void 0:f.ZhihuHybrid)||(null==f?void 0:f.Zhihu);return Object(b.b)(m.Flex,{css:{flexDirection:"column"},children:Object(b.b)(B.b,{content:{type:"Comment",id:t.id},children:Object(b.b)(Bn,{module:"CommentItem",index:c,card:{content:{type:"Comment",id:s}},view:{id:1199},trackCardShow:!0,children:Object(b.c)(B.e,{as:m.Flex,zaType:"Card",css:{marginTop:"4px"},children:[Object(b.b)(gn,{user:o,css:{width:"24px",height:"24px"},badgeSize:13,isHybrid:h}),Object(b.c)(m.Flex,{css:{flex:1,flexDirection:"column",marginLeft:"8px"},children:[Object(b.c)("div",{css:function(e){return{display:"flex",fontSize:d,color:e.colors.GBK03A,alignItems:"center",fontWeight:"bold",lineHeight:"16px"}},children:[Object(b.b)("div",{children:o.name}),i.map((function(e){return Object(b.b)(Kn,{tagInfo:e,css:{fontWeight:"normal"}},e.text)})),l&&Object(b.c)(b.a,{children:[Object(b.b)(rt.a,{size:12,center:!0,css:function(e){return{marginRight:"4px",fill:e.colors.GBK06A}}}),Object(b.b)("div",{children:l.name}),u.map((function(e){return Object(b.b)(Kn,{tagInfo:e},e.text)}))]})]}),Object(b.b)(Xn,{comment:t,emoticons:n,rootCommentId:r,uaType:a,css:function(e){return{marginTop:"4px",color:e.colors.GBK04A}}}),Object(b.b)(sr,{comment:t,rootCommentId:r,css:{marginTop:"-4px"},uaType:a,isSecondary:!0})]})]})})})})},ur=function(e){var t=e.id,n=e.count,r=e.offsetLeft,a=Object(dt.f)().colors;return n?Object(b.c)(Tn,{as:m.Text,css:{display:"flex",justifyContent:"flex-start",marginTop:"8px",marginLeft:r},innerStyle:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",fontSize:"12px",height:"28px",background:a.GBK10A,color:a.GBK03A,padding:"0 10px 0 16px",borderRadius:"14px"},query:{rootCommentId:t},children:[Object(b.c)("span",{children:["查看全部"," ".concat(Object(et.cnNiceNumber)(n)),"条回复"]}),Object(b.b)(ot.a,{center:!0,size:18,css:function(e){return{fill:e.colors.GBK03A}}})]}):null},dr=function(e){var t=e.comments,n=e.count,r=e.emoticons,a=e.rootCommentId,o=e.uaType,i=Object(f.useContext)(Cn),c=i.showLevelInfo,s=i.showSecondaryComment,l=i.showSecondaryCommentButton;return!s&&!l||0===t.length?null:Object(b.c)(m.Flex,{css:{borderRadius:"8px",flexDirection:"column",marginTop:"6px",marginLeft:"40px"},children:[s&&t.map((function(e,t){return Object(b.b)(B.b,{content:{type:"Comment",id:e.id},children:Object(b.b)(Bn,{module:"CommentItem",content:{type:"Comment",id:e.id},index:t,view:{id:1199},trackCardShow:!0,children:Object(b.b)(lr,{comment:e,showLevelInfo:c,emoticons:r,rootCommentId:a,uaType:o})})},e.id)})),l&&Object(b.b)(ur,{id:a,count:n,offsetLeft:s?32:0})]})},br=function(e){var t=e.comment,n=e.editStatus,r=e.showLevelInfo,a=e.showInteractions,o=e.emoticons,i=t.author,c=t.authorTag,s=t.childComments,l=void 0===s?[]:s,u=t.childCommentCount,d=t.index,h=t.id,p=Object(it.b)(),v=(null==p?void 0:p.ZhihuHybrid)||(null==p?void 0:p.Zhihu),O=v?"hybrid":"web",g=Object(f.useContext)(Cn).commentUnfoldable;return Object(b.c)(m.Flex,{css:{flexDirection:"column"},children:[Object(b.b)(B.b,{content:{type:"Comment",id:t.id},children:Object(b.b)(Bn,{module:"CommentItem",index:d,card:{content:{type:"Comment",id:h}},view:{id:1199},trackCardShow:!0,children:Object(b.c)(B.e,{as:m.Flex,zaType:"Card",css:{marginTop:"16px"},children:[Object(b.b)(gn,{user:i,isHybrid:v}),Object(b.c)(m.Flex,{css:{flex:1,flexDirection:"column",marginLeft:"10px"},children:[Object(b.b)(Zn,{user:i,showLevelInfo:r,authorTags:c,uaType:O}),Object(b.b)(Xn,{unfoldable:g,comment:t,emoticons:o,uaType:O}),Object(b.b)(sr,{comment:t,editStatus:n,showInteractions:a,uaType:O})]})]})})}),Object(b.b)(dr,{comments:l,count:u,emoticons:o,rootCommentId:h,uaType:O})]})},fr=function(e){var t,n=e.className,r=e.showLevelInfo,a=e.showInteractions,o=e.resourceType,i=e.resourceId,c=e.currentUserId,s=void 0===c?"":c,l=e.showCommentInput,u=e.inputPlaceholder,d=e.customHeader,h=e.customFooter,p=e.customCommentClosed,v=e.onCommentChange,O=e.commentType,g=void 0===O?"abstract_comment":O,j=e.onLoad,y=e.onInputShowTips,w=Object(f.useState)([]),C=Ue()(w,2),x=C[0],S=C[1],k=Object(f.useContext)(Cn),A=k.fetcher,R=k.data,T=k.dispatch,I=Object(Xe.j)(R),B=Object(Xe.d)(v),N=Object(Xe.d)((function(){A("/api/v4/comment_v5/".concat(o,"s/").concat(i,"/").concat(g)).then((function(e){return T({type:xn,payload:e})}))}));Object(f.useEffect)(N,[N]),Object(f.useEffect)((function(){var e=Object($e.a)("base/onMessage").listen((function(e){var t=e.type,n=e.data;if("comment/listChange"===t){var r=n.status;n.resourceType===o&&String(n.resourceId)===String(i)&&(N(),B(r))}}));return function(){return e()}}),[]);var L=1===(null==R||null===(t=R.commentStatus)||void 0===t?void 0:t.type);if(Object(f.useEffect)((function(){L||Object(ct.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.3/lib/emoticon.js").then((function(){return window.zh_emoticon?window.zh_emoticon.reduce((function(e,t){var n;return[].concat(Ye()(e),Ye()(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[]):[]})).then(S)}),[L]),Object(f.useEffect)((function(){!I&&R&&(null==j||j())}),[I,R,j]),!R)return null;var D=R.counts,M=(D=void 0===D?{}:D).totalCounts,z=R.data,P=void 0===z?[]:z,_=R.editStatus,F=R.commentStatus,U=void 0===F?{}:F;if(L)return p||null;var V=M>0?Object(et.cnNiceNumber)(M):"";return Object(b.c)(m.Flex,{className:n,css:{margin:"0 16px 40px",flexDirection:"column"},children:[d?d(V):Object(b.b)(m.Box,{color:"GBK02A",css:{fontSize:"15px",fontWeight:500,marginBottom:"16px"},children:"评论 ".concat(V)}),l&&Object(b.b)(Mn,{commentStatus:U,inputPlaceholder:u,emoticons:x,currentUserId:s,onInputShowTips:y}),P.map((function(e,t){return Object(b.b)(br,{comment:e,editStatus:_,showLevelInfo:r,showInteractions:a,emoticons:x,index:t},e.id)})),P.length>0&&Object(b.b)(Bn,{module:"CommentList",children:Object(b.b)(Tn,{as:m.Flex,css:function(e){return{marginTop:"20px",color:e.colors.GBK06A,fontSize:"13px",width:"100%",justifyContent:"center",lineHeight:"normal",alignItems:"center"}},onClick:function(e){return E.a.trackEvent(e.target,{id:1204,action:"OpenUrl",element_name:"ViewAll"})},children:h?h(V):Object(b.c)(b.a,{children:[Object(b.b)("span",{css:{height:"18px"},children:"查看全部评论"}),Object(b.b)(ot.a,{size:18,center:!0,css:function(e){return{color:e.colors.GBK06A,marginLeft:"4px"}}})]})})})]})};fr.propTypes={className:O.a.string,showCommentInput:O.a.bool,showLevelInfo:O.a.bool.isRequired,showSecondaryComment:O.a.bool,showSecondaryCommentButton:O.a.bool,listHeight:O.a.number,maskTransparent:O.a.bool,commentUnfoldable:O.a.bool,resourceType:O.a.string.isRequired,resourceId:O.a.string.isRequired,currentUserId:O.a.string,inputPlaceholder:O.a.string,redirectUrl:O.a.string,customHeader:O.a.func,customFooter:O.a.func,onCommentChange:O.a.func,onLoad:O.a.func,onInputShowTips:O.a.func,commentType:O.a.string,showInteractions:O.a.bool},fr.defaultProps={showLevelInfo:!1,showInteractions:!0,showCommentInput:!0,showSecondaryComment:!0,showSecondaryCommentButton:!0,commentUnfoldable:!1,onCommentChange:Je.a};var hr=Object(f.forwardRef)((function(e,t){return Object(b.b)(An,Object.assign(Object.assign({},e),{},{children:Object(b.b)(B.b,{block:"Comment",children:Object(b.b)(fr,Object.assign(Object.assign({},e),{},{ref:t}))})}))})),pr=n(488),mr=n(1110),vr=Object(C.withRouter)(Object(y.connect)(null,{loadComments:pr.e})((function(e){var t=Object(f.useState)([]),n=Object(r.a)(t,2),a=n[0],o=n[1],i=e.parent,c=i.type,s=i.id,l=i.question,u=e.loadComments,d=e.location.pathname,h=-1!==(null==d?void 0:d.indexOf("answer")),p=-1!==(null==d?void 0:d.indexOf("question")),m=Object(y.useSelector)((function(e){return Object(pe.specialQuestionOrAnswerSelector)(e,{type:h?"answer":p?"question":"",id:s||(null==l?void 0:l.id)})}));if(Object(f.useEffect)((function(){u(c,s).then((function(e){var t=e.payload;o(t.data)}))}),[s,c,u]),null==a||!a.length)return null;var v=function(e,t){e&&e.stopPropagation(),"zvideo"===c?Object($.e)(Object(je.a)({type:c,id:s},{launch_button:t})):m?location.href="zhihu://".concat(c,"/").concat(s,"?utm_app_name=zhihu_check"):Object($.e)(Object(je.a)({type:c,id:s},{launch_button:t})),e.preventDefault()};return Object(b.b)("div",{className:"CommentsForOia",children:Object(b.b)(hr,{css:{margin:0},showInteractions:!1,resourceType:c,resourceId:String(s),showCommentInput:!1,openInApp:function(e){return v(e,mr.b.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2?null:Object(b.b)(N.c,{css:{width:"calc(100vw - 32px) !important"},color:"blue",preset:"primary",onClick:function(e){return v(e,mr.b.comment_more)},children:"打开 App 查看更多评论"})}})})}))),Or=n(1441),gr=n(1015),jr=n(86),yr=n(205),wr=n(1200),Cr=n.n(wr),xr=n(1307),Sr=n.n(xr),kr=n(1416),Ar=n.n(kr),Rr=n(2247),Tr=n.n(Rr),Ir={answerAdmireCouldOpen:{image:Sr.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:Sr.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:Tr.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:Tr.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:Ar.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:Ar.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var Er=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,a=e.onRead,o=e.onUseAdmire,i=e.onUseRecommend,c=Object.keys(n).find((function(e){return n[e]})),s=Ir[c]||{},l=s.title,u=s.image,d=s.content,h=s.buttonText,p=s.buttonLink,m=s.detailViewName,v=s.cardShowId,O=s.buttonClickId,g=s.readAlwaysId,y=s.readNextId;return Object(f.useEffect)((function(){c&&E.a.trackCardShow(null,{id:v,name:m})}),[c,v,m]),Object(b.b)(jr.b,{className:j()("CreatorRightsNotification",r),onClose:function(){a("next"),E.a.trackEvent(null,{id:y,name:m})},children:c&&Object(b.c)(f.Fragment,{children:[Object(b.b)("img",{className:"CreatorRightsNotification-background",src:Cr.a,alt:"blue background"}),Object(b.b)("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),Object(b.b)("div",{className:"CreatorRightsNotification-title",children:l}),Object(b.b)("div",{className:"CreatorRightsNotification-content",children:d}),Object(b.c)(jr.a,{className:"CreatorRightsNotification-buttonGroup",children:[p?Object(b.b)(yr.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:p,target:"_blank",onClick:function(){a("current"),E.a.trackEvent(null,{id:O,name:m})},children:h}):Object(b.b)(N.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){a("current"),E.a.trackEvent(null,{id:O,name:m}),"answerAdmireCouldUse"===c&&o(),"recommendationCouldUse"===c&&i()},children:h}),Object(b.b)(N.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){a("always"),E.a.trackEvent(null,{id:g,name:m})},children:"不再提醒"})]})]})})},Br=n(1128),Nr=n(1755),Lr=n(1165),Dr=n(894),Mr=n(916),zr=n(928),Pr=n(923),_r=n(282),Fr=n(1654),Ur=n(1729),Vr=n(915),Hr=n(1664),qr=n(288),Gr=n(1124),Kr={up:1,neutral:0,down:-1};function Wr(e){var t=e.id,n=e.voteupCount,r=e.voting,a=e.isOwner,o=e.answer,i=e.currentUser,c=e.disabled,s=Object(y.useDispatch)();Object(f.useEffect)((function(){!c&&i&&s(Object(qr.b)(["opposeRight"]))}),[c,i,s]);var l=Object(y.useSelector)((function(e){var t=e.entities.questions[o.question.id];return null==t?void 0:t.voteDownReason})),u=Object(y.useSelector)((function(e){return Object(qr.d)(e)})),d=Object(f.useCallback)((function(e){s(Object(oe.L)(o.id,Kr[e],{zVideoId:t}))}),[t,s,o.id]);return Object(b.b)(Gr.a,{type:"zvideo",isShowVoteDownMenu:Boolean(!c&&i)&&u,count:n,voting:r,onVote:d,isOwner:a,voteDownReason:l,onLoadVoteDownReason:function(){s(Object(oe.k)(o.id,o.question.id))},onSelectVoteDownReason:function(e){s(Object(oe.D)(o.id,e.reasonId)).then((function(e){s(Object(fe.h)(e.payload.message))}))},onSetVoteDownReason:function(e){s(Object(qr.e)(e))}})}var Qr=n(946);function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Zr=function(e){Object(s.a)(n,e);var t=Yr(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.activateReward;return Object(b.c)("div",{className:"Reward",children:[Object(b.b)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),Object(b.b)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(f.Component);function Jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}Zr.propTypes={activateReward:O.a.func};var Xr=function(e){Object(s.a)(n,e);var t=Jr(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return Object(b.b)("div",{children:Boolean(t)&&Object(b.b)("div",{className:"Reward-money",children:Object(b.c)("span",{onClick:n,role:"button",tabIndex:0,children:["¥ ",t.toFixed(2)]})})})}}]),n}(f.Component);Xr.propTypes={totalMoney:O.a.number,showRewarders:O.a.func};var $r=n(1345);function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ta=function(e){Object(s.a)(n,e);var t=ea(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,a=e.voteupCount,o=e.isRewardList,i=e.onClose,c=e.notice;return Object(b.b)(_.b,{size:"fullPage",onClose:i,children:t&&Object(b.b)($r.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:a,onLoad:n,isRewardList:o,notice:c,type:"rewardPeople"})})}}]),n}(f.Component);function na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}ta.propTypes={onLoad:O.a.func,modalShown:O.a.bool};var ra=function(e){Object(s.a)(n,e);var t=na(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,a=t.rewardMemberCount,o=t.onUserClick,i=this.state.hoverName,c=n.slice(0,5);return Object(b.c)("div",{className:"Reward-count",children:[Object(b.b)("p",{className:"Reward-User-text",onClick:r,children:"".concat(Object(et.formatNumber)(a)," 人已赞赏")}),Object(b.c)("div",{children:[c.map((function(t,n){return Object(b.b)(C.Link,{to:"//www.zhihu.com/".concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:o,children:Object(b.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),a>6&&Object(b.c)("span",{className:"Reward-MoreUser",onClick:r,children:[Object(b.b)("i",{}),Object(b.b)("i",{}),Object(b.b)("i",{})]})]})]})}}]),n}(f.Component);ra.propTypes={users:O.a.array,handleListShown:O.a.func,rewardMemberCount:O.a.number,onUserClick:O.a.func},ra.defaultProps={users:[]};var aa=Object(te.b)({module:"UserList",moduleName:"*** 人已赞赏"})(ra);function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ia=function(e){Object(s.a)(n,e);var t=oa(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,a=e.users,o=e.onUserClick;return t?Object(b.b)(aa,{users:a,onUserClick:o,handleListShown:n,rewardMemberCount:t}):Object(b.b)("div",{className:"Reward-countZero",children:r?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(f.Component);function ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}ia.propTypes={rewardMemberCount:O.a.number,handleListShown:O.a.func,isAuthor:O.a.bool,users:O.a.array,onUserClick:O.a.func};var sa=function(e){Object(s.a)(n,e);var t=ca(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(b.c)("div",{children:[Object(b.b)("div",{className:"Reward-tagline",children:t||ne.p}),Object(b.b)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(f.Component);function la(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}sa.propTypes={onClick:O.a.func,tagline:O.a.string};var ua=function(){return n.e(78).then(n.bind(null,2858)).then((function(e){return e.TipjarDialog}))},da=function(e){Object(s.a)(n,e);var t=la(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){z.a.set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,r=t.currentUser,a=t.id,o=t.type,i=n[o][a].users,c=[r];Array.isArray(i)&&(i.push(r),c=i),e.props.onRewardSuccess(c,a,o),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var r={};n.forEach((function(e){r[e.urlToken]=e})),e.props.updateEntitiesUsers(r)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,r=n.type,a=n.id,o=n.rewardInfo.canOpenReward;if("article"===r){var i=!!o||void 0;e.props.updateArticleReward(a,t,i)}else e.props.updateAnswerReward(a,t)},e.activateReward=function(){e.onSubmitReward(ne.p)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.context.authRequired((function(t,n){var r=e.props,a=r.id;"article"===r.type?e.props.createArticleTipjar(a,t):e.props.createTipjar(a,t,n)}),void 0,fe.b),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,r=t.type;e.props.removeTradeNumber(n,r)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,r=e.isMobile,a=e.id,o=e.reward,i=e.author,c=e.type,s=e.ua,l=e.rewardInfo,u=l.canOpenReward,d=l.isRewardable,f=l.tagline,h=l.rewardTotalMoney,p=l.rewardMemberCount,m=e.onRewardUserClick,v=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var O=this.state,g=O.TipjarRender,j=O.modalShown;if(n&&u)return Object(b.b)("div",{children:Object(b.b)(Zr,{activateReward:this.activateReward})});if(d){var y=o&&o[c][a]||{},w=y.tradeNumber,C=y.users,x=y.notice,S=Object(b.b)(ta,{modalShown:j,items:C,voteupCount:p,onLoad:this.onLoad,isRewardList:n,notice:x,onClose:this.handleListHide}),k=Object(b.b)(ia,{rewardMemberCount:p,handleListShown:this.handleListShown,onUserClick:m,users:C,isAuthor:n});if(!n)return Object(b.c)("div",{className:"Reward",children:[Object(b.b)(sa,{tagline:f,onClick:this.handleRewardButtonClick}),k,S,Object(b.b)(P.a,{getComponent:ua,author:i,tagline:f,isMobile:r,ua:s,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:w,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:g,type:c,balanceEnable:v})]});var A=(Number(h)||0)/100;return Object(b.c)("div",{className:"Reward",children:[Object(b.b)(Xr,{tagline:f,totalMoney:A,showRewarders:this.showRewarders}),S,k]})}return null}}]),n}(f.Component);da.propTypes={reward:O.a.object,isAuthor:O.a.bool,author:O.a.object,id:O.a.number,rewardInfo:O.a.object,currentUser:O.a.object,ua:O.a.object,type:O.a.string,isMobile:O.a.bool,balanceEnable:O.a.bool,onRewardButtonClick:O.a.func,onRewardUserClick:O.a.func,onRewardUserMoreClick:O.a.func},da.contextTypes={authRequired:O.a.func},da.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var ba=Object(p.compose)(Object(y.connect)(null,{updateAnswerReward:oe.I,updateArticleReward:he.l,createArticleTipjar:he.b,getRewardUserDetails:he.i,getPagingArticleRewardUser:he.f,getPagingArticleRewardUserDetails:he.g,getArticleRewardUser:he.e,updateEntitiesUsers:he.m,getRewardUser:he.h,createTipjar:he.c,removeTradeNumber:he.k,onRewardSuccess:he.j,showNotification:fe.h}))(da),fa=n(945),ha=n(27),pa=function(e){return h.a.createElement(ha.a,e,h.a.createElement("path",{d:"M16.387 10.869l-3.188-4.27A1 1 0 1 1 14.8 5.401l4.92 6.59-4.883 7.491a1 1 0 1 1-1.676-1.092l3.6-5.522H7a3 3 0 0 1-3-3V7a1 1 0 1 1 2 0v2.869a1 1 0 0 0 1 1h9.387z"}))};pa.defaultProps={name:"Jump"};var ma=pa;var va=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,a=r.url,o=r.message;return Object(b.c)("a",{className:j()("CommercialQuestionTail",t),href:a,children:[o,Object(b.b)(ma,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})},Oa=n(1160),ga=n(1244),ja=n(39),ya=n.n(ja),wa=n(909),Ca=n.n(wa),xa=n(187),Sa=n.n(xa),ka=n(998),Aa=n(999),Ra=n(1012),Ta=n(892);function Ia(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function Ea(e){var t=e.logoUrl,n=e.productName,r=e.productDesc,a=e.link,o=void 0===a?"":a,i=e.btnText,c=void 0===i?"":i,s=e.className,l=void 0===s?"":s,u=e.productNameMaxLength,d=void 0===u?6:u,b=e.productDescMaxLength,f=void 0===b?15:b,p=e.btnTextMaxLength,m=void 0===p?4:p,v=e.type,O="".concat("pc"===v?"pc":"app","_EAnswerCard");return h.a.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:o,target:"_blank",className:j()("".concat(O),l)},h.a.createElement(B.e,{zaType:"Card",zaBlock:"advertPluginCard"}),h.a.createElement("img",{src:t,className:"".concat(O,"-image"),alt:"logo"}),h.a.createElement("div",{className:"".concat(O,"-content")},h.a.createElement("div",{className:j()("".concat(O,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},Ia(n,d)),r&&h.a.createElement("div",{className:"".concat(O,"-content-desc"),style:{maxWidth:"".concat(f+1,"em")}},Ia(r,f))),h.a.createElement("div",{className:"".concat(O,"-button"),style:{maxWidth:"".concat(m+1,"em")},onClick:e.onBtnClick},Ia(c,m)),"app"===v&&h.a.createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),t.onClose()}(t,e)}},"×"))}var Ba=n(1038),Na=function(e){function t(e){var n;return Ee()(this,t),(n=ze()(this,_e()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,E.a.trackCardShow(e,{id:5642}),Object(ka.h)(e,{trackMethod:ka.i,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=Object(Ta.e)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=Object(Ta.e)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),r=Object(Ta.e)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");r&&(Ba.a({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then((function(e){var t=e.status,r=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:r.status})})).catch(console.log),n.appPromotionUrl||$e.a.listen("ad/downloadStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=void 0===t?"error":t;n.setState({status:r})}))),n.appPromotionUrl=r,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==Object(Ta.h)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),Ba.a(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){E.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(ka.a)({trackMethod:ka.i,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==Object(Ta.h)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),Ba.a(n.downloadInfo,"ad/open"))},n.sessionId=Sa()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return De()(t,e),Ne()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=(n[t.pluginType]||{}).trackUrl,i=void 0===o?{}:o,c=Object(Ta.h)(),s={xSuger:a,sessionId:this.sessionId,os:c.os,cardType:"".concat(c.os,"_download")};this.track=Object(Ta.u)(i,s)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Ta.h)();E.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,o=t.className,i=void 0===o?"":o,c=t.pluginType,s=(a[c]||{}).plugin,l=(void 0===s?{}:s)[c],u=Object(Ta.h)(),d=this.state.status,b=void 0===d?"ready":d,f={className:i,type:"pc"===u.os?"pc":"app",btnText:l.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return/^ios/i.test(c)?(f.logoUrl=l.icon,f.productName=l.name,l.score>0&&(f.productDesc="Appstore 评分：".concat(l.score)),f.link=l.landingUrl):/^android/i.test(c)&&(f.logoUrl=l.icon||r.avatarUrl||"",f.productName=l.name,f.link=l.landingUrl,f.onBtnClick=this.onBtnClick,Ra.d[b]&&(f.btnText=Ra.d[b])),f.link?h.a.createElement(B.c,ya()({as:Ea,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},f)):null}}]),t}(h.a.Component);Na.propTypes={data:O.a.object.isRequired};var La=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?h.a.createElement(Aa.a,null,h.a.createElement(Na,e)):null},Da=function(e){function t(e){var n;return Ee()(this,t),(n=ze()(this,_e()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,E.a.trackCardShow(n.card,{id:5642}),Object(ka.h)(e,{trackMethod:ka.i,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),E.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(ka.a)({trackMethod:ka.i,tracks:n.track.click});var t=Object(Ta.e)(n.props.data,"plugin.leads.plugin.leads",{}),r=n.props.data,a=r.contentType,o=r.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=Object(Ta.g)(),Ba.a(t,"ad/openForm"));var i=t.cardType,c=t.hashId;if("message"===i){e.preventDefault();var s={inbox_id:c,initial_message:"",auto_focus:!0,title:"",source_type:a,source_id:o};Ba.a(s,"base/openInbox")}},n.isHiddenEcommerceAd=function(e){return!(!e.isCanvas||e.adjson)||!(e.isCanvas||e.token||e.landingUrl)},n.sessionId=Sa()(),n.init(e),n.viewShow=!1,n}return De()(t,e),Ne()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=t.pluginType,i=Object(Ta.e)(e.data,"plugin.leads.plugin.leads",{}).cardType,c=(n[o]||{}).trackUrl,s=void 0===c?{}:c,l=Object(Ta.h)().os,u={xSuger:a,sessionId:this.sessionId,os:l,cardType:i};this.track=Object(Ta.u)(s,u)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Ta.h)();E.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=Object(Ta.e)(this.props.data,"plugin.leads.plugin.leads",{}),r=n.isCanvas,a=n.adjson;r&&Ba.a({adjson:a},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,o=void 0===a?{}:a,i=t.className,c=void 0===i?"":i,s=t.pluginType,l=Object(Ta.e)(o,"".concat(s,".plugin.").concat(s),{});return this.isHiddenEcommerceAd(l)?null:h.a.createElement(B.c,ya()({as:Ea,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:r.avatarUrl,productName:r.name,productNameMaxLength:13,productDesc:l.desc,productDescMaxLength:15,link:l.landingUrl||"javascript:",btnText:l.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(h.a.Component);Da.propTypes={data:O.a.object.isRequired};var Ma=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?h.a.createElement(Aa.a,null,h.a.createElement(Da,e)):null},za=function(e){function t(){var e,n;Ee()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=ze()(this,(e=_e()(t)).call.apply(e,[this].concat(a)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var r=(t=Object(Ta.b)(Object(se.camelizeKeys)(t))).plugin,a=Object(Ta.h)();if(r.androidDownload||r.iosDownload){var o="".concat(a.os,"Download");if("pc"===a.os)o=("mac"===a.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find((function(e){return r[e]}))||"";return h.a.createElement(La,ya()({},e,{data:Ca()({},t,{pluginType:o}),onClose:n.onClose}))}return r.leads&&"pc"!==a.os?h.a.createElement(Ma,ya()({},e,{data:Ca()({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return De()(t,e),Ne()(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?h.a.createElement(h.a.Fragment,null,this.getContent({data:e})):null}}]),t}(h.a.Component),Pa=n(417),_a=n(585);function Fa(e){var t=e.loadBrandContentPlugin,n=e.contentType,r=e.contentToken,a=e.author,o=e.plugin,i=Object(f.useCallback)((function(){t(n,r)}),[n,r,t]),c="organization"===a.userType&&!o;if(Object(f.useEffect)((function(){c&&i()}),[c,i]),!o)return null;var s={contentType:n,contentToken:r,suger:{},author:a,plugin:o,visible:!0};return Object(b.b)("div",{className:"OrgEquityPlugin",children:Object(b.b)(za,{data:s})})}Fa.propTypes={contentType:O.a.oneOf(["answer","article"]).isRequired,contentToken:O.a.oneOfType([O.a.number,O.a.string]).isRequired,author:O.a.object.isRequired};var Ua=Object(p.compose)(Object(Pa.a)(null),Object(y.connect)((function(e,t){var n=t.contentType,r=t.contentToken;return{plugin:Object(_a.c)(e,{contentType:n,contentToken:r})}}),{loadBrandContentPlugin:_a.b}))(Fa),Va=n(1316),Ha=n(1149),qa=n(1340),Ga=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"发现更大的世界",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],Ka={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},Wa=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,a=e.id,o=e.type,i=Object(it.b)(),c=i.origin.toLowerCase(),s=i.Android?Ka.chrome.imageSrc:Ka.safari.imageSrc,l=z.a.get("question:firstCheckedTrue");Object(f.useEffect)((function(){l&&t&&!i.Wechat&&(location.href="zhihu://".concat(o,"/").concat(a))}),[l,t,o,a,i.Wechat]);var u="";return u=i.UC?"uc":i.Wechat?"wx":i.MQQBrowser?"qq":/huawei|honor/g.test(c)?"huawei":/chrome/g.test(c)||/crios/g.test(c)?"chrome":i.Safari?"safari":"default",Ga[1].title=Ka[u].title,Ga[1].imageSrc="default"===u?s:Ka[u].imageSrc,Object(b.c)(qa.a,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&Object(b.b)(Ha.a,{className:"ModalWrap-body"}),Object(b.c)("div",{className:"ModalWrap-content",children:[Object(b.b)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),Ga.map((function(e,t){return Object(b.c)("div",{className:"ModalWrap-item",children:[e.imageSrc&&Object(b.b)("div",{className:"ModalWrap-itemImg",children:Object(b.b)("img",{src:e.imageSrc,alt:""})}),Object(b.c)("div",{className:"ModalWrap-itemContent",children:[Object(b.b)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&Object(b.b)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),Object(b.b)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return function(e){0===e?(z.a.set("question:firstCheckedTrue","true"),r()):n()}(t)},children:e.button})]},t)}))]})]})},Qa=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,a=Object(B.i)().trackEvent;return Object(b.b)(qa.a,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&Object(b.c)(B.e,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[Object(b.b)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),Object(b.c)("div",{className:"button_container",children:[Object(b.b)(N.c,{preset:"plain",onClick:function(){a({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),Object(b.b)(N.c,{preset:"primary",onClick:function(){a({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),r()},children:"打开App"})]})]})})},Ya=n(479),Za=n(1019),Ja=function(e){var t=e.show,n=e.children,r=e.className,a=Object(f.useRef)();return Object(f.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(Ya.a)(a.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(b.b)("div",{className:r,children:Object(b.c)("div",{ref:a,children:[Object(b.b)("div",{className:j()({"ModalLoading-background":t})}),Object(b.c)("div",{className:j()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,Object(b.b)(Za.a,{})]})]})})},Xa=n(1492),$a=n(1239);function eo(e){var t=e.questionId,n=e.title,r=e.href,a=e.zaTitleId,o=e.showStickyMark,i=e.showHeightLight,c=e.onClick;return Object(b.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(b.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),Object(b.b)("meta",{itemProp:"name",content:n}),o&&Object(b.b)($a.a,{}),Object(b.b)(C.Link,Object.assign(Object.assign({to:r,target:"_blank","data-za-detail-view-element_name":"Title"},a&&{"data-za-detail-view-id":a}),{},{onClick:c,children:i?Object(b.b)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}eo.propTypes={questionId:O.a.number.isRequired,title:O.a.string.isRequired,href:O.a.string.isRequired,zaTitleId:O.a.number,showStickyMark:O.a.bool,onClick:O.a.func};var to=n(33),no=n(1014),ro=n(1745);function ao(e){var t=e.markInfo,n=ne.H[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return r?Object(b.b)("a",{href:r,children:n}):Object(b.b)("span",{children:n})}var oo=["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"];function io(e){var t=e.markInfos,n=Object(f.useMemo)((function(){return t.filter((function(e){return ne.H[e.markType]})).map((function(e,t){return Object(b.c)(f.Fragment,{children:[0!==t&&"、",Object(b.b)(ao,{markInfo:e})]},t)}))}),[t]);return n.length?Object(b.c)(no.CJKSpace,{children:["收录于",n]}):null}function co(e){var t,n=e.id,r=e.voteupCount,a=e.markInfos,o=e.actorToken,i=e.action,c=e.concernedUpvoters,s=Object(to.default)(e,oo);return Object(b.b)(te.a,{trackCardShow:!0,view:{id:8257},children:Object(b.c)(m.Text,Object.assign(Object.assign({color:"GBL05A",fontSize:14,mt:"16px"},s),{},{children:[a&&Object(b.c)(b.a,{children:[Object(b.b)(io,{markInfos:a}),Boolean(r)&&" · "]}),Object(b.b)("span",{onClick:function(){return E.a.trackEvent(null,{id:8258,action:"Click"})},children:Object(b.b)(ro.a,{id:n,type:"answer",voteupCount:r,upvotedFollowees:null!==(t=null==c?void 0:c.filter((function(e){return o!==e.urlToken})))&&void 0!==t?t:[],too:"voted"===i})})]}))})}var so=n(1751),lo=n(1447);var uo=function(e){var t=e.shouldExpand,n=e.showPlayer,r=e.campaign,a=e.answer,o=e.videoAnswerData,i=e.meta,c=e.videoRef,s=e.alwaysShowVolumeButton,l=!e.hideCoCreationFeature&&Object(ke.isCoCreateRelation)(null==o?void 0:o.creationRelationship);return Object(b.c)(b.a,{children:[n&&Object(b.b)(so.a,Object.assign({itemId:a.id,itemType:a.type,videoRef:c,alwaysShowVolumeButton:s,shouldExpandState:t},o)),i,t&&Object(b.c)(m.Flex,{mt:"14px",children:[l&&Object(b.b)(ke.CoCreationLabel,{mr:"12px"}),Object(b.b)(lo.a,{my:"0px"})]}),t&&r&&Object(b.b)(ga.a,{item:Object.assign(Object.assign({},a),{},{campaign:r,collapseReason:null,type:"zvideo"})})]})},bo=n(1726),fo=n(1756),ho=n(1449),po=n(1506),mo=n(1309),vo=function(){return Object(b.c)("div",{className:"SelfVisibleLable-wrap",children:[Object(b.b)(mo.a,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},Oo=function(e){var t=e.answer,n=e.canCollapse,r=e.showReviewingLabel,a=t.collapsedBy,o=t.reviewInfo,i=(o=void 0===o?{}:o).isReviewing,c=o.tips,s=t.isVisible,l=t.relationship,u=(l=void 0===l?{}:l).isAuthor,d=t.visibleOnlyToAuthor;return u&&d?Object(b.b)(vo,{}):i&&s?Object(b.b)("div",{className:"AnswerItem-status",children:c},"negativeLabels"):r&&!1===s&&u?Object(b.b)("div",{children:Object(b.b)(po.a,{})},"negativeLabelsReviewing"):"org"!==a||n?null:Object(b.c)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",Object(b.b)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},go=function(e){var t=e.isNormal,n=void 0===t||t,r=e.collapsedBy,a=e.suggestEdit,o=e.collapseReason,i=e.isCollapsed,c=e.question,s=(c=void 0===c?{}:c).brand,l=(s=void 0===s?{}:s).isPuQuestion;return!n&&null!=a&&a.unnormalDetails?{abnormalDetailProps:{abnormalDetail:a.unnormalDetails}}:("community"===r||l)&&i?{collapseReasonProps:{collapseReason:o}}:null},jo=function(e){var t=e.answer,n=e.canCollapse,r=e.hideCommercialInviteLabel,a=t.collapsedBy,o=t.relevantInfo,i=(o=void 0===o?{}:o).relevantType,c=o.brandSpecialExtra;if(Object(oe.m)(t)||Object(oe.n)(t)||"org"===a&&!n){if("brand_special"===i&&!r)return{type:"answer",data:c};if("brand_best"===i)return{data:{name:"品牌精选",subText:"本回答由品牌设为精选"}}}return null},yo=function(e){var t=e.annotationDetail,n=e.reviewInfo,r=(n=void 0===n?{}:n).isReviewing,a=e.isNormal,o=void 0===a||a,i=e.collapsedBy;return!r&&o&&"community"!==i&&t?{annotationDetail:t}:null},wo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,r=t.unescapable,a=e.labelInfo,o=e.hermesLabel;return Object(b.b)(f.Fragment,{children:!n&&!r&&Object(b.b)(Oa.a,{labelInfo:a||o})})};n(1671);function Co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var xo=function(e){return"plain"===e||"special-plain"===e},So=xo,ko=function(e){return"special-plain"===e},Ao={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ro=function(e){var t;if(e.videoAnswerData)return e;if(null!==(t=e.attachment)&&void 0!==t&&t.video){var n=e.attachment.video,r=n.title,a=n.subVideoId,o=n.parentVideoId,i=n.zvideoId,c={videoId:a,zvideoId:i,title:r,playCount:n.playCount,voteupCount:n.voteupCount,isComplete:!i||o===a,startTime:n.startTime,creationReferences:n.creationReferences};return Object.assign(Object.assign({},e),{},{videoAnswerData:c})}return e};function To(e){var t=Object(ho.a)(e);return t?e.videoAnswerData&&"object"==typeof e.videoAnswerData?Object.assign(Object.assign({},e),{},{creationRelationship:t,videoAnswerData:Object.assign(Object.assign({},e.videoAnswerData),{},{creationRelationship:t})}):Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var Io=["zhi-hu-ri-bao-51-41"],Eo=Object(w.createSelector)((function(e,t){return Object.assign(Object.assign({},t.answerFromProps?t.answer:e.entities.answers[t.answer.id]||t.answer),{},{videoAnswerData:t.answer.videoAnswerData})}),(function(e,t){return e.entities.questions[t.answer.question.id]}),(function(e,t){return t?Object.assign(Object.assign({},e),{},{question:Object.assign(Object.assign({},e.question),t)}):e})),Bo=function(e){Object(s.a)(n,e);var t=Co(n);function n(){var e,r,i,s,l,u;Object(o.a)(this,n);for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return(e=t.call.apply(t,[this].concat(h))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,skipModalShow:!1,autoExpand:!1,shownLoadingBar:!1,wxIsReady:!1},e.answerFormRef=Object(f.createRef)(),e.rewardContainerRef=Object(f.createRef)(),e.richContentRef=Object(f.createRef)(),e.zaRef=Object(f.createRef)(),e.loadEntityWords=S()((function(){var t=e.props,n=t.answer,r=(n=void 0===n?{}:n).id;(0,t.loadAnswerEntityWords)(r)})),e.handleLoadedNext=function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})},e.showOiaModal=function(){var t=e.props,n=t.blockReading,r=t.itemProp,a=t.isBaidu,o=t.shouldAllAutoExpand;("mainEntityOfPage"===r||"acceptedAnswer"===r)&&(document.referrer.includes("zhihu.com")&&o||!a&&!document.referrer.includes("sm.cn")&&n)&&e.setState({showWechatExpand:!0,autoExpand:!0})},e.onCloseReward=function(){var t=e.props.answer.id;z.a.set("isRewardable",!1),e.props.updateAnswerReward(t,"")},e.openModal=function(t,n){e.setState(Object.assign({},n))},e.openDeleteModal=function(){setTimeout((function(){e.setState({deleteModalShown:!0})}))},e.closeModal=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.closeDeleteModal=function(){e.setState({deleteModalShown:!1})},e.disableAuth=(r=e.props,i=r.router,s=(i=void 0===i?{}:i).location,l=(s=void 0===s?{}:s).pathname,u=r.isBaidu,r.isMobile&&!e.context.currentUser&&!u&&!l.startsWith("/topic")),e.loadAnswerConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,r=t.answer,a=t.loadAnswerConcernedVoters;!n&&e.context.currentUser&&a(r.id)},e.handleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.trackUserAction,a=void 0===r||r,o=e.props,i=o.onToggleExpand,c=o.trackPromotionClick;i&&i(t),t&&e.loadAnswerConcernedVoters(),a&&(e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:"Card",text:t?null:"收起"}}),t&&c&&c()),e.setState({contentExpanded:t})},e.handleReshipmentSettings=function(t){var n=e.props,r=n.answer.id,a=n.updateAnswerReshipmentSettings,o=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(o(["caEnabled"])).then((function(){e.props.currentUser.caEnabled?a(r,t):window.open("/copyright/invite")})):a(r,t)},e.handleLoadAnswerForSettings=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)},e.handleDeleteAnswer=function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCollapseModalShow=function(){e.setState({collapseModalShown:!0})},e.handleCollapseModalHide=function(){e.setState({collapseModalShown:!1})},e.handleUpdateAnswerCollapsed=function(){var t=e.props,n=t.answer,r=n.id,a=n.collapsedBy,o=t.updateAnswerCollapsed,i=t.showNotification;return"community"===a?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):o(r)},e.handleUpdateAnswerStick=function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)},e.handleRestoreAnswer=function(){var t=e.props,n=t.answer,r=n.id,a=n.question;(0,t.restoreAnswer)(a.id,r)},e.handleStartEditAnswer=function(){var t=e.props,n=t.draftStatus,r=t.hasPublishingDraft,a=t.isMobile,o=t.useNewPageFullScreenEditor,i=t.answer,c=i.id,s=i.question.id;if(n&&n.loading)D.a.alert("草稿正在加载中……");else if(r)D.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。");else if(a)e.context.startAddAnswer(e.props.answer.id);else if(o){var l=window.location,u=l.search,d=l.host;window.open("//".concat(d,"/question/").concat(s,"/answer/").concat(c,"/edit").concat(u),"_blank")}else e.setState({editing:!0},(function(){var t,n;null===(t=e.answerFormRef.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)}))},e.handleCancelEditAnswer=function(){e.setState({editing:!1});var t=e.props,n=t.onCloseEditing,r=t.onCloseComment;"function"==typeof r&&r(),"function"==typeof n&&n()},e.handleSubmitAnswer=function(t){var n=e.props,r=n.answer.id,a=n.updateAnswer;return e.handleCancelEditAnswer(),a(r,t).then((function(t){return E.a.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t}))},e.handleReportOpen=function(){var t=e.props.zaInfos.report;E.a.trackEvent(e.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.context.authRequired((function(){return e.setState({reportModalShown:!0})}),ne.X.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(t){var n=e.props,r=n.shouldOia,a=n.zaInfos.favlists;E.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),r?e.createOpenInAppHandler("collect_answer")(t):e.disableAuth?e.handleToggleGuide():e.context.authRequired((function(){return e.setState({favlistsShown:!0})}),ne.X.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;E.a.trackEvent(e.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.handleShowAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!0})},e.handleCloseAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!1})},e.handleShowCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!0})},e.handleCloseCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.startEditing=function(){var t=e.props,n=t.isAuthor,r=t.editable;e.context.currentUser&&n&&r&&e.handleStartEditAnswer()},e.addRewardTagline=function(t){var n=e.props.answer.id;Object(he.a)(t,n)},e.createOpenInAppHandler=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.props,a=r.answer,o=a.type,i=a.id,s=r.blockReading,l=r.isSpecialQuestionOrAnswer;return function(r,a){if(r&&r.preventDefault(),s&&E.a.trackEvent(Object(c.a)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),l)location.href="zhihu://".concat(o,"/").concat(i,"?utm_app_name=zhihu_check");else{var u=mr.a[a]||mr.a[t],d=Object.assign(Object.assign({},s&&{yyb_ckey:"CK1430255776739"}),{},{preventToOIA:n});mr.b[u]&&(d.launch_button=mr.b[u]),Object($.e)(Object(je.a)({type:o,id:i}),d)}}},e.renderLabels=function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer)return{labels:[],editingLabels:[]};var r=e.props,a=r.useNewLabels,o=r.canCollapse,i=r.relatedTo,c=r.showReviewingLabel,s=r.hideCommercialInviteLabel,l=e.state,u=l.contentExpanded,d=l.editing,f=Oo({answer:t,canCollapse:o,showReviewingLabel:c}),h=go(t),p=jo({answer:t,canCollapse:o,hideCommercialInviteLabel:s}),m=yo(t);if(!a){var v=Object(b.b)(ga.a,Object.assign(Object.assign({useOldLabels:!0,item:{isLabeled:!0}},h),{},{commercialProps:p,annotationProps:m,showLegacyPositiveLabel:Object(oe.n)(t),editing:d}));return{labels:[f,v],editingLabels:[v]}}if(f||h)return{labels:[f,Object(b.b)(ga.a,Object.assign({item:{isLabeled:!0}},h),"labels")],editingLabels:[]};var O=[Object(b.b)(ga.a,{item:t,commercialProps:p,annotationProps:m,editing:d},"labels")];return{labels:u||i?O:[],editingLabels:O}},e.renderPrefix=function(){var t=e.props,n=t.answer,r=t.relatedTo,a={contentExpanded:e.state.contentExpanded,unescapable:Boolean(r)};return e.isVideoAnswer&&!e.contentDisplayed&&e.coCreate?Object(b.b)(ke.CoCreationLabel,{mb:"4px"}):wo(n,a)},e.renderVoteButton=function(){var t=e.props,n=t.answer,r=t.shouldOia,a=t.zaInfos,o=a.voteUp,i=a.voteDown,c=t.isMuteSpecial,s=t.isMuteFreeze,l=t.isAuthor,u=e.context.currentUser,d=e.state.positionStatus,f=n.question,h=f.questionType,p=f.isMuted,m=n.relationship,v=(m=void 0===m?{}:m).isRecognized,O=m.voting,g=n.attachment,j=n.voteupCount,y="commercial"===h&&p||c||s;return e.isLegacyVideoAnswer?Object(b.b)(Wr,{answer:n,id:g.attachmentId,voteupCount:j,voting:O,isOwner:l,disabled:y,currentUser:u}):Object(b.b)(Hr.a,Object.assign(Object.assign({answer:n,disabled:y},r&&{onClick:e.createOpenInAppHandler("vote_answer")}),{},{disableAuth:e.disableAuth,isRecognized:v,handleToggleGuide:e.handleToggleGuide,positionStatus:d,zaIds:{voteUp:o,voteDown:i}}),"vote")},e.renderAuthorInfo=function(){var t=e.props,n=t.preset,r=t.relatedTo,a=t.answer,o=a.id,i=a.author,c=a.creationRelationship;if(e.coCreate){var s=!ko(n);return Object(ke.renderDualAuthor)(n,i,c,s)}return!ko(n)&&Object(b.b)(Vr.a,{className:j()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":r}),preset:So(n)?"plain":"default",author:i,relatedTo:r,id:o,userLinkV2:!0},"authorInfo")},e.renderMetaAndBeforeContent=function(){var t,n,r=e.props,o=r.preset,i=r.answer.creationRelationship,c=e.renderAuthorInfo(),s=e.renderAnswerExtraInfo(),l=e.renderLabels().labels,u=null==i||null===(t=i.coCreation)||void 0===t?void 0:t.refBy,d=null==i||null===(n=i.reference)||void 0===n?void 0:n.refBy,f=e.contentDisplayed&&(u||d)&&Object(b.b)(m.Box,{my:"16px",children:Object(b.b)(ke.CoCreationLinkCard,{type:"answer",coCreationRefBy:u,referenceRefBy:d})});return xo(o)?[[c].concat(Object(a.a)(l),[f]),s]:[[c].concat(Object(a.a)(l),[f,s]),null]},e}return Object(i.a)(n,[{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return 2===(null==e?void 0:e.type)||"zvideo"===(null==e?void 0:e.type)||"video"===(null==e?void 0:e.type)}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return"zvideo"===(null==e?void 0:e.type)}},{key:"isAuthorInGeneral",get:function(){var e=this.props,t=e.isAuthor,n=e.isSubAuthor,r=e.hideCoCreationFeature;return t||n&&!r}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,a=t.editing,o=t.loadVideoDetails,i=t.isSearchSpecialSource,c=t.isMobile,s=t.isWechat,l=this.state.shareVideoQuery;if(l&&o(l).then((function(){e.setState({shouldShowVideoDetails:!0})})),n&&(this.loadAnswerConcernedVoters(),this.loadEntityWords()),r&&setTimeout((function(){return e.setState({commentsShown:Boolean(r)})})),a&&this.startEditing(),c&&!i&&this.showOiaModal(),c&&s)if(document.addEventListener("WeixinJSBridgeReady",(function(){e.handleLoadedNext()})),"complete"===document.readyState)this.handleLoadedNext();else{window.addEventListener("load",(function t(){window.removeEventListener("load",t),e.handleLoadedNext()}))}}},{key:"componentDidUpdate",value:function(e,t){!t.contentExpanded&&this.state.contentExpanded&&this.loadEntityWords(),!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,a=n.commentPermission,o=e.answer,i=o.reshipmentSettings,c=o.commentPermission;!r&&i&&!a&&c&&setTimeout((function(){return t.settingsTogglerEl.click()}))}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this,n=this.context.currentUser;return Object.keys(Ao).map((function(r){return"need_payment"===r&&null!=n&&n.isOrg?null:Object(b.b)(we.a,{onClick:function(){return t.handleReshipmentSettings(r)},checked:r===e,children:Ao[r]},r)}))}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.actor,r=e.action,a=e.concernedUpvoters,o=e.isHuman,i=e.useNewLabels,c=e.isMobile,s=t.id,l=t.voteupCount,u=t.markInfos,d=t.isNormal;if(!((!o||!c)&&(void 0===d||d)))return null;var f=(null==u?void 0:u.length)>0&&!i;return f||l?Object(b.b)(co,{id:s,voteupCount:l,markInfos:f&&u,actorToken:null==n?void 0:n.urlToken,action:r,concernedUpvoters:a},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,a=r.id,o=r.collapsedBy,i=r.reshipmentSettings,c=r.commentPermission,s=r.question.questionType,l=r.rewardInfo,u=(l=void 0===l?{}:l).isRewardable,d=void 0!==u&&u,f=r.relevantInfo,h=r.creationRelationship,p=n.answer,m=n.canCollapse,v=n.isMobile;if(!t||!this.isAuthorInGeneral)return null;var O=Object(b.c)(b.a,{children:[this.renderReshipmentSettings(i),Object(b.b)(L.a,{}),Object(b.b)(ye.c,{target:p,onChange:this.props.updateAnswerCommentPermission,current:c}),Object(b.b)(L.a,{}),d&&Object(b.b)(L.b,{onClick:this.onCloseReward,children:"关闭赞赏"}),Object(b.b)(L.b,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===s&&m&&"nobody"===o&&(!f||"brand_special"!==f.relevantType)&&[Object(b.b)(L.a,{},"MenuDivider"),Object(b.b)(L.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")]]});if(i&&c){var g,j,y=null==h||null===(g=h.coCreation)||void 0===g||null===(j=g.bizInfo)||void 0===j?void 0:j.canCancelPermission;return Object(b.b)(L.c,{toggler:Object(b.b)(N.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:k.a,label:!v&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:y?Object(b.b)(L.b,{children:Object(b.b)(ke.CancelCoCreation,{contentType:"answer",contentId:a})}):O},"settings")}return Object(b.b)(N.c,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:k.a,label:!v&&"设置"},"settings")}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(b.b)(L.b,{onClick:function(){E.a.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?Object(b.b)(L.b,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser||this.isAuthorInGeneral)return null;var t=this.props,n=t.answer,r=t.canCollapse,a=t.renderExtraOptions,o=t.permission.canBrandAdminEdit,i=t.isMobile,c=t.isAuthor,s=n.id,l=n.reshipmentSettings,u=n.collapsedBy,f=n.question,h=f.questionType,p=f.brand,m=(p=void 0===p?{}:p).isPuQuestion,v=n.annotationAction,O=void 0===v?[]:v,g=n.annotationDetail,j={toggler:Object(b.b)(N.c,{preset:"plain",className:"OptionsButton",icon:A.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},y="commercial"===h,w="nobody"!==u;return c?null:Object(d.e)(L.c,Object.assign(Object.assign({},j),{},{key:"options"}),i&&Object(b.b)(Xa.a,{answer:n}),r&&!y&&Object(b.b)(L.b,{onClick:w?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:w?"取消隐藏":"隐藏"}),o&&y&&!w&&!m&&Object(b.b)(L.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),O&&O.some((function(e){return ne.d.add===e}))&&!g&&Object(b.b)(L.b,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),O&&O.some((function(e){return ne.d.cancel===e}))&&g&&Object(b.b)(L.b,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),Object(b.b)(L.b,{onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(s,l),a&&a({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,a=e.id,o=e.createdTime,i=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(r,"/answer/").concat(a),dateCreated:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:c}}(this.props.answer);return Object.keys(e).map((function(t){return Object(b.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,r=(n=void 0===n?{}:n).winnersAnswerTokens,a=n.prizes;if(!n.status)return null;var o=["一","二","三"],i=null;return a&&r&&r.forEach((function(e,n){e.includes(t)&&null===i&&(i=a&&a[1]&&a[1].name?"得".concat(o[n],"等奖"):"奖")})),i&&Object(b.c)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",i]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,a=t.isBrandAnswer,o=n.question;return(r||e)&&(o&&"commercial"===o.questionType||a)?Object(b.b)(Nr.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,r=this.props,a=r.shouldOia,o=r.answer,i=o.id,c=o.createdTime,s=o.updatedTime,l=o.question.id,u=o.playCount,d=o.attachment,f=u||(null==d||null===(e=d.zvideo)||void 0===e?void 0:e.playCount)||(null==d||null===(t=d.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0,h="".concat(ne.F,"/question/").concat(l,"/answer/").concat(i);return Object(b.b)(Qr.a,Object.assign(Object.assign({created:c,updated:s,href:h},this.isVideoAnswer&&f>0&&{videoPlayCount:Number(f)}),a&&{onClick:this.createOpenInAppHandler("click_answer")}))}},{key:"contentDisplayed",get:function(){var e=this.props.relatedTo,t=this.state.contentExpanded;return Boolean(e||t)}},{key:"coCreate",get:function(){var e=this.props,t=e.answer.creationRelationship,n=e.hideCoCreationFeature;return Boolean(!n&&Object(ke.isCoCreateRelation)(t))}},{key:"render",value:function(){var e,t,n,a=this,o=this.props,i=o.answer,c=o.reward,s=o.answer,l=s.id,u=s.isNormal,d=void 0===u||u,f=s.isDelete,h=s.question,p=s.rewardInfo,v=s.question,O=v.title,g=v.id,y=v.questionType,w=v.commercial,C=v.brand,x=(C=void 0===C?{}:C).isPuQuestion,S=s.author,k=s.excerpt,A=s.content,E=s.enableConvert,L=s.editableContent,M=s.commentCount,z=s.adminClosedComment,P=s.collapsedBy,_=s.isSticky,F=s.thumbnail,U=s.thumbnailExtraInfo,V=s.reviewInfo,H=(V=void 0===V?{}:V).isReviewing,q=V.editType,G=s.relevantInfo,W=(G=void 0===G?{}:G).relevantType,Q=s.annotationDetail,Y=s.paidInfo,Z=void 0===Y?{}:Y,J=s.creatorRightsNotification,$=s.attachment,ee=s.vessayInfo,te=s.videoAnswerData,re=o.relatedTo,ae=o.editable,oe=o.byComment,ie=o.draft,ce=o.expanded,se=o.lastreadTouchable,le=o.canCollapse,ue=o.canStick,de=o.itemProp,be=void 0===de?"answer":de,fe=o.addAnnotation,he=o.cancelAnnotation,pe=o.showNotification,me=o.dataZaIndex,ve=o.blockReading,Oe=o.isWechat,ye=o.isHuaweiBrowser,we=o.isHonor,ke=o.lessExcerpt,Ae=o.isHuman,Re=o.ua,Te=o.shouldSpecialOia,Ie=o.shareVideoDetail,Ee=o.trackPromotionClick,Be=o.formatContent,Ne=o.zaInfos,Le=Ne.expand,De=Ne.title,Me=Ne.thank,ze=Ne.toggleComment,Pe=Ne.share,_e=Ne.getCommentAction,Fe=o.handleToggleSticky,Ue=o.renderActionButtons,Ve=o.permission.canBrandAdminEdit,He=o.readContentRightsNotification,qe=o.ecommerce,Ge=o.isMobile,Ke=o.canAbstract,We=o.isBaidu,Qe=o.isMuteSpecial,Ye=o.isMuteFreeze,Ze=o.isAuthor,Je=o.shouldUseArticleCard,Xe=o.isTopic,$e=o.xiaomi,et=o.showCommentForOia,tt=o.pathname,nt=o.richContentKey,rt=o.useVessayV2,at=o.shouldAlwaysShowPlayer,ot=o.isShenma,it=o.isRecommend,ct=o.videoRef,st=o.alwaysShowVolumeButton,lt=o.showHeightLight,ut=void 0!==lt&&lt,dt=o.truncateDisabled,bt=void 0!==dt&&dt,ft=o.forceCommentOia,ht=void 0!==ft&&ft,pt=o.hideCoCreationFeature,mt=o.entityWords,vt="function"==typeof Fe,Ot=this.context.currentUser,gt="".concat(ne.F,"/question/").concat(g,"/answer/").concat(l),jt=this.state,yt=jt.reportModalShown,wt=jt.deleteModalShown,Ct=jt.collapseModalShown,xt=jt.favlistsShown,St=jt.editing,kt=jt.commentsShown,At=jt.commentsAutoFocus,Rt=jt.commentPattern,Tt=jt.addAnnotationModalShown,It=jt.cancelAnnotationModalShown,Et=jt.positionStatus,Bt=jt.shareVideoQuery,Nt=jt.shouldShowVideoDetails,Lt=jt.contentExpanded,Dt=jt.showWechatExpand,Mt=jt.skipModalShow,zt=jt.autoExpand,Pt=jt.shownLoadingBar,_t=jt.wxIsReady,Ft=null==$||null===(e=$.video)||void 0===e?void 0:e.campaign,Ut=Bt&&Nt?{title:Ie.title,thumbnail:Ie.coverUrl,isLens:!0,id:Bt,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(Bt)}:null;if(f)return Object(b.c)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先  ",Object(b.b)("a",{role:"button",tabIndex:0,onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var Vt,Ht=!(H&&"create"===q),qt="commercial"===y,Gt="nobody"!==P,Kt=F||(null==$||null===(t=$.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.thumbnail);if(St)return Object(b.c)("div",{children:[Object(b.c)(m.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}}},children:[Object(b.b)("div",{css:function(e){return{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)}},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),Object(b.b)(Fr.a,{handleClick:null===(Vt=this.answerFormRef.current)||void 0===Vt?void 0:Vt.toggleFullscreen})]}),Object(b.b)(Ur.a,{css:{margin:"0 -20px -20px"},className:"AnswerItem-form",isReediting:!0,imperativeRef:this.answerFormRef,question:h,answer:i,defaultValue:L,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:p.isRewardable,addRewardTagline:this.addRewardTagline})]});var Wt=this.renderMetaAndBeforeContent(),Qt=Object(r.a)(Wt,2),Yt=Qt[0],Zt=Qt[1],Jt="mainEntityOfPage"===be||"acceptedAnswer"===be,Xt=Te&&!Jt,$t=!Ut&&this.renderEditTime(),en=Z.type,tn=Z.content,nn=this.isPaidAnswer,rn=nn?tn:A,an=!re&&Object(b.b)(eo,{questionId:g,title:O,href:gt,zaTitleId:De,showStickyMark:vt&&this.props.isSticky,showHeightLight:ut,onClick:Ee}),on=d||Ze,cn=$e&&tt.match(/\/question\/\d+$/g),sn=Be?Be(rn||k,i):rn||k||"",ln=Boolean(E||(null==ee?void 0:ee.enableVideoTranslate)),un=te&&(at||this.contentDisplayed),dn=it&&this.isVideoAnswer;return Object(b.c)(Dr.e,{onRef:function(e){return a.contentItem=e},className:"AnswerItem","data-za-index":me,"data-zop":JSON.stringify({authorName:S.name,itemId:l,title:O,type:"answer"}),data:i,link:gt,meta:dn?null:Yt,title:an,lastreadTouchable:se,name:l,itemProp:be,itemType:"http://schema.org/Answer",itemScope:!0,children:[Object(b.b)(B.d,{ref:this.zaRef}),d&&(!Xe||Lt)&&Object(b.b)(bo.b,{answer:i}),this.renderMeta(),qt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),on?Object(b.c)(b.a,{children:[this.isVideoAnswer&&Object(b.b)(uo,Object.assign(Object.assign({shouldExpand:this.contentDisplayed,showPlayer:un,campaign:Ft,answer:i,videoAnswerData:te,videoRef:ct,alwaysShowVolumeButton:st},dn?{meta:Yt}:{}),{},{hideCoCreationFeature:pt})),Object(b.c)(Qr.b,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({entityWords:mt,richContentKey:nt,className:j()({"RichContent-mobileBaidu":We,"RichContent-hasCatalog":Object(Se.a)(i,"answer"),"AnswerItem-highlight":ut}),truncateDisabled:bt,imperativeRef:this.richContentRef,canAbstract:Ke,onToggleExpend:this.handleExpand},Xt&&{expandText:"App 内查看"}),ve&&Jt&&{expandText:"展开阅读全文"}),Ge&&Ae&&!Jt&&{collapsedHeight:180}),{},{cover:at?null:Kt,hasVideo:!at&&Boolean(U&&"video"===U.type)||this.isVideoAnswer,videoData:Ut,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(re),expanded:ce,onPositionStatusChange:this.handlePositionStatusChange,before:Zt,excerpt:Be?Be(k,i):k,html:sn,prefix:this.renderPrefix(),isNovel:"interactive_novel"===en,ecommerce:qe,after:Object(b.c)("div",{children:[Object(b.b)(bo.a,{answer:i}),Object(b.b)(va,{className:"AnswerItem-CommercialQuestionTail",commercial:w}),!Ge&&Lt&&Object(b.b)(Ua,{contentType:"answer",contentToken:l,author:S}),$t,Ot&&Ze&&ae&&Object(b.b)(Ce.a,{children:Object(b.c)("a",{className:"AnswerItem-editButton",role:"button",tabIndex:0,onClick:this.handleStartEditAnswer,children:[Object(b.b)(R.a,{text:!0,center:!0})," ",Object(b.c)("span",{className:"AnswerItem-editButtonText",children:["修改",ie&&ie.editableContent&&"（有未发布的编辑草稿）"]})]})}),!Ge&&Ot&&Object(b.b)(ba,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:Ot,rewardInfo:p,isAuthor:Ze,id:l,author:S,ua:Re,balanceEnable:!1})]}),data:i,onClick:ve&&Jt?function(){(cn||Oe||ot)&&Ge?(a.setState({autoExpand:!1}),a.richContentRef.current.handleExpand()):Ge?a.setState({skipModalShow:!0,autoExpand:!1}):a.setState({showWechatExpand:!0,autoExpand:!1})}:Xt?a.createOpenInAppHandler("expand_answer"):a.disableAuth&&ve&&a.handleToggleGuide},ke?{limit:74}:{}),this.coCreate?{limitWithImage:74}:{}),{},{zaIds:{expand:Le},shouldUseArticleCard:Je,children:[Ht&&Ve&&qt&&Gt&&!x&&Object(b.b)(N.c,{className:j()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===P}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),Ht&&ue&&!Gt&&"brand_special"!==W&&Object(b.b)(N.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:_?"取消精选":"设为精选"}),!this.props.isBaidu&&Ue({componentList:[{name:"vote",component:Ht&&this.renderVoteButton()},{name:"comment",component:Ht&&Object(b.b)(zr.a,Object.assign(Object.assign({onInstance:function(e){return a.commentButton=e},onClick:this.openModal},(Ge&&Ae&&Te||ht)&&{onClick:this.createOpenInAppHandler("comment_answer")}),{},{commentsShown:kt,commentClosed:z,count:M,positionStatus:Et,zaInfos:{toggleComment:ze,getCommentAction:_e}}),"comment")},{name:"share",component:Ht&&!Ge&&Object(b.b)(Mr.a,{disabled:Qe||Ye,id:l,type:"answer",title:O,authorName:S&&S.name,href:gt,positionStatus:Et,zaShareId:Pe},"share")},{name:"favlist",component:Ht&&!Ge&&(!Ot||!Ot.isOrg)&&Object(b.b)(Br.a,{onRef:function(e){return a.favButtonRef=e},onClick:this.handleFavlistsShown,label:Ge?"":"收藏",disabled:Qe||Ye},"favlist")},!Ge&&{name:"thank",component:Ht&&!Ze&&Object(b.b)(Xa.a,Object.assign({zaInfo:Me,answer:i,disabled:Qe||Ye},this.isLegacyVideoAnswer&&{zVideoId:$.attachmentId}),"thank")},{name:"sticky",component:!Ge&&vt&&Ze&&Object(ge.a)(Ot)&&Object(b.b)(N.c,{preset:"plain",onClick:Fe,icon:this.props.isSticky?T.a:I.a,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"vessay",component:!Ge&&Ze&&ln&&Object(b.b)(fo.a,{type:"answer",id:l,useVessayV2:rt,isAuthor:Ze},"vessay")},{name:"options",component:Ge&&Ae||Ht&&this.renderOptions()},{name:"settings",component:Ge&&Ae||this.renderSettings()},{name:"annotation",component:!Lt&&Object(b.b)(Lr.a,{annotationDetail:Q},"annotation")}]})]}))]}):$t,on&&!nn&&Object(b.b)(Va.a,{content:rn,type:"answer",urlToken:String(l)}),et&&tt.startsWith("/question")&&Object(b.b)("div",{children:Object(b.b)(vr,{parent:i})}),Object(b.b)(Pr.a,{shown:kt,parent:i,byComment:oe,commentPattern:Rt,autoFocus:At,onClose:this.closeModal}),Object(b.b)(_r.a,{type:"answer",urlToken:l,shown:yt,onClose:this.handleReportHide,zaEnabled:!0}),Object(b.b)(K,{addAnnotation:fe,onClose:this.handleCloseAddAnnotationModal,shown:Tt,type:ne.e,urlToken:l,showNotification:pe}),Object(b.b)(X,{cancelAnnotation:he,onClose:this.handleCloseCancelAnnotationModal,shown:It,type:ne.e,urlToken:l,showNotification:pe}),Ot&&Ze&&Object(b.b)(fa.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:wt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),le&&Object(b.b)(fa.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Ct,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(b.b)(gr.a,{id:l,type:"answer",shown:xt,onClose:this.handleFavlistHide,zaEnabled:!0}),Ge&&this.state.guideShown&&Object(b.b)(xe.a,{redirectUrl:gt,buttons:[Oe?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:Object(je.a)({type:"answer",id:l}),onClose:this.handleToggleGuide}),Object(b.b)(Er,{notification:J,onRead:function(e){He("answer",l,e)},onUseAdmire:function(){a.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=a.props.postToolsRecommend;D.a.confirm(Object(b.b)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("answer",String(l))}),(function(){}))}}),Object(b.b)(Wa,{show:Dt&&!cn&&Ge&&!Oe,id:i.id,type:i.type,onCancel:function(){a.setState({showWechatExpand:!1},(function(){zt||a.richContentRef.current.handleExpand()}))},onSubmit:function(){a.setState({showWechatExpand:!1}),Oe?_t?a.createOpenInAppHandler(zt?"expand_answer2":"expand_answer1")():a.setState({shownLoadingBar:!0}):a.createOpenInAppHandler(zt?"expand_answer2":"expand_answer1")()}}),Object(b.b)(Qa,{show:Mt,id:i.id,type:i.type,onCancel:function(){a.setState({skipModalShow:!1},(function(){a.richContentRef.current.handleExpand()}))},onSubmit:function(){a.createOpenInAppHandler("expand_answer",ye||we)()}}),Object(b.b)(Ja,{show:Pt&&Ge})]})}}]),n}(f.PureComponent);Bo.contextTypes={currentUser:O.a.object,authRequired:O.a.func,startAddAnswer:O.a.func},Bo.propTypes={relatedTo:O.a.oneOf(["question","answer"]),editable:O.a.bool,preset:O.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:O.a.bool,shareVideoDetail:O.a.object,formatContent:O.a.func,renderExtraOptions:O.a.func,zaInfos:O.a.object,onToggleExpand:O.a.func,useNewLabels:O.a.bool,renderActionButtons:O.a.func,canAbstract:O.a.bool,trackPromotionClick:O.a.func,isSearchSpecialSource:O.a.bool,hideCommercialInviteLabel:O.a.bool,hideCoCreationFeature:O.a.bool},Bo.defaultProps={editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:Xa.b,shouldAlwaysShowPlayer:!1,hideCoCreationFeature:!1};var No,Lo,Do=Object(p.compose)((Lo=function(e){var t=e.answer;return{content:{type:"Answer",token:String(t.id)}}},function(e){return ae()((function(t){return Object(b.b)(B.b,Object.assign(Object.assign({},"function"==typeof Lo?Lo(t):Lo),{},{children:Object(b.b)(e,Object.assign({},t))}))}),e)}),(No=function(e){var t=e.zaInfos,n=void 0===t?{}:t;return Object.assign({zaType:"Card"},void 0!==n.index&&{view:{elementLocation:{card:{index:Number(n.index)}}}})},function(e){return ae()((function(t){return Object(b.b)(B.e,Object.assign(Object.assign({},"function"==typeof No?No(t):No),{},{children:Object(b.b)(e,Object.assign({},t))}))}),e)}),Object(te.b)((function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=void 0===a?{}:a;return Object.assign(Object.assign(Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},o.index&&{index:o.index}),o.cardShow&&{view:{id:o.cardShow}}),{},{trackCardShow:r})})),C.withRouter,Object(y.connect)((function(e,t){var n,r,a=e.entities.drafts,o=void 0===a?{}:a,i=e.question,c=(i=void 0===i?{}:i).draftStatus,s=e.answers,l=(s=void 0===s?{}:s).paidContent,u=void 0===l?{}:l,d=s.entityWords,b=void 0===d?{}:d,f=e.reward,h=e.switches,m=e.video,v=(m=void 0===m?{}:m).shareVideoDetail,O=e.env,g=O.edition,j=O.userAgent,y=t.answer,w=t.relatedTo,C=t.location.pathname,x=C.split("/"),S=!1,k=!0;!x[1]||"org"!==x[1]&&"people"!==x[1]||(S=x[2]&&-1!==Io.indexOf(x[2]),k=!1);var A=Object(p.compose)(To,Ro)(Eo(e,t)),R=Object(ve.b)(e),T=["question","answer"].includes(w),I=Object(pe.isHumanSelector)(e)&&T,E=Object(pe.shouldSpecialOiaSelector)(e),B=j.Mobile,N=j.Qzone,L=B&&E&&!N,D=Object(Ae.c)(A.creationRelationship),M=Object(ve.i)(e,D),z=(null!==(n=null===(r=y.relationship)||void 0===r?void 0:r.isAuthor)&&void 0!==n?n:Object(ve.i)(e,y.author))&&!M;return{entityWords:b[y.id],draft:y&&o["question_".concat(y.question.id)],draftStatus:null==c?void 0:c[y.question.id],answer:A,ua:Object(pe.uaSelector)(e),pathname:C,xiaomi:g.xiaomi,isShenma:g.shenma||/quark/gi.test(e.env.userAgent.origin)||j.UC,reward:f,switches:h,isHuman:I,shouldOia:Object(pe.shouldOiaSelector)(e)&&!S,shouldSpecialOia:Object(pe.shouldSpecialOiaSelector)(e)&&!S,isSpecialQuestionOrAnswer:Object(pe.specialQuestionOrAnswerSelector)(e,{type:T&&w,id:T?"answer"===w?y.id:y.question.id:""}),shouldAllAutoExpand:"1"===Object(pe.abParamSelector)(e,"web_mweb_launch"),useVessayV2:Object(pe.abParamSelector)(e,Or.b)===Or.a,isMobile:Object(pe.isMobileSelector)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),concernedUpvoters:Object(oe.g)(e,{id:y.id}),currentUser:R,shareVideoDetail:v,isBrandAnswer:Object(oe.l)(y),permission:Object(ie.cb)(e),ecommerce:Object(ee.c)(e,{type:"answer",urlToken:String(y.id)}),isBaidu:Object(pe.shouldOiaSelector)(e)&&g.baidu,showCommentForOia:Object(pe.shouldOiaSelector)(e),blockReading:L,paidContent:u,isMuteSpecial:Object(ie.E)(A.question),isMuteFreeze:Object(ie.D)(A.question),isAuthor:z,isSubAuthor:M,shouldUseArticleCard:"1"===Object(pe.abParamSelector)(e,"gue_visit_n_artcard"),abTestShowMobileSignInModal:"1"===Object(pe.abParamSelector)(e,"h5_signin"),isQuestionPage:k,useNewPageFullScreenEditor:"3"===Object(pe.abParamSelector)(e,"pc_fullsize")}}),{updateAnswerReshipmentSettings:oe.H,updateAnswerCommentPermission:oe.G,updateAnswerCollapsed:oe.F,updateAnswerStick:oe.J,deleteAnswer:oe.i,restoreAnswer:oe.B,updateAnswer:oe.E,loadAnswerForSettings:oe.u,showNotification:fe.h,addAnnotation:function(e,t,n,r){return{API:{types:de.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(le.a)(Object(se.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=be(e);return r?Object(ce.a)({},r,Object(ce.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,r){return{API:{types:de.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(le.a)(Object(se.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=be(e);return r?Object(ce.a)({},r,Object(ce.a)({},t,Object.assign(Object.assign({},n),{},{annotationDetail:null}))):null}}}},addRewardTagline:he.a,updateAnswerReward:oe.I,getVoteDownReason:oe.k,selectVoteDownReason:oe.D,loadAnswerConcernedVoters:oe.q,fillCurrentUserIfNeeded:ve.e,loadVideoDetails:me.d,readContentRightsNotification:Oe.uc,postToolsRecommend:Oe.tc,showMobileSignInModal:ie.ib,loadAnswerEntityWords:oe.s}),Oa.c)(Bo)},1010:function(e,t,n){"use strict";var r=n(49),a=n(33),o=n(1),i=n(0),c=n.n(i),s=n(61),l=n(922),u=n(163),d=n(111),b=n.n(d),f=n(414),h=n(98),p=Object.assign;var m=function(e){return c.a.createElement(h.a,p({width:"49",height:"48",viewBox:"0 0 49 48"},e),c.a.createElement("path",{fill:"currentColor",d:"M24 36a4 4 0 110 8 4 4 0 010-8zm3-32c1.105 0 1.91.9 1.801 1.993l-2.593 26.009c-.055.551-.55.998-1.099.998h-2.218a1.127 1.127 0 01-1.1-.998L19.2 5.993c-.11-1.1.688-1.993 1.8-1.993H27z"}))},v=n(456),O=["text","icon","onClose","delay"],g={success:Object(o.b)(f.a,{size:24}),fail:Object(o.b)(m,{size:24})},j=function(e){var t=e.text,n=e.icon,c=e.onClose,u=e.delay,d=Object(a.default)(e,O),b=Object(i.useState)(!0),f=Object(r.a)(b,2),h=f[0],p=f[1],m=Object(l.e)(h,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}});return n="string"==typeof n?g[n]:n,Object(i.useEffect)((function(){setTimeout((function(){p(!1),c&&c()}),u||1500)}),[u,c]),m.map((function(e){var r=e.item,a=e.props,i=e.key;return r?Object(o.b)(l.a.div,{style:a,children:Object(o.c)(s.Flex,Object.assign(Object.assign({},d),{},{p:"18px",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"GBK04A",css:function(e){return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"14px",maxWidth:200,background:e.colorMod(e.colors.GBK99A).alpha(.85),pointerEvents:"none",textAlign:"center"}},children:[n,Object(o.b)(s.Text,{fontWeight:"bold",css:[{lineHeight:"20px"},n&&{marginTop:"8px"}],children:t})]}))},i):null}))};t.a=function(){var e=Object(v.b)(),t=e.addInstance,n=e.removeInstance;return Object(i.useCallback)((function(e){var r,a=e.icon,i=e.text,c=e.delay;return new Promise((function(e){r=Object(o.b)(u.a,{children:Object(o.b)(j,{icon:a,text:i,onClose:e,delay:c})},b()("toast")),t(r)})).finally((function(){return function(e){return setTimeout((function(){return n(e)}),300)}(r)}))}),[t,n])}},1014:function(e,t,n){e.exports=n(209),e.exports.CJKSpace=n(1192).CJKSpace},1016:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.c})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v}));var r=n(982),a=n(15),o=n(16),i=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(86),b=n(1108),f=n.n(b),h=n(415);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(i.a)(n,e);var t=p(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(l.b)("img",{src:f.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),n}(u.Component);m.showModal=function(e){d.b.open((function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),Object(l.b)(d.b,{title:"举报成功",onClose:t,children:Object(l.c)("div",{style:{textAlign:"center"},children:[Object(l.b)("div",{children:n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),Object(l.b)(m,{})]})})}))};var v=Object(h.b)({view:{id:3038},trackCardShow:!0})(m),O=n(36),g=n(282);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var y=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={reportModalShown:!1},e.handleSubmit=function(){var t=e.props,n=t.id,r=t.onDelete,a=t.onClose;r(n),a()},e.handleReportModalOpen=function(){return e.setState({reportModalShown:!0})},e.handleReportModalClose=function(){e.setState({reportModalShown:!1}),e.handleSubmit()},e.handleSuccess=function(){e.handleSubmit()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,r=e.onClose,a=e.reportAndDeleteExperiment;return Object(l.c)(u.Fragment,{children:[Object(l.b)(d.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:r,footer:a&&Object(l.c)("div",{className:"CommentDeleteAndReport-extra",children:["评论若构成举报条件可以",Object(l.b)(O.c,{preset:"link",onClick:this.handleReportModalOpen,children:"删除并举报"})]}),children:n&&Object(l.c)(d.a,{direction:"horizontal",children:[Object(l.b)(O.c,{onClick:r,children:"取消"}),Object(l.b)(O.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:"确定"})]})}),Object(l.b)(g.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose})]})}}]),n}(u.Component)},1017:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(31),a=n.n(r),o=n(21),i=n.n(o),c=n(23),s=n.n(c),l=n(22),u=n.n(l),d=n(25),b=n.n(d),f=n(14),h=n.n(f),p=n(39),m=n.n(p),v=n(0),O=n(12),g=n.n(O),j=n(7),y=["className"];function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var C=function(e){u()(n,e);var t=w(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=a()(e,y);return Object(j.g)("textarea",m()({},n,{className:g()(t,"TextArea")}))}}]),n}(v.Component)},1019:function(e,t,n){"use strict";var r=n(21),a=n.n(r),o=n(23),i=n.n(o),c=n(22),s=n.n(c),l=n(25),u=n.n(l),d=n(14),b=n.n(d),f=n(0),h=n(7);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var m=function(e){s()(n,e);var t=p(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return Object(h.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(h.g)("g",null,Object(h.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(f.Component);t.a=m},1058:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(12),o=n.n(a);function i(e){var t=e.header,n=e.options,a=e.className,i=e.onRef,c=e.showOptions,s=void 0===c||c;return Object(r.c)("div",{className:o()("Topbar",a,!1),ref:i,children:[Object(r.b)("div",{className:"Topbar-title",children:t}),s&&Object(r.b)("div",{className:"Topbar-options",children:n})]})}},1070:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(158),a=n(87),o=n(65);function i(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),i=Object(r.a)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var c=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+i+1,0);var l=s.getDate();return c>=l?s:(n.setFullYear(s.getFullYear(),s.getMonth(),c),n)}},1072:function(e,t,n){"use strict";var r=n(33),a=n(1),o=n(36),i=n(1089),c=["onClick","text"],s=function(e){var t=e.onClick,n=e.text,s=Object(r.default)(e,c);return Object(a.c)(o.c,Object.assign(Object.assign({preset:"link",onClick:t,css:{fontSize:15}},s),{},{children:[Object(a.b)(i.a,{text:!0,center:!0})," ",n]}))};s.defaultProps={text:"修改"},t.a=s},1074:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(12),d=n.n(u),b=n(158),f=n(87),h=n(65);function p(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(b.a)(t);return n.setSeconds(r),n}var m=n(1414),v=n(1633);function O(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(f.a)(t);return n.getTime()===r.getTime()}var g=n(253);function j(e){Object(h.a)(1,arguments);var t=Object(f.a)(e);return t.setMinutes(0,0,0),t}function y(e){Object(h.a)(1,arguments);var t=Object(f.a)(e),n=t.getFullYear(),r=t.getMonth(),a=new Date(0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}var w=n(1481);var C=n(1645);var x=n(1646),S=n(979),k=n.n(S),A=n(976),R=n.n(A),T=n(495),I=n.n(T),E=n(210),B=n(1082);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var L=k()(0,24).map((function(e){return R()(e,2,"0")})),D=k()(0,60).map((function(e){return R()(e,2,"0")})),M=function(e){Object(o.a)(n,e);var t=N(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:p(e.props.value,0)},e}return Object(a.a)(n,[{key:"handleChange",value:function(e,t){var n=this.props,r=n.onChange,a=n.min,o=n.max,i=e;a&&m.a(e,a)&&(i=a),o&&v.a(e,o)&&(i=o),this.setState({value:i}),r(i,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.large,a=t.min,o=t.max,i=t.onRef,c=t.showIcon,l=void 0!==c&&c,u=this.state.value,p=a&&O(g.a(u),g.a(a)),S=p&&O(j(u),j(a)),k=o&&O(g.a(u),g.a(o)),A=k&&O(j(u),j(o));return Object(s.c)("div",{className:d()("DateTimePicker",n),ref:i,children:[Object(s.b)(B.a,{showIcon:l,large:r,value:u,disabledDate:function(e){return!(!a||!m.a(e,g.a(a)))||!(!o||!v.a(e,g.a(o)))},onChange:function(t){e.handleChange(I()((function(e){return function(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(b.a)(t);return isNaN(n)?new Date(NaN):(n.setFullYear(r),n)}(e,t.getFullYear())}),(function(e){return function(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(b.a)(t),a=n.getFullYear(),o=n.getDate(),i=new Date(0);i.setFullYear(a,r,15),i.setHours(0,0,0,0);var c=y(i);return n.setMonth(r,Math.min(o,c)),n}(e,t.getMonth())}),(function(e){return function(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(b.a)(t);return n.setDate(r),n}(e,t.getDate())}))(u),{date:t})}}),Object(s.b)(E.b,{listClassName:"DateTimePicker-selectList",large:r,value:w.a(u,"HH"),onChange:function(t){return e.handleChange(function(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(b.a)(t);return n.setHours(r),n}(u,t),{hours:t})},children:L.map((function(e){var t=p&&e<C.a(a)||k&&e>C.a(o);return Object(s.b)(E.a,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),Object(s.b)("span",{className:"DateTimePicker-label",children:"时"}),Object(s.b)(E.b,{listClassName:"DateTimePicker-selectList",large:r,value:w.a(u,"mm"),onChange:function(t){return e.handleChange(function(e,t){Object(h.a)(2,arguments);var n=Object(f.a)(e),r=Object(b.a)(t);return n.setMinutes(r),n}(u,t),{minutes:t})},children:D.map((function(e){var t=S&&e<x.a(a)||A&&e>x.a(o);return Object(s.b)(E.a,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),Object(s.b)("span",{className:"DateTimePicker-label",children:"分"})]})}}]),n}(l.Component);t.a=M},1081:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var u=function(e){Object(o.a)(n,e);var t=l(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?Object(s.b)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(0).Component);t.a=u},1082:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(3),d=n.n(u),b=n(12),f=n.n(b),h=n(1481),p=n(506),m=n(159),v=n(1632),O=n(871),g=n(1118);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var y=function(e){Object(o.a)(n,e);var t=j(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isFocused:!1},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.large,a=t.value,o=t.onChange,i=t.isButtonActive,c=t.toggler,l=t.disabledDate,u=t.getContainer,d=t.showIcon,b=void 0!==d&&d,j=this.state.isFocused;return Object(s.b)(m.a,{className:f()("DatePicker",n),toggler:c||Object(s.c)(p.a,{large:r,className:f()("DatePicker-Button",{"is-active":j||i}),children:[b&&Object(s.b)(v.a,{center:!0,size:20}),h.a(a,"yyyy/MM/dd"),Object(s.b)(O.a,{css:{marginLeft:8}})]}),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:u,children:Object(s.b)(g.a,{value:a,onChange:function(t){e.popover.close(),o(t)},disabledDate:l})})}}]),n}(l.Component);y.propTypes={toggler:d.a.element,disabledDate:d.a.func}},1098:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(253),a=n(65);function o(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e),o=Object(r.a)(t);return n.getTime()===o.getTime()}},1100:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(r.useRef)({boundaryRef:t,callback:e});return Object(r.useEffect)((function(){n.current={boundaryRef:t,callback:e}})),Object(r.useEffect)((function(){var e=function(e){var t,r=n.current,a=r.boundaryRef,o=r.callback;null!==a&&null!=a&&null!==(t=a.current)&&void 0!==t&&t.contains(e.target)||o(e)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),null}},1103:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(15),a=function(){return!0},o={REDIRECT_URL:"REDIRECT_URL",CHANGE_IFRAME_HEIGHT:"CHANGE_IFRAME_HEIGHT",SHOW_APPLY_RIGHTS_SUCCESS_MODAL:"SHOW_APPLY_RIGHTS_SUCCESS_MODAL"},i=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e),this.onIframeMessage=function(e){!1!==t.beforeMessage(e)&&e.data&&e.data.type&&t.onMessage(e.data,e)},this.close=function(){window.removeEventListener("message",t.onIframeMessage)};var a=Object.assign(Object.assign({},e.defaultOption),n);this.beforeMessage=a.beforeMessage,this.onMessage=a.onMessage,window.addEventListener("message",this.onIframeMessage)};i.defaultOption={beforeMessage:a,onMessage:a}},1104:function(e,t,n){var r=n(1105),a=n(295),o=n(476);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&a(t,n,i)&&(n=i=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),i=void 0===i?t<n?1:-1:o(i),r(t,n,i,e)}}},1105:function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,a,o){for(var i=-1,c=r(n((t-e)/(a||1)),0),s=Array(c);c--;)s[o?c:++i]=e,e+=a;return s}},1108:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},1110:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s}));var r=function(e){var t=e.title,n=e.id,r=e.topics,a=e.answerCount,o=e.commentCount,i=e.created,c=e.updatedTime,s=e.visitsCount,l=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:r.map((function(e){return e.name})).join(","),answerCount:a,commentCount:o,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*c).toISOString(),"zhihu:visitsCount":s,"zhihu:followerCount":l}};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var o={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},i={expand_answer:"force_launch_notif",expand_answer1:"auto_notif",expand_answer2:"auto_notif",up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,r=e.isLocked,a=e.isSuggest;return t?"closed":a?"suggested":n?"evaluated":r?"locked":""},s=function(e){return"#draft"===e.hash||"#write"===e.hash||"write"in e.query}},1118:function(e,t,n){"use strict";var r=n(4),a=n(15),o=n(16),i=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n.n(u),b=n(12),f=n.n(b),h=n(3),p=n.n(h),m=n(158),v=n(1070),O=n(65);function g(e,t){Object(O.a)(2,arguments);var n=Object(m.a)(t);return Object(v.a)(e,12*n)}var j=n(1145),y=n(87);var w=n(800),C=n(645),x=n(254);var S=n(1629),k=n(1481),A=n(1098),R=n(1630),T=n(1631),I=n(407);function E(e,t){Object(O.a)(2,arguments);var n=Object(y.a)(e),r=Object(y.a)(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function B(e){Object(O.a)(1,arguments);var t=Object(y.a)(e),n=t.getDate();return n}var N=n(27),L=function(e){return d.a.createElement(N.a,e,d.a.createElement("path",{d:"M17.782 16.78a.737.737 0 0 1-1.052 0l-4.512-4.249a.758.758 0 0 1 0-1.063L16.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L14 12l3.782 3.716c.29.294.29.77 0 1.063zm-5 0a.737.737 0 0 1-1.052 0L7.218 12.53a.758.758 0 0 1 0-1.063L11.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L9 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};L.defaultProps={name:"DoubleArrowLeft"};var D=L,M=n(971),z=n(888),P=function(e){return d.a.createElement(N.a,e,d.a.createElement("path",{d:"M6.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L7.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L10 12l-3.782 3.716a.758.758 0 0 0 0 1.063zm5 0a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L12.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L15 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))};P.defaultProps={name:"DoubleArrowRight"};var _=P;function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var U=["日","一","二","三","四","五","六"],V=function(e){Object(i.a)(n,e);var t=F(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={calendarDate:e.props.defaultCalendarDate||(Array.isArray(e.props.value)?e.props.value[0]:e.props.value),hoveringDate:null,now:new Date},e.handlePrevYearClick=function(){var t=g(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handlePrevMonthClick=function(){var t=Object(v.a)(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextMonthClick=function(){var t=Object(v.a)(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextYearClick=function(){var t=g(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleDayClick=function(t){e.setState({calendarDate:t}),e.props.onCalendarDateChange(t),e.props.onChange(t)},e.handleDayHover=function(t){e.setState({hoveringDate:t}),e.props.onHover(t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.weekStartsOn,o=t.value,i=t.disabledDate,c=t.showToday,s=t.showPrevMonth,u=t.showPrevYear,d=t.showNextMonth,b=t.showNextYear,h=this.state,p=h.calendarDate,v=h.hoveringDate,g=h.now,N=Object(j.a)(function(e){Object(O.a)(1,arguments);var t=Object(y.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(p),{weekStartsOn:a}),L=function(e,t){Object(O.a)(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,o=null==a?0:Object(m.a)(a),i=null==n.weekStartsOn?o:Object(m.a)(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var c=Object(y.a)(e),s=c.getDay(),l=6+(s<i?-7:0)-(s-i);return c.setHours(0,0,0,0),c.setDate(c.getDate()+l),c}(function(e){Object(O.a)(1,arguments);var t=Object(y.a)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(p),{weekStartsOn:a}),P=Object(r.a)(Array(Object(w.a)(L,N)+1)).map((function(e,t){return Object(C.a)(N,t)})).reduce((function(e,t){var n=function(e,t,n){Object(O.a)(2,arguments);var r=Object(j.a)(e,n),a=Object(j.a)(t,n),o=r.getTime()-Object(x.a)(r),i=a.getTime()-Object(x.a)(a);return Math.round((o-i)/6048e5)}(t,N,{weekStartsOn:a});return e[n]=e[n]?[].concat(Object(r.a)(e[n]),[t]):[t],e}),[]),F=P[0].map(S.a),V=Array.isArray(o),H=c;return Object(l.c)("div",{className:f()("Calendar",n,{"Calendar--hasBottomTool":H}),children:[Object(l.c)("div",{className:"Calendar-topTool",children:[u&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick,children:Object(l.b)(D,{size:20,center:!0})}),s&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick,children:Object(l.b)(M.a,{size:20,center:!0})}),Object(l.b)("div",{className:"Calendar-topToolDate",children:Object(k.a)(p,"yyyy 年 M 月")}),d&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick,children:Object(l.b)(z.a,{size:20,center:!0})}),b&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick,children:Object(l.b)(_,{size:20,center:!0})})]}),Object(l.c)("table",{className:"Calendar-table",cellSpacing:0,children:[Object(l.b)("thead",{className:"Calendar-thead",children:Object(l.b)("tr",{children:F.map((function(e){return Object(l.b)("th",{className:"Calendar-weekName",children:U[e]},e)}))})}),Object(l.b)("tbody",{children:P.map((function(t,n){return Object(l.b)("tr",{children:t.map((function(t,n){var r=i(t),a=V?Object(A.a)(t,o[0])||Object(A.a)(t,o[1]):Object(A.a)(t,o),c=!1;if(V){var s=Object(R.a)(o),u=Object(T.a)(o);c=Object(I.a)(t,s)>0&&Object(I.a)(u,t)>0}return Object(l.b)("td",{className:f()("Calendar-day",{"is-hovered":Object(A.a)(t,v),"is-today":Object(A.a)(t,g),"is-disabled":r,"is-not-this-month":!E(t,p),"is-input-date":a,"is-in-range":c}),onClick:function(){r||e.handleDayClick(t)},onMouseEnter:function(){r||e.handleDayHover(t)},onMouseLeave:function(){r||e.handleDayHover(null)},children:B(t)},n)}))},n)}))})]}),H&&Object(l.b)("div",{className:"Calendar-bottomTool",children:c&&Object(l.b)("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(g)},disabled:i(g),children:"今天"})})]})}}]),n}(u.Component);V.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},V.propTypes={defaultCalendarDate:p.a.instanceOf(Date),value:p.a.oneOfType([p.a.instanceOf(Date),p.a.arrayOf(p.a.instanceOf(Date))]),weekStartsOn:p.a.number,disabledDate:p.a.func,onChange:p.a.func,onHover:p.a.func,showToday:p.a.bool,showPrevMonth:p.a.bool,showPrevYear:p.a.bool,showNextMonth:p.a.bool,showNextYear:p.a.bool};t.a=V},1139:function(e,t,n){"use strict";t.a=function(e){var t=e.getCurrentContent();return t.getBlockMap().filter((function(e){return"atomic"===e.getType()})).map((function(e){var n=e.getEntityAt(0);return n?t.getEntity(n):null})).filter(Boolean)}},1145:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(87),a=n(158),o=n(65);function i(e,t){Object(o.a)(1,arguments);var n=t||{},i=n.locale,c=i&&i.options&&i.options.weekStartsOn,s=null==c?0:Object(a.a)(c),l=null==n.weekStartsOn?s:Object(a.a)(n.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(r.a)(e),d=u.getDay(),b=(d<l?7:0)+d-l;return u.setDate(u.getDate()-b),u.setHours(0,0,0,0),u}},1147:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(106),a=n.n(r);function o(e,t,n){var r=!1,o=a()((function(){r=!1,e.apply(void 0,arguments)}),t,n);return Object.assign((function(){r=!0,o.apply(void 0,arguments)}),{cancel:o.cancel,flush:o.flush,pending:function(){return r}})}},1149:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n(0),o=n(130),i=n.n(o),c=n(26),s=n(85),l=n.n(s),u=n(12),d=n.n(u),b=n(1445),f=n.n(b),h=n(164),p=Object(a.memo)((function(e){var t=e.className,n=function(e){return Object.keys(e).filter((function(t){return f()(e[t])&&e[t]})).filter((function(t){return"Mobile"!==t||!e.Tablet})).map((function(e){return"Body--".concat(e)}))}(Object(c.useSelector)(h.q));return Object(r.b)(i.a,{children:Object(r.b)("body",{className:d()(t,n)})})})),m=function(e){return function(t){var n=Object(a.forwardRef)((function(n,a){return Object(r.c)(r.a,{children:[Object(r.b)(p,{className:e}),Object(r.b)(t,Object.assign(Object.assign({},n),{},{ref:a}))]})}));return l()(n,t)}};m("LightGreyBg-body"),m("WhiteBg-body"),m("GreyBg-body")},1160:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return y}));var r=n(1495),a=n(2),o=n(33),i=n(1),c=n(26),s=n(88),l=n.n(s),u=n(85),d=n.n(u),b=n(483),f=["showLabelInfo","showLabels"],h=["answer","article","post","item"],p=function(e){return e.itemType||h.find((function(t){return e[t]}))},m=function(e){return d()(Object(c.connect)((function(e,t){return{useNewLabels:Object(b.f)(e,t[p(t)])}}))((function(t){var n=t.showLabelInfo,r=void 0===n||n,c=t.showLabels,s=void 0===c||c,u=Object(o.default)(t,f),d=p(u),b=u,h=[];return s||h.push("isLabeled"),r||(h.push("labelInfo"),h.push("hermesLabel")),d&&h.length>0&&(b=Object.assign(Object.assign({},b),{},Object(a.a)({},d,l()(u[d],h)))),Object(i.b)(e,Object.assign({},b))})),e)},v=n(0),O=Object(v.createContext)({showLabelInfo:!0,showLabels:!0}),g=O.Provider,j=O.Consumer,y=function(e){return function(t){var n=Object(i.b)(j,{children:function(n){return Object(i.b)(e,Object.assign(Object.assign({},t),{},{showLabelProps:n}))}});return d()(n,e)}}},1165:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,a=t.reasonDescription;return Object(r.b)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":a})}},1166:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(3),d=n.n(u),b=n(95),f=n.n(b),h=n(415),p=n(161),m=n(422);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var O={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},g={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},j=function(e){Object(o.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).jumpToOAuthUrl=function(t){var n=e.props.redirectUrl,r=void 0===n?location.href:n,a=Object(m.c)(r),o=a.utm_source,i=a.utm_medium,c=f()(navigator.userAgent).isZhihu;location.href="zhihu"!==t?"https://www.zhihu.com/oauth/redirect/login/".concat(g[t],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(r),"&utm_source=").concat(o,"&ref_source=").concat(i):c?"zhihu://signin?next=".concat(r):"https://www.zhihu.com/signin?next=".concat(r).concat(o?"?utm_source=".concat(o):"")},e.renderSignButtons=function(){var t=e.props.buttons;return"string"==typeof t?e.renderSingleSignButton({name:t}):t.map((function(t){return"string"==typeof t?e.renderSingleSignButton({name:t}):"object"==typeof t?e.renderSingleSignButton(t):null}))},e.renderSingleSignButton=function(t){var n=t.name,r=t.text,a=t.fill,o=t.color,i="#fff"===a||"#ffffff"===a;return Object.keys(O).includes(n)?Object(s.b)("button",{className:"SignInModal-button-".concat(n),style:{backgroundColor:a,borderColor:i?"#0f88eb":a,color:i?"#0f88eb":o},onClick:function(){e.jumpToOAuthUrl(n)},children:r||O[n]},n):null},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,r=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return Object(s.b)(p.b,{size:"small",className:"SignInModal",title:r,onClose:t,children:Object(s.b)(h.a,{module:"SignForm",moduleName:r,trackCardShow:!0,children:Object(s.c)("div",{className:"SignInModal-content",children:[n&&Object(s.b)(m.a,{className:"SignInModal-openInAppButton",href:n,children:"立即打开 App"}),this.renderSignButtons()]})})})}}]),n}(l.Component);j.propTypes={onClose:d.a.func.isRequired,urlScheme:d.a.string,redirectUrl:d.a.string,buttons:d.a.oneOfType([d.a.array,d.a.string])},j.defaultProps={buttons:["zhihu"]}},1172:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};i.defaultProps={name:"EyeSlash"},t.a=i},1192:function(e,t,n){"use strict";var r=n(0),a=n(646),o="element",i="text",c="empty",s="fragment",l=function(e,t){return function e(n){var a,l=n.node;return n.type=(a=l,r.isValidElement(a)?o:function(e){return"string"==typeof e||"number"==typeof e}(a)?i:function(e){return null==e||"boolean"==typeof e}(a)?c:Array.isArray(a)?s:void 0),n.type===o?n.children=r.Children.map(l.props.children,(function(t){return e({node:t,parent:n})})):n.type===s&&(n.children=r.Children.map(l,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},u=function e(t,n){return[t].concat(null==(r=n(t))?[]:function(t){return e(t,n)}(r));var r},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&a(String(e.node),String(n.node))){var r=(c=n,s=u(e,(function(e){return e.parent})),l=u(c,(function(e){return e.parent})),d=s.findIndex((function(e){return l.includes(e)})),[s[d],s[d-1]]);i=r[1],(o=r[0]).children.splice(o.children.indexOf(i)+1,0,{node:" "}),t=!0}var o,i,c,s,l,d;return n})),t},b=function(e){if(!e)return null;var t=[],n=l(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===s?r.Children.map(t.children.map(e),(function(e){return e})):r.createElement(t.node.type,t.node.props,r.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},f=function(e){var t=e.component,n=e.children;return r.createElement(t,{children:b(n)})};f.defaultProps={component:r.Fragment||"span"},t.CJKSpace=f},1200:function(e,t,n){e.exports=n.p+"assets/background_blue.dc578fa3.svg"},1215:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(421);function a(e){var t,n=e.isOrg,a=e.badgeV2,o=e.badge;if(!n)return!1;var i=Object(r.e)(a||o);return Boolean(null===(t=i.identity)||void 0===t?void 0:t.length)}},1216:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(0),o=n.n(a),i=n(61),c=n(246),s=n(74),l={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},u=[{key:l.textAnswer,name:"图文回答"},{key:l.videoAnswer,name:"视频回答"}];function d(e,t){var n=e.activeTabKey,a=e.onChange;return Object(r.b)(c.b,{children:u.map((function(e){var o=e.key,u=e.name;return Object(r.b)(s.a,{as:c.a,zaType:"Button",zaText:!0,css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:Object(r.b)(i.Text,{ref:o===l.videoAnswer?t:null,onClick:function(){return a(o)},css:function(e){return Object.assign({color:e.colors.GBK03A,cursor:"pointer"},n===o&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:u})},o)}))})}t.b=o.a.forwardRef(d)},1217:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return k})),n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return T}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(63),u=n.n(l),d=n(0),b=n(85),f=n.n(b),h=n(45),p=n.n(h),m=n(43),v=n.n(m),O=n(933),g=n.n(O),j=n(449);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var w={success:"success",fail:"fail",request:"request"},C="EDITABLE_STATSC";function x(){var e=p.a.get(C);e&&(e.forEach((function(e){v.a.increment(e)})),p.a.delete(C))}var S={get pageName(){return"UnknownPage"},reportRequest:u.a,reportSuccess:u.a,reportFail:u.a,recordError:function(e){return e},wrapAutoRecord:function(e){return e}},k=Object(d.createContext)(S),A=function(e){return f()((function(t){var n=Object(d.useContext)(k);return Object(s.b)(e,Object.assign({reporter:n},t))}),e)},R=function(e){Object(o.a)(n,e);var t=y(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,r=n.reporter,a=n.name;throw r&&r.reportFail(a,e,{extra:{errorInfo:t}}),e}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component),T=A(R);t.c=function(e){var t=function(t,n){v.a.increment("".concat(e,".").concat(t,".").concat(n,".count"))},n=function(e){return t(e,w.request)},r=function(e){return t(e,w.success)},a=function(t,n,r){var a="string"==typeof n?n:(null==n?void 0:n.name)||"Unknown";Object(j.c)(a)||(v.a.increment([e,t,w.fail,a,"count"].join(".")),function(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n instanceof Error&&(null===(r=window.Raven)||void 0===r||r.captureException(n,Object.assign({tags:{scope:"".concat(e,":").concat(t)}},a)))}(t,n,r))},o=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.intent,c=void 0===i||i,s=o.success,l=void 0===s||s;return function(){try{c&&n(e);var o=function(){return l?r(e):void 0},i=t.apply(void 0,arguments);return g()(i)?i.then((function(e){return o(),e}),(function(t){throw a(e,t),t})):(o(),i)}catch(t){throw a(e,t),t}}};return{get pageName(){return e},reportRequest:n,reportSuccess:r,reportFail:a,wrapAutoRecord:o,recordError:function(e,t){return o(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length){var a=p.a.get(C)||[];a.push("".concat(e,".").concat(n.join("."),".count")),p.a.set(C,a)}}}}},1239:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(12),o=n.n(a);function i(e){var t=e.className;return Object(r.b)("span",{className:o()("ActivityItem-StickyMark",t),children:"置顶"})}},1244:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(26),i=n(44),c=n(483),s=function(){return Object(r.b)("div",{className:"LabelContainer-loading"})};t.a=function(e){var t=e.useOldLabels,l=e.item,u=e.abnormalDetailProps,d=e.collapseReasonProps,b=e.showDeleteButton,f=e.inviter,h=l.type,p=l.id,m=l.isLabeled,v=Object(o.useDispatch)(),O=Object(o.useSelector)((function(e){return t||u||d?{}:b?{thankInviterInfo:f}:Object(c.c)(e,l)})),g=Object(i.e)((function(){return n.e(35).then(n.bind(null,2865))}));return Object(a.useEffect)((function(){m&&!O&&h&&p&&v(Object(c.e)(h,p))}),[v,h,p,m,O]),g?Object(r.b)(g,Object.assign({data:O},e)):m&&!t?Object(r.b)(s,{}):null}},1298:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6zm13.96 2.2l-5.008 5.008-2.651-2.652-1.768 1.768 4.42 4.42 6.776-6.777L15.96 8.2z",fillRule:"evenodd"}))};i.defaultProps={name:"CheckboxOn"},t.a=i},1299:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M5 6v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1zM2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6z"}))};i.defaultProps={name:"CheckboxOff"},t.a=i},1300:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(98),i=Object.assign;var c=function(e){return a.a.createElement(o.a,i({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),a.a.createElement("path",{d:"M11.25 4a.25.25 0 00-.25.25V11H4.25a.25.25 0 00-.25.25v1.5c0 .138.112.25.25.25H11v6.75c0 .138.112.25.25.25h1.5a.25.25 0 00.25-.25V13h6.75a.25.25 0 00.25-.25v-1.5a.25.25 0 00-.25-.25H13V4.25a.25.25 0 00-.25-.25h-1.5z",clipRule:"evenodd"}))}},1307:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},1309:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M18 8c.1-3.308-2.592-6-5.9-6-3.308 0-6 2.692-6 6v2H5.002C4 10 4 11 4 11v9s0 2 2 2h12c2 0 2-1.97 2-1.97V11s0-1-1-1h-1V8zm-6-4c2.143.018 4.005 1.597 4 4v2H8V7.996C8.013 5.562 9.857 3.982 12 4z",fillRule:"evenodd"}))};i.defaultProps={name:"Lock"},t.a=i},1340:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(12),i=n.n(o),c=n(413),s=n(479);t.a=function(e){var t=e.show,n=e.setModal,o=e.children,l=e.className,u=e.onCancel,d=e.hideIcon,b=e.maskClosable,f=void 0===b||b,h=function(){n?n(!1):u&&u()},p=Object(a.useRef)();return Object(a.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(s.a)(p.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),t?Object(r.b)("div",{className:l,children:Object(r.c)("div",{ref:p,children:[Object(r.b)("div",Object.assign({className:i()({"ModalExp-background":t})},f&&{onClick:h})),Object(r.c)("div",{className:i()("ModalExp-content",{"ModalExp-modalShow":t}),onClick:function(e){e.stopPropagation()},children:[!d&&Object(r.b)(c.a,{size:24,fill:"#d3d3d3",className:"ModalExp-closeIcon",onClick:h}),o]})]})}):null}},1343:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(33),a=n(1),o=n(1414),i=n(0),c=n.n(i),s=n(98),l=Object.assign;var u=function(e){return c.a.createElement(s.a,l({width:"24",height:"14",viewBox:"0 0 24 14"},e),c.a.createElement("rect",{width:"24",height:"14",rx:"2"}),c.a.createElement("path",{fill:"#FFF",d:"M3.328 9.96h1.12V7.584c0-.68-.088-1.424-.144-2.064h.04l.6 1.272L6.656 9.96h1.2V4.04h-1.12V6.4c0 .672.088 1.456.152 2.072h-.04l-.592-1.28-1.72-3.152H3.328v5.92zm5.992 0h3.72v-.992h-2.536V7.384h2.08v-.992h-2.08V5.024h2.448V4.04H9.32v5.92zm5.48 0h1.448l.648-2.928c.096-.464.176-.92.256-1.368h.032c.072.448.16.904.256 1.368l.664 2.928h1.472l1.096-5.92h-1.128l-.464 2.888c-.088.616-.176 1.248-.264 1.888h-.04c-.128-.64-.248-1.28-.376-1.888l-.688-2.888h-1.008l-.688 2.888c-.128.616-.256 1.256-.376 1.888h-.032c-.088-.632-.184-1.264-.272-1.888l-.472-2.888h-1.208L14.8 9.96z"}))},d=["isNewBefore"];function b(e){var t=e.isNewBefore,n=Object(r.default)(e,d);return t&&Object(o.a)(new Date,t)?Object(a.b)(u,Object.assign({css:{marginLeft:4},fill:"#0066FF",width:32,height:15},n)):null}},1345:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(917),f=n(178),h=n(416),p=n(1058),m=n(975);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var O=function(e){Object(o.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,a=e.voteupCount,o=e.onLoad,i=e.text,c=e.isRewardList,l=e.notice,u=e.type,d=e.currentUser,v={getContainer:function(e){return e}};return Object(s.c)("div",{className:"VoterList",children:[Object(s.b)(p.a,{header:"".concat(Object(f.formatNumber)(a)," 人").concat(i||"赞同了")}),c&&l&&Object(s.b)("div",{className:"VoterList-description",children:Object(s.b)("p",{children:l})}),Object(s.b)(h.b,Object.assign(Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:o,placeholder:Object(s.b)(h.a,{className:"List-item",withAvatar:!0})},v),{},{children:r&&r.map((function(e,t){return Object(s.b)(b.a,{children:Object(s.b)(m.a,{currentUser:d,user:e,isRewardList:c,meta:null,type:u,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})}}]),n}(d.Component);O.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,items:u.a.array.isRequired,voteupCount:u.a.number.isRequired,text:u.a.string.isRequired,onLoad:u.a.func.isRequired,isRewardList:u.a.bool,type:u.a.string,currentUser:u.a.object};t.a=O},1347:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n(86),c=n(36),s=n(940);function l(e){var t=e.campaign,n=e.selected,r=e.onSelect,o=t.title,i=t.description;return Object(a.c)("div",{className:"VideoContributableCampaignModalCampaign",children:[Object(a.c)("div",{role:"button",tabIndex:0,className:"VideoContributableCampaignModalCampaign-info",onClick:r,children:[Object(a.b)("div",{className:"VideoContributableCampaignModalCampaign-title",children:o}),Object(a.b)("div",{className:"VideoContributableCampaignModalCampaign-description",children:i})]}),Object(a.b)(s.a,{checked:n,onChange:r,size:16})]})}t.a=function(e){var t=e.shown,n=e.onClose,s=e.defaultCampaignId,u=e.campaignList,d=e.onSubmit,b=Object(o.useState)((function(){return s?u.find((function(e){return e.id===s})):null})),f=Object(r.a)(b,2),h=f[0],p=f[1];return Object(a.b)(i.b,{title:"选择活动",size:"large",onClose:n,children:t&&Object(a.c)(a.a,{children:[Object(a.b)("div",{className:"VideoContributableCampaignModal-list",children:u.map((function(e){return Object(a.b)(l,{campaign:e,selected:(null==h?void 0:h.id)===e.id,onSelect:function(){p((null==h?void 0:h.id)===e.id?null:e)}},e.id)}))}),Object(a.c)(i.a,{direction:"horizontal",children:[Object(a.b)(c.c,{onClick:n,children:"返回"}),Object(a.b)(c.c,{preset:"primary",color:"blue",onClick:function(){d(h)},children:"确定"})]})]})})}},1410:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(98),i=Object.assign;var c=function(e){return a.a.createElement(o.a,i({width:"20",height:"20",viewBox:"0 0 20 20"},e),a.a.createElement("path",{d:"M8.524 14.597a1.374 1.374 0 01-.999.403c-.377 0-.737-.133-1.002-.406l-3.612-3.725a1.476 1.476 0 01.006-2.05 1.386 1.386 0 011.997.01l2.614 2.704 7.56-7.774a1.385 1.385 0 011.998 0 1.482 1.482 0 010 2.055l-8.562 8.783z",fillRule:"evenodd",clipRule:"evenodd"}))}},1414:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e),o=Object(r.a)(t);return n.getTime()<o.getTime()}},1416:function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},1441:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(42),a=n.n(r);function o(e,t,n){return"//".concat(a.a.wwwHost,"/vessay").concat(n?"/v2":"","/editor?type=").concat(e,"&id=").concat(t)}var i="vessay_v2_sdk",c="2"},1442:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(5),a=Object(r.a)("bizVip",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]);function o(){return{API:{types:a.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"https://bvip.zhihu.com/api/v1",method:"POST"}}}function i(e){return{API:{types:a.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(e,"/answer-settings"),method:"GET"}}}function c(){return{API:{types:a.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",method:"GET"}}}},1443:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(42),a=n.n(r),o=function(e){var t=e.title,n=e.originTitle,r=e.source,o=e.sourceId,i=e.productTypeName,c=new URLSearchParams({title:t,originTitle:n,source:r,sourceId:o,productTypeName:i}).toString();return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/selection/goods-editor?").concat(c)},i=function(e){var t=e.contentId,n=e.contentType,r=new URLSearchParams({contentId:t,contentType:n});return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/selection/profit-selector?").concat(r)}},1444:function(e,t,n){"use strict";t.a={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"}},1445:function(e,t,n){var r=n(217),a=n(132);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==r(e)}},1446:function(e,t,n){"use strict";t.a=function(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}},1449:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(6),a=n(1148);function o(e){var t,n,o;return null!=e&&null!==(t=e.bizExt)&&void 0!==t&&t.creationRelationship?e.bizExt.creationRelationship:"string"==typeof(null==e||null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?Object(r.camelizeKeys)(null!==(o=Object(a.a)(e.creationRelationship.renderJson))&&void 0!==o?o:{}):e.creationRelationship}var i=o,c=o,s=o},1492:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return I}));var r=n(1446),a=n(1),o=n(15),i=n(16),c=n(17),s=n(18),l=n(9),u=n(4),d=n(0),b=n(19),f=n(3),h=n.n(f),p=n(26),m=n(88),v=n.n(m),O=n(35),g=n(74),j=n(1552),y=n(36),w=(n(122),n(79)),C=n(417),x=n(245),S=n(30);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var A={answer:h.a.object.isRequired,renderThankButtonText:h.a.func,zaInfo:h.a.number},R=[].concat(Object(u.a)(Object.keys(A)),["updateAnswerThank"]),T=function(e){Object(c.a)(n,e);var t=k(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).buttonRef=Object(d.createRef)(),e.handleUpdateThanked=e.context.authRequired((function(){var t=e.props,n=t.answer,r=n.id,a=n.relationship,o=(a=void 0===a?{}:a).isThanked,i=t.zVideoId,c=t.updateAnswerThank,s=t.zaInfo,l=!o;O.a.trackEvent(e.buttonRef.current,Object.assign({action:l?"Thank":"UnThank",element:"Button"},s&&{id:s})),c(r,l,{zVideoId:i})}),S.X.thank),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,o=t.disabled,i=n.relationship,c=(i=void 0===i?{}:i).isThanked,s=v()(this.props,R),l=r(n);return Object(a.c)(d.Fragment,{children:[Object(a.b)(x.c,{keyMap:{LIKE:"l"},handlers:{LIKE:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),Object(a.b)(g.a,Object.assign({as:y.c,zaType:"Button",zaAction:c?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:j.a,label:l,disabled:o,"aria-live":"polite"},s))]})}}]),n}(d.Component);T.contextTypes={authRequired:h.a.func},T.propTypes=A,T.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消喜欢":"喜欢"}};var I=Object(b.compose)(Object(p.connect)(null,{updateAnswerThank:w.K}),Object(C.a)(null))(T)},1495:function(e,t,n){"use strict";var r=n(2),a=n(1),o=n(12),i=n.n(o),c=n(2815),s=n(417),l=n(866),u=n(2808),d=n(2809),b=n(870),f=n(2810),h=n(2811),p=n(2812),m=n(2813),v=n(2814),O={online_roundtable:l.a,relevant:u.a,editor_recommendation:d.a,roundtable:l.a,special:b.a,weekly:f.a,daily:h.a,professional:p.a,zhizhi_plan_recommend:m.a,zhizhi_plan_edu_recommend:m.a,zhizhi_plan_baby_recommend:m.a,zhizhi_plan_acg_recommend:m.a,zhizhi_plan_outing_recommend:m.a,zhizhi_plan_rumour_deny:v.a,zhizhi_plan:m.a},g={alpha:1,group:"GYL02A"},j={alpha:.08,group:"GYL02A"},y={brand_special:c.a},w=Object.assign(Object.assign({},O),{},{COMMERCIAL_ICONS:y}),C=function(e){return"GBL07A"===(e||g).group?"commercial":"positive"},x=function(e){return"GBL07A"===(e||j).group?"commercial":"positive"},S=function(e){return"recognition"===e?"professional":e};t.a=Object(s.a)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,o=void 0===n?{}:n,c=e.className;if(!t)return null;var s=t.type,l=t.text,u=t.foregroundColor,d=t.backgroundColor,b=o.customIcon,f=o.customIconClassName,h=C(u),p=x(d),m=b||w[S(s)];return m?Object(a.c)("span",{className:i()("Label-icon","Label-iconColor--".concat(h),Object(r.a)({},"Label-iconColor--".concat(p,"Background"),d),c),children:[Object(a.b)(m,{center:!0,className:i()("Label-iconImg",f)}),l]}):null}))},1506:function(e,t,n){"use strict";var r=n(1),a=n(12),o=n.n(a),i=n(1309);t.a=function(e){var t=e.className;return Object(r.c)("div",{className:o()("Reviewing",t),children:[Object(r.c)("div",{className:"Reviewing-top",children:[Object(r.b)(i.a,{size:16}),Object(r.b)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),Object(r.b)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},1629:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getDay();return n}},1630:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e){var t,n;if(Object(a.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(r.a)(e);(void 0===n||n>t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},1631:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e){var t,n;if(Object(a.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(r.a)(e);(void 0===n||n<t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},1632:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M13.8 4.903h-3.6v.943c0 .314-.082.609-.228.864H13.8V4.903zm3.6 0h2.85c.414 0 .75.333.75.735v.337a.742.742 0 0 1-.75.735H17.4V4.903zm-10.8 0H3.75a.742.742 0 0 0-.75.735v.337c0 .404.336.735.75.735h3.082a1.721 1.721 0 0 1-.232-.864v-.943zM3 9.252c0-.407.335-.735.75-.735h16.5c.414 0 .75.33.75.737v10.274a.742.742 0 0 1-.75.736H3.75A.74.74 0 0 1 3 19.53V9.252zm4.5 1.975v1.807h1.8v-1.807H7.5zm0 4.516v1.807h1.8v-1.807H7.5zm3.6 0v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zm-3.6-4.516v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zM7.5 4.893c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893zm7.2 0c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893z"}))};i.defaultProps={name:"Calendar"},t.a=i},1633:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e),o=Object(r.a)(t);return n.getTime()>o.getTime()}},1645:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getHours();return n}},1646:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87),a=n(65);function o(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getMinutes();return n}},1654:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(61),o=n(2248),i=n(74);function c(e){var t=e.handleClick;return Object(r.c)(i.a,{as:a.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,children:[Object(r.b)(a.Text,{mr:"10px",children:"全屏编辑"}),Object(r.b)(o.a,{text:!0,center:!0})]})}},1655:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(36),d=n(161),b=n(45),f=n.n(b);n(1656);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var p=function(e){Object(o.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleHide=function(){f.a.set("AnswerOrg::know",!0),e.props.onClose()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(s.b)(d.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&Object(s.c)("div",{children:[Object(s.c)("ul",{className:"AnswerModal-list",children:[Object(s.b)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),Object(s.b)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),Object(s.b)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),Object(s.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),Object(s.c)(d.a,{direction:"horizontal",children:[Object(s.b)(u.c,{onClick:this.handleHide,children:"不再显示"}),Object(s.b)(u.c,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return f.a.get("AnswerOrg::know")}}]),n}(l.Component)},1656:function(e,t,n){},1657:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(36),d=n(86),b=n(45),f=n.n(b);n(1656);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var p=function(e){Object(o.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleHide=function(){f.a.set("AnswerBrand::know",!0),e.props.onClose()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(s.b)(d.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n,children:t&&Object(s.c)("div",{children:[Object(s.b)("p",{children:"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"}),Object(s.b)("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank",children:"了解品牌提问"}),Object(s.c)(d.a,{direction:"horizontal",children:[Object(s.b)(u.c,{onClick:this.handleHide,children:"知道了，继续回答"}),Object(s.b)(u.c,{color:"blue",preset:"primary",onClick:n,children:"取消"})]})]})})}}],[{key:"getKnown",value:function(){return f.a.get("AnswerBrand::know")}}]),n}(l.Component)},1658:function(e,t,n){"use strict";var r=n(49),a=n(33),o=n(1),i=n(0),c=n(26),s=n(61),l=n(74),u=n(86),d=n(948),b=n(29),f=n(1442),h=["shown","toggle","onSuccess","onFail"];t.a=function(e){var t=e.shown,n=e.toggle,p=e.onSuccess,m=e.onFail,v=Object(a.default)(e,h),O=Object(c.useDispatch)(),g=Object(i.useState)(!0),j=Object(r.a)(g,2),y=j[0],w=j[1],C=Object(l.i)().trackEvent;return Object(o.b)(u.b,Object.assign(Object.assign({title:"商业内容推广",subtitle:"",onClose:function(){C({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},v),{},{children:t&&Object(o.c)("div",{children:[Object(o.b)(s.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),Object(o.c)(s.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[Object(o.b)(d.a,{onChange:function(){w(!y)},type:"checkbox",checked:y}),Object(o.c)(s.Text,{ml:"4px",children:["我已阅读并同意",Object(o.b)(s.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享用户协议》"})]})]}),Object(o.b)("button",{disabled:!y,onClick:function(){O(Object(f.a)()).then((function(e){var t,n=e.payload;if(n.isSuccess)return p(),void O(Object(b.h)("开通成功"));m(),O(Object(b.h)((null==n||null===(t=n.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})).catch((function(e){var t;m(),O(Object(b.h)((null==e||null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!y&&{cursor:"not-allowed"}]},children:"确认并开通"})]})}))}},1659:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(1),a=n(61),o=n(851),i=n(74),c=n(36),s=function(e){var t=e.canSubmit,n=e.handleSubmit,a=e.isReediting,o=e.scheduledPublishAt,s=e.type,l=e.className;return Object(r.b)(i.a,{as:c.c,zaText:!0,zaType:"Button",zaAction:"Unknown",width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:c.a.Blue,preset:c.b.Primary,css:{borderRadius:3,cursor:t?"pointer":"not-allowed",opacity:t?1:.3},onClick:n,className:l,children:a?"提交修改":o?"定时发送":"发布".concat("answer"===s?"回答":"文章")})};function l(e){var t=e.type,n=e.textCount,i=e.draftStatus,c=e.removeDraft,l=e.handleSubmit,u=e.isReediting,d=e.scheduledPublishAt,b=e.onCancelEdit,f=e.draft,h=e.canSubmit,p=e.isFullScreen;return Object(r.c)(a.Flex,Object.assign(Object.assign({justifyContent:"space-between",alignItems:"center",p:"10px 20px",width:"100%"},p&&{mx:"auto",maxWidth:688}),{},{bg:"GBK99A",css:function(e){return{boxShadow:"0 -1px 3px ".concat(e.colorMod(e.colors.GBK02B).alpha(.12))}},children:[Object(r.c)(a.Flex,{alignItems:"center",children:[Object(r.b)(s,{canSubmit:h,handleSubmit:l,isReediting:u,scheduledPublishAt:d,type:t}),u&&Object(r.b)(a.Text,{color:"GBL07A",ml:"10px",onClick:b,css:{cursor:"pointer"},children:f?"保存草稿并离开":"取消"})]}),Object(r.c)(a.Text,{fontSize:14,color:"GBL05A",children:[n?"共 ".concat(n," 字"):"",n&&i?"，":"",i,i&&Object(r.b)(o.a,{text:!0,center:!0,css:{marginLeft:8,cursor:"pointer"},onClick:c})]})]}))}},1660:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(3),i=n.n(o),c=n(12),s=n.n(c),l=n(645),u=n(35),d=n(1089),b=n(74),f=n(289),h=n(30),p=n(1074),m=n(1212),v=n(1661),O=n.n(v),g=n(57),j=n(1217),y=n(463),w=n(1444),C=function(e,t){var n=e.answer,o=e.isToolbarSticky,i=e.isFullscreen,c=e.toolbarMenuAttention,v=e.scheduledPublishAt,C=e.initialScheduledPublishAt,x=e.placeholder,S=e.draft,k=e.defaultValue,A=e.isLegacyVideoAnswer,R=e.defaultVideo,T=e.question,I=e.videoAnswerEditable,E=e.videoAnswerPublished,B=e.editableReady,N=e.handleChangeContent,L=e.handleAfterChangeContent,D=e.handleFocusWithAuth,M=e.handleSelectText,z=e.handleSubmit,P=e.handleError,_=e.handleLoadStart,F=e.handleLoadEnd,U=e.handleUploadStart,V=e.handleUploadEnd,H=e.handleUploadError,q=e.handleBeforeVideoUpload,G=e.handleMCNLinkCardEdit,K=e.isVideoAnswer,W=e.handleInsertZVideo,Q=e.getToolbarSidePlugins,Y=e.getToolbarMenuPlugins,Z=e.createEditorPlugins,J=e.getEditorBeforePlugins,X=e.setUseScheduledPublish,$=e.allowToolbar,ee=void 0===$||$,te=e.onAnyChange,ne="1"!==Object(g.useAbParam)("alg_vid_cover"),re=Object(a.useRef)(null);return Object(r.b)(j.a,{name:w.a.editableEdit,children:Object(r.b)(b.b,{block:i?"FullScreen":"",children:Object(r.b)(y.a,{className:s()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:o}),ref:t,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:ee,allowUploadDocument:!0,allowVideoTitleChange:!K,allowReference:!0,allowImageEditor:!0,allowZVideo:!K,allowTable:!K,allowCatalog:!K,catalogEnabled:Object(m.a)(n,"answer"),useCatalogV2:!0,autoCalcCatalogShouldShow:!0,allowHeaderThree:!1,allowToolbarSticky:!i,toolbarStickyOffset:h.i,onInsertZVideo:W,getToolbarSidePlugins:Q,getToolbarMenuPlugins:Y,getEditorBeforePlugins:J,toolbarMenuAttention:c,createEditorPlugins:Z,toolbarProps:{menuCallout:v&&C&&Object(r.c)(f.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){X(!1),u.a.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",Object(r.b)(p.a,{onRef:re,value:C,min:C,max:l.a(C,7),onChange:function(e,t){X(!0,e),u.a.setModule(re.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),u.a.trackEvent(re.current,{action:"Click",id:5731,name:"回答"})}}),Object(r.c)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[Object(r.b)(d.a,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:x,defaultValue:S?S.editableContent:k,videoAnswerEditable:I,videoAnswerPublished:E,isLegacyVideoAnswer:A,defaultVideo:R,onReady:B,onChange:N,onAfterChange:L,onFocus:D,onSelectText:M,onSubmit:z,onError:P,onLoadStart:_,onLoadEnd:F,onUploadStart:U,onUploadEnd:V,onUploadError:H,onBeforeVideoUpload:q,logo:O.a,location:T.title,editingContentType:"answer",onMCNLinkCardEdit:G,useV2Feature:!0,useEditableV2:!0,onAnyChange:te,mustAlgorithmCover:ne})})})};C.propTypes={isToolbarSticky:i.a.bool.isRequired,answer:i.a.object.isRequired,isFullscreen:i.a.bool.isRequired,toolbarMenuAttention:i.a.string,scheduledPublishAt:i.a.number,initialScheduledPublishAt:i.a.number,placeholder:i.a.string.isRequired,draft:i.a.object,defaultValue:i.a.string,isLegacyVideoAnswer:i.a.bool,defaultVideo:i.a.object,question:i.a.object,videoAnswerEditable:i.a.bool,videoAnswerPublished:i.a.bool,editableReady:i.a.func.isRequired,handleChangeContent:i.a.func.isRequired,handleAfterChangeContent:i.a.func.isRequired,handleFocusWithAuth:i.a.func.isRequired,handleSelectText:i.a.func.isRequired,handleSubmit:i.a.func.isRequired,handleError:i.a.func.isRequired,handleLoadStart:i.a.func.isRequired,handleLoadEnd:i.a.func.isRequired,handleUploadStart:i.a.func.isRequired,handleUploadEnd:i.a.func.isRequired,handleUploadError:i.a.func.isRequired,handleBeforeVideoUpload:i.a.func.isRequired,handleMCNLinkCardEdit:i.a.func.isRequired,isVideoAnswer:i.a.bool.isRequired,handleInsertZVideo:i.a.func.isRequired,getToolbarSidePlugins:i.a.func.isRequired,createEditorPlugins:i.a.func.isRequired,getToolbarMenuPlugins:i.a.func.isRequired,getEditorBeforePlugins:i.a.func.isRequired,setUseScheduledPublish:i.a.func.isRequired},t.a=Object(a.forwardRef)(C)},1661:function(e,t,n){e.exports=n.p+"assets/logo.804f083e.png"},1662:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(49),a=n(1),o=n(0),i=n(61),c=n(413),s=n(1017),l=n(74),u=n(45),d=n.n(u),b=n(1010),f=n(424),h=n(44),p="showEvaluatePanelTimer",m="isShowEvaluatePanel",v=function(e){return Object(a.b)(l.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{},{children:Object(a.b)(c.a,{width:"16",height:"16"})}))},O=function(e){return Object(a.b)(i.Box,{css:{textAlign:"right"},children:Object(a.b)(l.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{},{children:"确认提交"}))})},g=function(e){return Object(a.b)(l.a,Object.assign({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function j(e){var t=e.editorFrom,n=e.storageKey,c=void 0===n?"":n,u=Object(o.useState)(""),j=Object(r.a)(u,2),y=j[0],w=j[1],C=Object(o.useState)("10"),x=Object(r.a)(C,2),S=x[0],k=x[1],A=Object(o.useState)(""),R=Object(r.a)(A,2),T=R[0],I=R[1],E=Object(o.useRef)(),B=Object(b.a)(),N=Object(f.b)(),L=Object(h.d)((function(e){N("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:T}})}));return Object(o.useEffect)((function(){var e=(new Date).getTime()>d.a.get(p+c);!d.a.get(m+c)||e?(w(""),setTimeout((function(){w("0"),d.a.set(m+c,"1"),d.a.set(p+c,(new Date).getTime()+5184e6),E.current=setTimeout((function(){w("")}),6e4)}),6e5)):w("")}),[c]),""===y?null:Object(a.b)(l.b,{block:"editorEvaluatePanel",children:Object(a.b)(l.e,{zaText:"nps展示",zaType:"Block",children:Object(a.c)(i.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"10"}},children:[Object(a.b)(v,{onClick:function(){w("")}}),"0"===y&&Object(a.c)(i.Box,{children:[Object(a.b)(i.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),Object(a.b)(i.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),Object(a.b)(i.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return Object(a.b)(g,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(E.current),e<=6?w("1"):e>6&&(w(""),B({text:"感谢您的反馈",delay:2e3}),L(e)),k(e)},children:e},t)}))}),Object(a.c)(i.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[Object(a.b)("span",{role:"img","aria-label":"不满意",children:"不满意👎"}),Object(a.b)("span",{role:"img","aria-label":"满意",children:"满意👍"})]})]}),"1"===y&&Object(a.c)(i.Box,{children:[Object(a.b)(i.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),Object(a.b)(i.Box,{children:Object(a.b)(s.a,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:T,onChange:function(e){I(e.target.value)}})}),Object(a.b)(i.Box,{css:{textAlign:"right"},children:Object(a.b)(O,{onClick:function(){w(""),L(S),B({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}},1663:function(e,t,n){},1727:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n.n(a),i=n(938),c=n(985),s=n(61),l=n(1343),u=n(49),d=n(3),b=n.n(d),f=n(44),h=n(86),p=n(74),m=n(2),v=n(33),O={EMOTICON:{type:"emoticon",name:"表情包"},PUBLIC:{type:"public",name:"网络素材"},PRIVATE:{type:"private",name:"个人素材"},LATEST:{type:"latest",name:"最近使用"}},g=Object.values(O),j=Object.keys(O).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(m.a)({},t,O[t].type))}),{}),y=(Object.keys(O).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(m.a)({},O[t].type,O[t].name))}),{}),{ALL:{type:"all",name:"全部"},STATIC:{type:"static",name:"普通图片"},DYNAMIC:{type:"dynamic",name:"动图"}}),w=Object.values(y),C=(Object.keys(y).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(m.a)({},t,y[t].type))}),{}),Object.keys(y).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(m.a)({},y[t].type,y[t].name))}),{}),["active"]),x=function(e){var t=e.active,n=Object(v.default)(e,C);return Object(r.b)(p.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",color:"GBK03A",css:function(e){return[{marginRight:"20px",lineHeight:"50px",fontSize:"15px",cursor:"pointer"},t&&{position:"relative",fontWeight:"bold","::after":{position:"absolute",left:"0",bottom:"0",content:"''",display:"block",width:"100%",height:"4px",backgroundColor:e.colors.GBL01A,flexShrink:"0"}}]}},n))},S=function(e){var t=e.tabType,n=e.tabChange;return Object(r.c)(s.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{height:"50px",padding:"0 20px",boxShadow:"inset 0px -0.5px 0px ".concat(e.colors.GBK09A)}},children:[Object(r.b)(s.Flex,{children:g.map((function(e){return Object(r.b)(x,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))}),Object(r.b)("div",{className:"MaterialLibrary-SearchInputContainer"})]})};S.propTypes={tabType:b.a.string,tabChange:b.a.func};var k=S,A=n(162),R=n(912),T=n(424),I=n(426),E=["active"],B=function(e){return Object(r.b)(s.Flex,Object.assign({justifyContent:"space-between",css:{padding:"10px 20px 10px 8px"}},e))},N=function(e){return Object(r.b)("div",Object.assign(Object.assign({css:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},e),{},{children:"加载中..."}))},L=function(e){return Object(r.b)(p.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",css:{marginRight:"10px",padding:"7px 15px",fontSize:"14px",borderRadius:"3px"}},e))},D=function(e){var t=e.active,n=Object(v.default)(e,E);return Object(r.b)(L,Object.assign({css:function(e){return[{background:e.colorMod(e.colors.GBL01A).alpha(.3),color:e.colors.GBK99A},t&&{background:e.colors.GBL01A}]}},n))},M=function(e){return Object(r.b)(L,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GBL05A}}},e))},z=function(e){return Object(r.b)(L,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GRD03A}}},e))},P=n(948),_=["checked","onChange"],F=function(e){var t=e.checked,n=e.onChange,a=Object(v.default)(e,_);return Object(r.c)(s.Flex,Object.assign(Object.assign({alignItems:"center",css:function(e){return{fontSize:"13px",color:e.colors.GBL04A}}},a),{},{children:[Object(r.b)(P.a,{type:"checkbox",checked:t,onChange:function(e){n(e.target.checked)},size:15,style:{marginRight:"5px"}}),"本页全选"]}))},U=n(872),V=n(47),H=n(157),q=["onSearch"],G=function(e){var t=e.onSearch,n=Object(v.default)(e,q),o=Object(a.useState)(""),i=Object(u.a)(o,2),c=i[0],s=i[1],l=Object(a.useState)(null),d=Object(u.a)(l,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){f(document.querySelector(".MaterialLibrary-SearchInputContainer"))}),[]),b&&Object(V.createPortal)(Object(r.b)(H.a,Object.assign({className:"materials_library_public_search",onChange:function(e){return s(e.target.value)},value:c,after:Object(r.b)(U.a,{text:!0,onClick:function(){t(c)}}),onKeyUp:function(e){13===e.keyCode&&t(c)},css:function(e){return{width:"198px",height:"28px",lineHeight:"28px",fontSize:"12px",color:e.colors.GBL05A,backgroundColor:e.colors.GBK10A,border:"1px solid",borderColor:e.colors.GBK08A}}},n)),b)},K=n(416),W=["children"],Q=function(e){return Object(r.b)("i",Object.assign({css:{marginLeft:"14px",width:"96px"}},e))},Y=function(e){var t=e.children,n=Object(v.default)(e,W);return Object(r.c)(K.b,Object.assign(Object.assign({css:{display:"flex",flex:1,overflow:"auto",flexWrap:"wrap",justifyContent:"space-between",alignContent:"flex-start",height:"100%",marginLeft:"-14px",padding:"0 20px 0"}},n),{},{children:[t,Object(r.b)(Q,{}),Object(r.b)(Q,{}),Object(r.b)(Q,{}),Object(r.b)(Q,{}),Object(r.b)(Q,{}),Object(r.b)(Q,{})]}))},Z=Object(a.createContext)({}),J=function(){return Object(a.useContext)(Z)},X=function(e){var t=e.onClose,n=e.sourceType,o=e.sourceId,i=e.insertImage,c=e.setTabType,s=e.children;return Object(r.b)(Z.Provider,{value:Object(a.useMemo)((function(){return{onClose:t,sourceType:n,sourceId:o,insertImage:i,setTabType:c}}),[t,n,o,i,c]),children:s})},$=n(138),ee=n(1589),te=n(83),ne=n(1300),re=n(1410),ae=n(851),oe=function(){return new Promise(requestAnimationFrame)},ie=function(){return Object(r.b)(s.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"48px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colors.GBL05A,color:e.colors.GBK99A,borderRadius:"2px",zIndex:1}},children:"已删除"})},ce=function(e){return Object(r.b)(p.a,Object.assign({as:s.Flex,zaType:"Button",zaAction:"Unknown",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",css:{borderRadius:"2px",position:"absolute"}},e))},se=function(e){var t=e.data,n=e.insertImages,o=e.chooseImage,i=e.deleted,c=e.deleteSingleImage,l=e.imageUrl,d=e.poster,b=Object(te.e)(),f=Object($.imgUrl)(l||(null==t?void 0:t.origin),"100w"),h=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),o=n[0],i=n[1],c="error"===o,s="ready"===o,l=function(){"loading"!==o&&(i("loading"),Promise.all([Object($.loadImage)(e),oe().then(oe)]).then((function(){i("ready")})).catch((function(){i("error")})))};return{isGifReady:s,gifIcon:"loading"===o||s?Object(r.b)(ee.b,{className:"MaterialLibrary-GifIcon",onClick:l}):c?Object(r.b)(ee.c,{className:"MaterialLibrary-GifIcon",onClick:l}):Object(r.b)(ee.a,{className:"MaterialLibrary-GifIcon",onClick:l})}}(f),p=h.isGifReady,m=h.gifIcon,v=p?f:Object($.imgUrl)(d||(null==t?void 0:t.thumbnail),"100w"),O="dynamic"===t.subtype?v:f;return Object(r.c)(s.Box,{color:"GBK02A",width:"96px",css:[{display:"inline-block",marginBottom:"10px",marginLeft:"14px",verticalAlign:"top",".MaterialLibrary-GifIcon":{position:"absolute",width:"46px",height:"46px",marginLeft:"-23px",marginTop:"-23px",top:"50%",left:"50%",transition:"0.3s ease-out",transitionProperty:"transform, opacity",transform:"scale(1)",transformOrigin:"center",opacity:"1"}},p&&{".MaterialLibrary-GifIcon":{transform:"scale(0.3)",opacity:"0"}}],children:[Object(r.c)(s.Box,{width:"96px",height:"96px",css:function(e){return{borderRadius:"2px",cursor:"pointer",position:"relative",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.08),"&:hover > .MaterialLibrary-imgListItemHover":{display:"flex"}}},children:[Object(r.b)(s.Image,{src:O,loading:"lazy",size:"100%",css:Object.assign({position:"absolute",left:0,right:0,objectFit:"cover",borderRadius:"inherit",opacity:i?"0.3":"1"},b)}),Object(r.c)(s.Box,{sx:{color:"GBK99A",border:"2px solid",borderColor:"GBL01A"},css:{display:"none",position:"absolute",top:"0",left:"0",right:"0",width:"100%",height:"100%",borderRadius:"inherit"},className:"MaterialLibrary-imgListItemHover",children:[Object(r.b)(ce,{zaText:"添加图片",title:"添加",onClick:function(){n([t])},css:function(e){return{top:"2px",right:"2px",backgroundColor:e.colors.GBL01A,display:i?"none":"flex"}},children:Object(r.b)(ne.a,{fill:"currentColor",size:18})}),i?Object(r.b)(ce,{zaText:"删除图片",title:"删除",css:function(e){return{bottom:"2px",right:"2px",backgroundColor:e.colors.GBL01A}},onClick:function(){c(t)},children:Object(r.b)(ae.a,{fill:"currentColor",size:18})}):Object(r.b)(ce,{zaText:"选中图片",title:"选中图片",onClick:function(){o(t)},css:function(e){return{bottom:"2px",right:"2px",border:"2px solid ".concat(e.colors.GBK99A)}}})]}),(null==t?void 0:t.checked)&&Object(r.b)(ce,{zaText:"取消选中图片",title:"取消选中图片",onClick:function(){o(t)},css:function(e){return{bottom:"4px",right:"4px",backgroundColor:e.colors.GBL01A,color:e.colors.GBK99A}},children:Object(r.b)(re.a,{fill:"currentColor",size:13})}),"dynamic"===t.subtype&&m,i&&Object(r.b)(ie,{})]}),Object(r.b)(s.Box,{mt:"4px",fontSize:"10px",lineHeight:"20px",css:Object(te.d)(1),title:"文件名称",children:null==t?void 0:t.name})]})};se.propTypes={data:b.a.string,chooseImage:b.a.func,getLatestList:b.a.func};var le=se,ue=n(4),de=n(160),be=n(6),fe=function(e){var t=e.itemKey,n=Object(T.b)(),r=Object(p.i)().trackEvent,o=J(),i=o.sourceId,c=o.sourceType,s=o.insertImage,l=o.onClose,d=Object(a.useState)([]),b=Object(u.a)(d,2),h=b[0],m=b[1],v=Object(a.useState)(!0),O=Object(u.a)(v,2),g=O[0],j=O[1],y=Object(a.useState)(!1),w=Object(u.a)(y,2),C=w[0],x=w[1],S=Object(a.useState)(!1),k=Object(u.a)(S,2),A=k[0],R=k[1],I=Object(a.useState)(!1),E=Object(u.a)(I,2),B=E[0],N=E[1],L=Object(a.useState)("all"),D=Object(u.a)(L,2),M=D[0],z=D[1],P=Object(a.useState)(null),_=Object(u.a)(P,2),F=_[0],U=_[1],V=h.length&&h.every((function(e){return e.checked})),H=function(){j(!0),N(!1),R(!1),U(null),m([]),x(!1)},q=Object(f.d)((function(e,t){var n;(j(!1),t)?N(!0):de.a.alert((null==e?void 0:e.message)||(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧!")})),G=Object(f.d)((function(e){var t,n=Object(be.camelizeKeys)(e.payload||{});j(!1),R(null==n||null===(t=n.paging)||void 0===t?void 0:t.isEnd),U(null==n?void 0:n.paging),m((function(e){return e.concat((null==n?void 0:n.data)||[])}))})),K=Object(f.d)((function(e){m((function(n){var r=Object(ue.a)(n),a=r.find((function(n){return e[t]===n[t]}));return a&&(a.checked=!a.checked),r}))})),W=Object(f.d)((function(e){s(e.map((function(e){return e.origin}))),n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"POST",body:{source_type:c,source_id:String(i),material_type:"image",material_ids:e.map((function(e){return e.materialId}))}}),l()}));return{materialList:h,setMaterialList:m,paging:F,isLoading:g,setIsLoading:j,hasInited:C,setHasInited:x,isDrained:A,setIsDrained:R,isPageError:B,setIsPageError:N,subTypeCatch:M,setSubTypeCatch:z,selectAllChecked:V,toggleSelectAll:function(e){e&&r({action:"Unknown",eventType:"Click",elementLocation:{type:"Button",text:"本页全选"}}),m((function(t){return t.map((function(t){return Object.assign(Object.assign({},t),{},{checked:e})}))}))},reset:H,handleSubTypeChange:function(e){C&&e!==M&&(z(e),H())},handleResponseErrorData:q,handleResponseData:G,chooseImage:K,insertImages:W}},he=["dataList","insertImages"],pe=["keywordCatch"],me=function(e){var t=e.isPageError,n=e.keywordCatch,a=e.reset;return t?Object(r.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:a}):Object(r.b)(R.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},ve=function(e){var t=e.dataList,n=e.insertImages,a=Object(v.default)(e,he),o=(t||[]).filter((function(e){return!0===e.checked}));return Object(r.b)(s.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"}},a),{},{children:Object(r.b)(D,{active:o.length>0,onClick:function(){n(o)},children:"插入选择图片"})}))},Oe=function(e){var t=e.keywordCatch,n=Object(v.default)(e,pe),o=Object(T.b)(),i=J(),c=i.insertImage,l=i.onClose,u=fe({itemKey:"id"}),d=u.materialList,b=u.paging,h=u.isLoading,p=u.setIsLoading,m=u.hasInited,O=u.setHasInited,g=u.isDrained,j=u.isPageError,y=u.setIsPageError,w=u.selectAllChecked,C=u.toggleSelectAll,x=u.reset,S=u.handleResponseErrorData,k=u.handleResponseData,A=u.chooseImage,R=!d.length,E=Object(f.d)((function(){return p(!0),y(!1),o((null==b?void 0:b.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/search"),{offset:null==d?void 0:d.length,limit:24,keyword:t||"表情包"}))})),L=Object(f.d)((function(){return E().then(k).catch((function(e){S(e.payload)}))})),D=Object(f.d)((function(e){c(e.map((function(e){return e.origin}))),l()}));Object(a.useEffect)((function(){m||E().then(k).catch((function(e){S(e.payload,!0)})).finally((function(){O(!0)}))}),[m,O,E,k,S]);var M=R?!h&&Object(r.b)(me,{isPageError:j,keywordCatch:t,reset:x}):Object(r.c)(r.a,{children:[Object(r.b)(Y,{getContainer:function(e){return e},onLoad:L,isLoading:h,isDrained:g,children:d.map((function(e,t){return Object(r.b)(le,{data:e,insertImages:D,chooseImage:A},String([e.id,t]))}))}),Object(r.b)(ve,{dataList:d,insertImages:D})]});return Object(r.c)(s.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},n),{},{children:[Object(r.c)(B,{children:[Object(r.b)("div",{className:"MaterialLibrary-SearchTipsContainer",children:t&&!R&&!h&&!j&&Object(r.c)(s.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})}),Object(r.b)(F,{checked:w,onChange:C})]}),m?M:Object(r.b)(N,{})]}))},ge=function(e){var t=Object(A.default)({},e),n=Object(a.useState)(""),o=Object(u.a)(n,2),i=o[0],c=o[1];return Object(r.c)(r.a,{children:[Object(r.b)(G,{placeholder:"搜索表情包",onSearch:c}),Object(r.b)(Oe,Object.assign({keywordCatch:i},t),i)]})},je=["active"],ye=function(e){var t=e.active,n=Object(v.default)(e,je);return Object(r.b)("button",Object.assign({color:"GBK03A",css:[{padding:"0 12px",fontSize:"12px",cursor:"pointer"},t&&{fontWeight:"bold"}]},n))},we=function(e){var t=e.tabType,n=e.tabChange;return Object(r.b)(s.Flex,{children:w.map((function(e){return Object(r.b)(ye,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))})};we.propTypes={tabType:b.a.string,tabChange:b.a.func};var Ce=function(e){var t=Object(T.b)(),n=Object(a.useState)({}),r=Object(u.a)(n,2),o=r[0],i=r[1],c=Object(a.useState)(!1),s=Object(u.a)(c,2),l=s[0],d=s[1],b=Object(a.useState)(""),h=Object(u.a)(b,2),p=h[0],m=h[1],v=Object(a.useState)(!1),O=Object(u.a)(v,2),g=O[0],j=O[1],y=Object(f.d)((function(){j(!1),i({}),d(!1)})),w=Object(f.d)((function(){return t("".concat(location.origin,"/api/v4/materials/pc_editor/folders?type=").concat(e,"&material_type=image")).then((function(e){var t,n=Object(be.camelizeKeys)((null===(t=e.payload)||void 0===t?void 0:t.data)||{});return i(n),n}))}));return Object(a.useEffect)((function(){l||w().then((function(e){var t,n,r=null==e||null===(t=e.child)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;m(r)})).catch((function(){j(!0)})).finally((function(){d(!0)}))}),[l,w]),{hasInited:l,isPageError:g,setIsPageError:j,reset:y,folders:o,getFoldersList:w,activeFolderId:p,setActiveFolderId:m}},xe=["dataList","insertImages"],Se=function(e){var t=e.isPageError,n=e.keywordCatch,a=e.reset;return t?Object(r.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:a}):Object(r.b)(R.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},ke=function(e){var t=e.dataList,n=e.insertImages,a=Object(v.default)(e,xe),o=(t||[]).filter((function(e){return!0===e.checked}));return Object(r.b)(s.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"}},a),{},{children:Object(r.b)(D,{active:o.length>0,onClick:function(){n(o)},children:"插入选择图片"})}))},Ae=function(e){var t=e.keywordCatch,n=e.activeFolderId,o=J(),i=o.sourceId,c=o.sourceType,l=Object(T.b)(),u=fe({itemKey:"uniqueId"}),d=u.materialList,b=u.paging,h=u.isLoading,p=u.setIsLoading,m=u.hasInited,v=u.setHasInited,O=u.isDrained,g=u.isPageError,j=u.setIsPageError,y=u.subTypeCatch,w=(u.handleSubTypeChange,u.selectAllChecked),C=u.toggleSelectAll,x=u.reset,S=u.handleResponseErrorData,k=u.handleResponseData,A=u.chooseImage,R=u.insertImages,E=!d.length,L=Object(f.d)((function(){return p(!0),j(!1),l((null==b?void 0:b.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/search"),{offset:null==d?void 0:d.length,limit:24,keyword:t,source_type:c,source_id:i,sub_type:y}))})),D=Object(f.d)((function(){return L().then(k).catch((function(e){S(e.payload)}))}));Object(a.useEffect)((function(){!m&&n&&L().then(k).catch((function(e){S(e.payload,!0)})).finally((function(){v(!0)}))}),[m,n,v,L,k,S]);var M=E?!h&&Object(r.b)(Se,{isPageError:g,keywordCatch:t,reset:x}):Object(r.c)(r.a,{children:[Object(r.b)(Y,{getContainer:function(e){return e},onLoad:D,isLoading:h,isDrained:O,children:d.map((function(e,t){return Object(r.b)(le,{data:e,insertImages:R,chooseImage:A},String([e.uniqueId,t]))}))}),Object(r.b)(ke,{dataList:d,insertImages:R})]});return Object(r.c)(r.a,{children:[Object(r.c)(B,{children:[Object(r.c)("div",{className:"MaterialLibrary-SearchTipsContainer",children:[!1,t&&!E&&!h&&!g&&Object(r.c)(s.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})]}),Object(r.b)(F,{checked:w,onChange:C})]}),m?M:Object(r.b)(N,{})]})},Re=function(e){var t=Object(A.default)({},e),n=Object(a.useState)(""),o=Object(u.a)(n,2),i=o[0],c=o[1],l=Ce(j.PUBLIC),d=l.hasInited,b=l.reset,f=l.isPageError,h=l.activeFolderId,p=f?Object(r.b)(Se,{isPageError:!0,reset:b}):Object(r.b)(Ae,Object.assign({keywordCatch:i,activeFolderId:h},t),i);return Object(r.c)(r.a,{children:[Object(r.b)(G,{placeholder:"搜索网络素材库",onSearch:c}),Object(r.b)(s.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:d?p:Object(r.b)(N,{css:{marginTop:42}})}))]})},Te=n(290),Ie=n(304),Ee=n(210),Be=n(27),Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le=function(e){return o.a.createElement(Be.a,Ne({fill:"currentColor"},e),o.a.createElement("path",{d:"M6 20h12a2 2 0 0 0 2-2V8.828a2 2 0 0 0-.586-1.414l-2.828-2.828A2 2 0 0 0 15.172 4H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2zm.5-2h11a.5.5 0 0 0 .5-.5V9.207a.5.5 0 0 0-.146-.353l-2.708-2.708A.5.5 0 0 0 14.793 6H6.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5zm4.086-9.886a2 2 0 0 1 2.828 0l2.44 2.44a.5.5 0 0 1 0 .707l-.708.707a.5.5 0 0 1-.707 0L13 10.528V13.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-2.972l-1.438 1.44a.5.5 0 0 1-.707 0l-.708-.707a.5.5 0 0 1 0-.708l2.44-2.439zM7.5 15a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-9z",fillRule:"evenodd",clipRule:"evenodd"}))};Le.defaultProps={name:"UpLoad"};var De=Le,Me=function(e){var t=e.handleUploadImage,n=Object(a.useRef)();return Object(r.c)(r.a,{children:[Object(r.b)("input",{css:{display:"none"},ref:n,type:"file",onChange:t,accept:"image/*",multiple:!0}),Object(r.c)(p.a,{zaType:"Button",zaText:"本地上传图片",as:s.Flex,role:"button",width:"96px",height:"96px",fontSize:"12px",color:"GBL05A",alignItems:"center",justifyContent:"center",flexDirection:"column",ml:"14px",mb:"10px",onClick:function(){return n.current.click()},css:function(e){return{verticalAlign:"top",display:"inline-flex",cursor:"pointer",borderRadius:"2px",backgroundColor:e.colorMod(e.colors.GBL05A).alpha(.08)}},children:[Object(r.b)(De,{}),Object(r.b)(s.Box,{children:"本地上传"})]})]})},ze=n(2777),Pe=n(2806),_e=n(1591),Fe=n(413),Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ve=function(e){return o.a.createElement(Be.a,Ue({fill:"currentColor"},e),o.a.createElement("path",{d:"M9.586 3a1 1 0 0 1 .707.293l1.414 1.414a1 1 0 0 0 .707.293H21a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6.586zm-.122 2.293A1 1 0 0 0 8.757 5H4.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25V7.25a.25.25 0 0 0-.25-.25h-8.164a1 1 0 0 1-.707-.293L9.464 5.293zM14.75 11a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v1.75a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V13H9.25a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25H11V9.25a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25V11h1.75z",fillRule:"evenodd",clipRule:"evenodd"}))};Ve.defaultProps={name:"FolderPlus"};var He=Ve,qe=n(12),Ge=n.n(qe),Ke=function(e){var t=e.type,n=e.className,o=e.inputShowName,i=void 0===o?"":o,c=e.resetInput,s=e.folderId,l=e.getFoldersList,d=Object(T.b)(),b=Object(a.useRef)(),f=Object(a.useState)(i),h=Object(u.a)(f,2),p=h[0],m=h[1];return Object(r.b)("input",{ref:b,type:"text",className:Ge()("MaterialLibrary-input-module",n),placeholder:"请输入文件名称",autoFocus:"autofocus",onChange:function(e){var t=e.target.value;m(t)},value:p,onBlur:function(){c&&c(""),"add"!==t&&p&&d("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(s),{method:"PUT",body:{name:p}}).then((function(){var e;null===(e=b.current)||void 0===e||e.blur(),l&&l()})).catch((function(e){var t,n,r;de.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))},onKeyUp:function(e){var t;13===e.keyCode&&(null===(t=b.current)||void 0===t||t.blur())}})};Ke.propTypes={inputShowName:b.a.string,resetInput:b.a.func};var We=Ke,Qe=function(e){return Object(r.b)(p.a,Object.assign({as:s.Flex,zaType:"Button",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:function(e){return{borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer","&+&":{marginLeft:"4px"}}}},e))},Ye=function(e){var t,n=e.folders,o=void 0===n?{}:n,i=e.activeFolderId,c=e.getFoldersList,l=e.folderClick,d=e.reset,b=Object(T.b)(),f=Object(a.useState)(""),h=Object(u.a)(f,2),p=h[0],m=h[1],v=Object(a.useState)(""),O=Object(u.a)(v,2),g=O[0],j=O[1],y=function(e,t){"nav-edit"===e?(m(t.id),j(t.name)):"nav-delete"===e&&de.a.confirm(Object(r.c)("div",{className:"MaterialLibrary-alert",children:[Object(r.b)("h2",{children:"是否删除已选择分类？"}),Object(r.b)("p",{children:"分类中的图片将归入未分类中"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){b("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t.id),{method:"DELETE",body:{delete_material:!1}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?(de.a.alert("已成功删除分组，该分组的图片已移动至「我的图片-未分类」"),d()):de.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))};return null!=o&&o.hidden?null:Object(r.c)("div",{className:"MaterialLibraryNav",children:[Object(r.c)("div",{className:"MaterialLibraryNav-nav",children:[Object(r.c)(s.Flex,{className:"MaterialLibraryNav-Mine",justifyContent:"space-between",alignItems:"center",children:[Object(r.c)(s.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(r.b)(ze.a,{className:"nav-icon"}),null==o?void 0:o.name]}),Object(r.b)("div",{className:"nav-num",children:null==o?void 0:o.materialCount})]}),null==o||null===(t=o.child)||void 0===t?void 0:t.map((function(e){return Object(r.c)(s.Flex,{className:Ge()("MaterialLibraryNav-Folder",{active:i===e.id}),justifyContent:"space-between",alignItems:"center",onClick:function(){l(e.id)},children:[Object(r.c)(s.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(r.b)(Pe.a,{className:"nav-icon"}),p!==e.id&&Object(r.b)("div",{className:"nav-name",children:e.name})]}),p!==e.id&&Object(r.b)("div",{className:Ge()("nav-num",{"disable-hover":!e.supportEdit&&!e.supportDelete}),children:e.materialCount||0}),p!==e.id&&(e.supportEdit||e.supportDelete)&&Object(r.c)(s.Flex,{className:"nav-handle",children:[e.supportEdit&&Object(r.b)(Qe,{zaText:"编辑",onClick:function(t){t.stopPropagation(),y("nav-edit",e)},children:Object(r.b)(_e.a,{fill:"currentColor",size:10})}),e.supportDelete&&Object(r.b)(Qe,{zaText:"删除",onClick:function(t){t.stopPropagation(),y("nav-delete",e)},children:Object(r.b)(Fe.a,{fill:"currentColor",size:10})})]}),p===e.id&&Object(r.b)(We,{folderId:e.id,inputShowName:g,getFoldersList:c,resetInput:function(e){m(e)}})]},e.id)}))]}),Object(r.c)(s.Flex,{className:"MaterialLibraryNav-Add",justifyContent:"space-between",alignItems:"center",onClick:function(){var e;(null==o||null===(e=o.child)||void 0===e?void 0:e.length)>15?de.a.alert("分组已达上限，请删除已有的分类后再行添加"):de.a.confirm(Object(r.c)("div",{className:"MaterialLibrary-alert",children:[Object(r.b)("h2",{children:"添加分类"}),Object(r.b)(We,{type:"add",className:"MaterialLibraryNav-input-module"})]}),{text:{ok:"添加",cancel:"取消"}}).then((function(){var e,t=null===(e=document.querySelector(".MaterialLibrary-input-module"))||void 0===e?void 0:e.value;b("".concat(location.origin,"/api/v4/materials/pc_editor/folders"),{method:"POST",body:{name:t,material_type:"image"}}).then((function(){c()})).catch((function(e){var t,n,r;de.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))}),(function(){}))},children:[Object(r.b)(He,{className:"nav-icon"}),"添加分类"]})]})};Ye.propTypes={folders:b.a.object,getFoldersList:b.a.func,folderClick:b.a.func};var Ze=Ye,Je=["dataList","activeFolderId","folders","getFoldersList","insertImages"];function Xe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et,tt=function(e){var t=e.isPageError,n=e.handleUploadImage,o=e.reset,i=Object(a.useRef)();return t?Object(r.b)(r.a,{children:Object(r.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o})}):Object(r.c)(r.a,{children:[Object(r.b)("input",{css:{display:"none"},ref:i,type:"file",onChange:n,accept:"image/*",multiple:!0}),Object(r.b)(R.a.EI1A,{image:"default",content:"图片库为空，请上传个人图片吧",buttonText:"上传图片",buttonOnClick:function(){i.current.click()}})]})},nt=function(e){var t=e.dataList,n=e.activeFolderId,o=e.folders,i=e.getFoldersList,c=e.insertImages,l=Object(v.default)(e,Je),u=Object(T.b)(),d=(t||[]).filter((function(e){return!0===e.checked})),b=Object(a.useMemo)((function(){var e;return null==o||null===(e=o.child)||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}),[o,n]);return Object(r.c)(s.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"}},l),{},{children:[Object(r.b)(D,{active:d.length>0,onClick:function(){c(d)},children:"插入选择图片"}),d.length>0&&(null==b?void 0:b.length)>0&&Object(r.b)(M,{onClick:function(){if(0!==d.length){var e=b[0].id;de.a.confirm(Object(r.c)("div",{className:"MaterialLibrary-alert",children:[Object(r.c)("h2",{children:["为已选择共 ",d.length," 张图片分类"]}),Object(r.b)(Ee.b,{buttonClassName:"MaterialLibraryContent-select",listClassName:"MaterialLibraryContent-option",value:n,onChange:function(t){e=t},children:b.map((function(e){var t=e.name,n=e.id;return Object(r.b)(Ee.a,{value:n,text:t,children:t},n)}))})]}),{text:{ok:"确定",cancel:"取消"}}).then((function(){u("".concat(location.origin,"/api/v4/materials/pc_editor/material-move"),{method:"POST",body:{folder_id:n,target_folder_id:e,folder_material_ids:d.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?i():de.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))}},children:"变更分类"}),d.length>0&&Object(r.b)(z,{onClick:function(){0!==d.length&&de.a.confirm(Object(r.c)("div",{className:"MaterialLibrary-alert",children:[Object(r.c)("h2",{children:["是否删除已选择共 ",d.length," 张图片？"]}),Object(r.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){var e="".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/materials");u(e,{method:"DELETE",body:{material_type:"image",folder_material_ids:d.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?i():de.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},children:"删除图片"})]}))},rt=function(e){var t=e.activeFolderId,n=e.getFoldersList,o=e.folders,i=Object(T.b)(),c=fe({itemKey:"uniqueId"}),s=c.materialList,l=c.paging,u=c.isLoading,d=c.setIsLoading,b=c.hasInited,h=c.setHasInited,p=c.isDrained,m=c.isPageError,v=c.setIsPageError,O=c.selectAllChecked,g=c.toggleSelectAll,j=c.reset,y=c.handleResponseErrorData,w=c.handleResponseData,C=c.chooseImage,x=c.insertImages,S=!s.length,k=Object(f.d)((function(){return d(!0),v(!1),i((null==l?void 0:l.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{offset:null==s?void 0:s.length,limit:24}))})),A=Object(f.d)((function(){return k().then(w).catch((function(e){y(e.payload)}))})),R=function(e){var r=e.target.files;if(null!=r&&r.length)if((null==r?void 0:r.length)>100)de.a.alert("添加图片请不要超过 100 张哦~");else{var a,o=[],c=Xe(r);try{var s=function(){var e=a.value;Object(Te.a)(e).then((function(a){Object(Ie.a)(a).then((function(a){(o=o.concat({name:null==e?void 0:e.name,source:null==a?void 0:a.original_hash})).length===r.length&&function(e){i("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{method:"POST",body:{material_type:"image",materials:e}}).then((function(e){var t,r;null!==(t=e.payload)&&void 0!==t&&t.success?n():de.a.alert((null===(r=e.payload)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧！")})).catch((function(e){var t,n,r;de.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))}(o)}))}))};for(c.s();!(a=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}}};Object(a.useEffect)((function(){!b&&t&&k().then(w).catch((function(e){y(e.payload,!0)})).finally((function(){h(!0)}))}),[b,h,t,k,w,y]);var E=S?!u&&Object(r.b)(tt,{handleUploadImage:R,isPageError:m,reset:j}):Object(r.c)(r.a,{children:[Object(r.c)(Y,{getContainer:function(e){return e},onLoad:A,isLoading:u,isDrained:p,children:[Object(r.b)(Me,{handleUploadImage:R},s.length),s.map((function(e,t){return Object(r.b)(le,{data:e,chooseImage:C,insertImages:x},String([e.uniqueId,t]))}))]}),Object(r.b)(nt,{dataList:s,folders:o,activeFolderId:t,getFoldersList:n,insertImages:x})]});return Object(r.c)(r.a,{children:[Object(r.b)(B,{children:Object(r.b)(F,{css:{marginLeft:"auto"},checked:O,onChange:g})}),b?E:Object(r.b)(N,{})]})},at=function(e){var t,n=Object(A.default)({},e),a=Ce(j.PRIVATE),o=a.hasInited,i=a.getFoldersList,c=a.reset,l=a.isPageError,u=a.folders,d=a.activeFolderId,b=a.setActiveFolderId,f=null===(t=u.child)||void 0===t?void 0:t.find((function(e){return e.id===d})),h=l?Object(r.b)(tt,{isPageError:!0,reset:c}):Object(r.b)(rt,Object.assign({folders:u,activeFolderId:d,getFoldersList:i},n),String([d,null==f?void 0:f.materialCount]));return Object(r.c)(s.Flex,{color:"GBL05A",css:{height:"530px",overflow:"hidden",fontSize:"12px"},children:[!l&&Object(r.b)(Ze,{folders:u,activeFolderId:d,folderClick:function(e){d!==e&&b(e)},getFoldersList:i,reset:c}),Object(r.b)(s.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px",flex:1}},n),{},{children:o?h:Object(r.b)(N,{css:{marginTop:42}})}))]})},ot=["dataList","deleteImages","insertImages"],it=function(e){var t=e.isPageError,n=e.reset,a=J().setTabType;return t?Object(r.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:n}):Object(r.b)(R.a.EI1A,{image:"default",content:"最近使用为空，请搜索网络素材或上传图片",buttonText:"上传图片",buttonOnClick:function(){a(j.PRIVATE)}})},ct=function(e){var t=e.dataList,n=e.deleteImages,a=e.insertImages,o=Object(v.default)(e,ot),i=(t||[]).filter((function(e){return!0===e.checked}));return Object(r.c)(s.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"}},o),{},{children:[Object(r.b)(D,{active:i.length>0,onClick:function(){a(i)},children:"插入选择图片"}),i.length>0&&Object(r.b)(z,{onClick:function(){0!==i.length&&de.a.confirm(Object(r.c)("div",{className:"MaterialLibrary-alert",children:[Object(r.c)("h2",{children:["是否删除已选择共 ",i.length," 张图片？"]}),Object(r.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){n(i.map((function(e){return e.materialId})))}),(function(){}))},children:"删除图片"})]}))},st=function(e){var t=Object(A.default)({},e),n=Object(T.b)(),o=fe({itemKey:"materialId"}),i=o.materialList,c=o.paging,l=o.isLoading,u=o.setIsLoading,d=o.hasInited,b=o.setHasInited,h=o.isDrained,p=o.isPageError,m=o.setIsPageError,v=o.selectAllChecked,O=o.toggleSelectAll,g=o.reset,j=o.handleResponseErrorData,y=o.handleResponseData,w=o.chooseImage,C=o.insertImages,x=!i.length,S=Object(f.d)((function(){return u(!0),m(!1),n((null==c?void 0:c.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{offset:null==i?void 0:i.length,limit:24,material_type:"image"}))})),k=Object(f.d)((function(){return S().then(y).catch((function(e){j(e.payload)}))})),R=Object(f.d)((function(e){return n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"DELETE",body:{material_type:"image",material_ids:e}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?g():de.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))})),E=Object(f.d)((function(e){de.a.confirm(Object(r.c)("div",{className:"MaterialLibrary-alert",children:[Object(r.b)("h2",{children:"是否从最近使用删除图片？"}),Object(r.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){R([e.materialId])}),(function(){}))}));Object(a.useEffect)((function(){d||S().then(y).catch((function(e){j(e.payload,!0)})).finally((function(){b(!0)}))}),[d,b,S,y,j]);var L=x?!l&&Object(r.b)(it,{isPageError:p,reset:g}):Object(r.c)(r.a,{children:[Object(r.b)(Y,{getContainer:function(e){return e},onLoad:k,isLoading:l,isDrained:h,children:i.map((function(e,t){return Object(r.b)(le,{data:e,chooseImage:w,insertImages:C,deleted:e.deleted,deleteSingleImage:E},String([e.materialId,t]))}))}),Object(r.b)(ct,{dataList:i,deleteImages:R,insertImages:C})]});return Object(r.c)(s.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:[Object(r.b)(B,{children:Object(r.b)(F,{css:{marginLeft:"auto"},checked:v,onChange:O})}),d?L:Object(r.b)(N,{})]}))},lt=(et={},Object(m.a)(et,j.EMOTICON,ge),Object(m.a)(et,j.PUBLIC,Re),Object(m.a)(et,j.PRIVATE,at),Object(m.a)(et,j.LATEST,st),et),ut=function(e){var t=e.onClose,n=e.sourceType,o=e.sourceId,i=e.insertImage,c=Object(a.useState)(j.EMOTICON),s=Object(u.a)(c,2),l=s[0],d=s[1],b=lt[l];return Object(r.b)(X,{onClose:t,sourceType:n,sourceId:o,insertImage:i,setTabType:d,children:Object(r.c)("div",{children:[Object(r.b)(k,{tabType:l,tabChange:d}),b&&Object(r.b)(p.b,{block:l,children:Object(r.b)(b,{})})]})})};ut.propTypes={sourceType:b.a.string,sourceId:b.a.number,onClose:b.a.func,insertImage:b.a.func};var dt=ut,bt=function(e,t){var n=e.sourceType,o=e.sourceId,i=e.insertImage,c=Object(a.useState)(!1),s=Object(u.a)(c,2),l=s[0],d=s[1],b=Object(f.d)((function(){return d((function(e){return!e}))}));return Object(a.useImperativeHandle)(t,(function(){return{toggleShown:b}}),[b]),Object(r.b)(h.b,{css:{minWidth:"746px",".Modal-content":{margin:0,padding:0}},onClose:b,children:l&&Object(r.b)(p.b,{block:"MaterialLibrary",children:Object(r.b)(dt,{onClose:b,sourceType:n,sourceId:o,insertImage:i})})})};bt.propType={sourceType:b.a.string.isRequired,sourceId:b.a.number.isRequired,insertImage:b.a.func.isRequired};var ft=Object(a.forwardRef)(bt);t.a=function(e){var t=e.sourceType,n=e.sourceId,a=o.a.createRef(null),u={},d=!1,b=null;return{initialize:function(e){Object.assign(u,e)},components:[Object(r.b)(ft,{ref:a,sourceType:t,sourceId:n,insertImage:function(e){var t;t=function(){for(var t=0;t<e.length;t++)n={value:e[t]},d?b=Object(c.a)(b,"image","IMMUTABLE",{upload:n,size:"normal"}):u.setEditorState(Object(c.a)(u.getEditorState(),"image","IMMUTABLE",{upload:n,size:"normal"}));var n},d=!0,b=u.getEditorState(),t(),u.setEditorState(b),d=!1}},"material_library")],handleCommand:function(e){var t;return"insert-image-from-library"===e?(null===(t=a.current)||void 0===t||t.toggleShown(),"handled"):"not-handled"},toolbarV2:[{section:i.a.BASIC_MEDIA,parentName:"image",label:"图片库",text:Object(r.c)(s.Flex,{alignItems:"center",css:{position:"relative",width:"66px"},children:["图片库",Object(r.b)(l.a,{css:function(e){return{position:"absolute",top:"2px",right:"-11px",fill:"".concat(e.colors.GBL01A)}},isNewBefore:new Date(2021,9,28)})]}),priority:2,onClick:function(){var e;null===(e=a.current)||void 0===e||e.toggleShown()}}]}}},1729:function(e,t,n){"use strict";n.d(t,"a",(function(){return It}));var r=n(49),a=n(208),o=n(15),i=n(16),c=n(77),s=n(17),l=n(18),u=n(9),d=n(1),b=n(3),f=n.n(b),h=n(0),p=n(26),m=n(19),v=n(41),O=n(12),g=n.n(O),j=n(61),y=n(209),w=n.n(y),C=n(1414),x=n(2250),S=n(2248),k=n(2251),A=n(2252),R=n(289),T=n(278),I=n(160),E=n(139),B=n(45),N=n.n(B),L=n(415),D=n(1147),M=n(224),z=n(161),P=n(981),_=n(35),F=n(74),U=n(1216),V=n(1655),H=n(1657),q=n(1737),G=n(492),K=n(502),W=n(527),Q=n(121),Y=n(79),Z=n(483),J=n(29),X=n(46),$=n(57),ee=n(432),te=n(449),ne=n(1148),re=n(83),ae=n(1592),oe=n(994),ie=n(430),ce=n(38),se=n(1442),le=n(1347),ue=n(958),de=n(215);function be(e){var t=e.isAnonymous,n=e.handleToggleAnonymous,r=e.isSmall,a=e.isReport;return Object(d.b)(de.c,{id:"publish-anonymous-setting",css:r?{transform:"scale(0.5)"}:{},checked:t,onChange:n,forceControlled:!0,disabled:a})}var fe=n(919);function he(e){var t=e.isSmall,n=Object(h.useContext)(ue.a),r=n.updateFormData,a=(0,n.getFormData)().pushActivity,o=Object(fe.a)();Object(h.useEffect)((function(){r({pushActivity:void 0===a||a})}),[a,r]);return Object(d.b)(de.c,{css:t?{transform:"scale(0.5)"}:{},checked:a,onChange:function(e){var t=e.target.checked;_.a.trackEvent(null,{id:8361,action:"Click"},{button:{text:t?"开":"关"}}),t?r({pushActivity:!0}):(_.a.trackCardShow(null,{id:8362}),o.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",ok:"关闭推送"}).then((function(){_.a.trackEvent(null,{id:8363,action:"Click"}),r({pushActivity:!1})})).catch((function(){})))},forceControlled:!0,id:"publish-push-to-followers"})}var pe=n(887),me=n(871),ve=n(44),Oe=n(122),ge=n(36),je=n(86),ye=function(e){var t=e.openModal,n=e.handleHelpClick,r=function(e){n(e)};return Object(d.b)(je.b,{title:"商业内容推广",subtitle:"",onClose:function(){r(!1)},className:"DisclaimerEntry-helpWrap",children:t&&Object(d.c)("div",{children:[Object(d.b)("div",{className:"DisclaimerEntry-helpContent",children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),Object(d.b)("div",{className:"DisclaimerEntry-helpContent",children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),Object(d.c)("div",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",Object(d.b)(j.Link,{href:"https://www.zhihu.com/creator/explore/academy/income/rights",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"欢迎前往了解"})]}),Object(d.b)("button",{className:"DisclaimerEntry-helpBtn",onClick:function(){r(!1)},children:"我知道了"})]})})},we=n(1006),Ce=n(1658),xe=function(){var e=Object(h.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{color:"GBL05A",alignItems:"center",flex:"0 0 80px",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:14,fontWeight:"bold",css:{whiteSpace:"nowrap"},children:"商业推广"}),Object(d.b)(F.a,{as:ge.c,zaAction:"Unknown",zaText:"商业推广帮助",zaType:"Button",style:{border:"none",width:"5px"},onClick:function(){a(!0)},children:Object(d.b)(pe.a,{text:!0,center:!0,css:{cursor:"pointer"}})})]}),Object(d.b)(ye,{openModal:n,handleHelpClick:function(){return a(!1)}})]})},Se=function(e){var t=e.isSmall,n=e.positionStatus,a=e.bizExtendsInfo,o=e.isReport,i=e.updateBizVipStatus,c=e.isAnonymous,s=e.menuClassName,l=e.itemClassName,u=Object(ve.a)(!1),b=Object(r.a)(u,2),f=b[0],h=b[1],m=Object(p.useDispatch)();return Object(d.c)(d.a,{children:[Object(d.b)(Oe.c,{positionStatus:n,toggler:Object(d.c)(j.Flex,Object.assign(Object.assign({alignItems:"center",color:"GBL05A",fontSize:t?12:13,css:{position:"relative",cursor:"pointer"}},t&&{marginLeft:"8px",padding:"0 10px",height:20,bg:"GBK10A",css:{borderRadius:10}}),{},{children:[Object(d.b)(j.Text,{mr:"4px",color:t?"GBL05A":"GBK06A",children:o?"商业推广":"非商业推广"}),Object(d.b)(me.a,{text:!0,center:!0})]})),menuClassName:s,itemClassName:l,children:[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}].map((function(e){return Object(d.b)(we.a,{onClick:function(){c?m(Object(J.h)("已经启用匿名的内容不能进行商业推广声明","red")):!0!==e.type||null!=a&&a.isCommercialVip?i(e.type):h.on()},checked:e.type===o,children:e.description},e.type)}))}),Object(d.b)(Ce.a,{shown:f,toggle:h.toggle,onSuccess:function(){i(!0)},onFail:function(){i(!1)}})]})},ke=n(4),Ae=function(e){var t=e.openModal,n=e.handleHelpClick,r=function(e){n(e)};return Object(d.b)(je.b,{title:"什么是「创作声明」？",subtitle:"",onClose:function(){r(!1)},className:"DisclaimerEntry-helpWrap",children:t&&Object(d.c)("div",{children:[Object(d.c)("div",{className:"DisclaimerEntry-helpContent",children:[Object(d.b)("span",{className:"DisclaimerEntry-helpContentBold",children:"「创作声明」"}),"是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"]}),Object(d.b)("button",{className:"DisclaimerEntry-helpBtn",onClick:function(){r(!1)},children:"我知道了"})]})})},Re={type:"none",description:"无声明"},Te=function(){var e=Object(h.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{color:"GBL05A",alignItems:"center",flex:"0 0 76px",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:14,fontWeight:"bold",css:{whiteSpace:"nowrap"},children:"创作声明"}),Object(d.b)(pe.a,{text:!0,center:!0,css:{cursor:"pointer"},onClick:function(){a(!0),_.a.trackEvent(null,{id:5604,action:"Click"}),_.a.trackEvent(void 0,{id:7840,action:"Click"})}})]}),Object(d.b)(Ae,{openModal:n,handleHelpClick:function(){return a(!1)}})]})},Ie=function(e){var t=e.question,n=e.answer,r=e.isSmall,a=e.positionStatus,o=Object(h.useContext)(ue.a),i=o.getFormData,c=o.updateFormData,s=Object(p.useDispatch)(),l=Object(p.useSelector)((function(e){return e.question.disclaimers[t.id]})),u=i().disclaimerType,b=null==l?void 0:l.find((function(e){return e.type===u})),f=Object(p.useSelector)((function(e){return Object(Y.d)(e,null==n?void 0:n.id)})),m=(null==l?void 0:l.length)>0&&(!(null!=n&&n.id)||f);Object(h.useEffect)((function(){f&&c(function(e){var t,n,r,a,o="open"===(null==e||null===(t=e.disclaimerInfo)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status);return{isDisclaimerChecked:o,disclaimerType:o?null==e||null===(r=e.disclaimerInfo)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.type:"none"}}(f))}),[Boolean(f)]),Object(h.useEffect)((function(){l||s(Object(Q.P)(t.id))}),[]);return m?Object(d.b)(Oe.c,{positionStatus:a,toggler:Object(d.c)(j.Flex,Object.assign(Object.assign({alignItems:"center",color:"GBL05A",fontSize:r?12:13,css:{position:"relative",cursor:"pointer"}},r&&{marginLeft:"8px",padding:"0 10px",height:20,bg:"GBK10A",css:{borderRadius:10}}),{},{children:[Object(d.b)(j.Text,{mr:"4px",color:r?"GBL05A":"GBK06A",children:(null==b?void 0:b.description)||Re.description}),Object(d.b)(me.a,{text:!0,center:!0})]})),menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:[].concat(Object(ke.a)(l),[Re]).map((function(e){return Object(d.b)(we.a,{onClick:function(){return function(e){c({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type})}(e)},checked:e.type===u,children:e.description},e.type)}))}):null},Ee=n(413),Be=n(2249);function Ne(e){var t=e.setShowCampaignModal,n=e.allowSelectCampaign,r=e.resetCampaign,a=Object(ee.q)(),o=n&&null!=a&&a.title?"GBL01A":"GBL05A";return Object(d.c)(j.Flex,{alignItems:"center",color:"GBL05A",fontSize:"14px",ml:"16px",css:{cursor:"pointer"},children:[Object(d.b)("span",{children:"绑定活动"}),Object(d.b)(j.Flex,{alignItems:"center",p:"3px 10px",ml:"8px",fontSize:"12px",color:o,css:function(e){return{borderRadius:"13px",background:e.colorMod(e.colors[o]).alpha(.08),cursor:n?"pointer":"not-allowed"}},children:null!=a&&a.title?Object(d.c)(d.a,{children:[n&&Object(d.b)(Ee.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){r()}}),Object(d.b)("span",{role:"button",tabIndex:0,onClick:function(){n&&t(!0)},children:a.title})]}):Object(d.b)("span",{role:"button",tabIndex:0,onClick:function(){n&&t(!0)},children:"选择活动"})})]})}function Le(e){var t=e.setShowCampaignModal,n=e.allowSelectCampaign;return Object(d.c)(j.Flex,{alignItems:"center",fontSize:"13px",color:"GBK06A",css:{cursor:n?"pointer":"not-allowed"},onClick:function(){n&&t(!0)},children:[Object(d.b)(Be.a,{mr:4,size:20}),"选择活动"]})}function De(e){var t=e.setShowCampaignModal,n=e.allowSelectCampaign,r=e.resetCampaign,a=Object(ee.q)(),o=n?"GBL01A":"GBL05A";return Object(d.c)(j.Flex,{alignItems:"center",p:"6px 14px",color:o,fontSize:"13px",css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[o]).alpha(.1),cursor:"pointer"}},onClick:function(){n&&t(!0)},children:[Object(d.b)(Be.a,{mr:4,size:20}),a.title,n&&Object(d.b)(Ee.a,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){r(),e.stopPropagation()}})]})}var Me=n(288);function ze(e){var t=e.title,n=e.isSecondary,r=e.customTitle,a=e.children;return Object(d.c)(j.Flex,{pl:n?"20px":0,py:"20px",justifyContent:"space-between",alignItems:"center",css:function(e){return Object.assign({},Object(re.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},children:[r||Object(d.b)(j.Text,{color:"GBL05A",fontSize:14,fontWeight:"bold",children:t}),a]})}var Pe=n(2),_e=n(940),Fe={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},Ue={all:"允许任何人评论",follower:"允许关注我的人评论",followee:"允许我关注的人评论",paid:"付费用户可评论",censor:"答主筛选显示",nobody:"禁止评论"},Ve=function(e){var t=e.checked,n=e.onChange,r=e.text,a=e.disabled;return Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",as:"label",children:[Object(d.b)(_e.a,{size:12,checked:t,onChange:n,disabled:a}),Object(d.b)(j.Text,{ml:"4px",fontSize:13,children:r})]})};function He(){var e=Object(p.useSelector)(X.h),t=Object(h.useContext)(ue.a),n=t.updateFormData,a=(0,t.getFormData)().commentPermission,o=Object(h.useState)("all"),i=Object(r.a)(o,2),c=i[0],s=i[1],l="all"!==c;Object(h.useEffect)((function(){a&&s(a)}),[a]);var u=function(e){e!==c&&(s(e),e&&n({commentPermission:e}))},b=e?Fe:Object.keys(Ue).filter((function(e){if("paid"!==e)return"follower"!==e})).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(Pe.a)({},t,Ue[t]))}),{});return Object(d.c)(d.a,{children:[Object(d.b)(ze,{title:"评论限制",children:Object(d.b)(de.c,{checked:l,onChange:function(){u(l?"all":Object.keys(b)[1])},forceControlled:!0})}),Object(d.b)(ze,{title:"限制类型",isSecondary:!0,children:Object(d.b)(j.Flex,{justifyContent:"space-between",css:{opacity:l?1:.3},children:Object.keys(b).map((function(e){return"all"===e?null:Object(d.b)(Ve,{text:b[e],checked:e===c,onChange:function(t){t.target.checked&&u(e)},disabled:!l},e)}))})})]})}var qe={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ge=function(e){var t=e.checked,n=e.onChange,r=e.text,a=e.disabled;return Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",as:"label",children:[Object(d.b)(_e.a,{disabled:a,size:13,checked:t,onChange:n}),Object(d.b)(j.Text,{ml:"4px",fontSize:13,children:r})]})};function Ke(e){var t=e.currentUser,n=Object(h.useContext)(ue.a),a=n.updateFormData,o=(0,n.getFormData)(),i=o.isCopyable,c=o.reshipmentSettings,s=Object(h.useState)("allowed"),l=Object(r.a)(s,2),u=l[0],b=l[1],f="disallowed"!==u;Object(h.useEffect)((function(){!1===i&&b("disallowed")}),[i]),Object(h.useEffect)((function(){c?b(c):t.caEnabled&&b("need_payment")}),[c,t]);var p=function(e){"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),b(e),a({reshipmentSettings:e})};return Object(d.c)(d.a,{children:[Object(d.b)(ze,{title:"允许转载",children:Object(d.b)(de.c,{checked:f,onChange:function(){p(f?"disallowed":t.caEnabled?"need_payment":"allowed")},forceControlled:!0})}),Object(d.b)(ze,{title:"转载设置",isSecondary:!0,children:Object(d.b)(j.Flex,{css:{opacity:f?1:.3},children:Object.keys(qe).map((function(e){return"disallowed"===e||"need_payment"===e&&t.isOrg?null:Object(d.b)(Ge,{disabled:!f,text:qe[e],checked:e===u,onChange:function(t){t.target.checked&&p(e)}},e)}))})})]})}var We=n(1762),Qe=n(446),Ye=function(e){var t,n=Object(X.b)(e),r=Object.values(e.entities.answers).filter((function(e){var t;return(null===(t=e.author)||void 0===t?void 0:t.urlToken)===(n&&n.urlToken)}))[0]||{};return null==r||null===(t=r.rewardInfo)||void 0===t?void 0:t.tagline};function Ze(e){var t=e.answer,n=(t=void 0===t?{}:t).rewardInfo,a=(n=void 0===n?{}:n).isRewardable,o=void 0!==a&&a,i=e.question,c=i.id,s=i.relationship.isAnonymous,l=e.isAnswerRewardable,u=Object(h.useState)(!1),b=Object(r.a)(u,2),f=b[0],m=b[1],v=Object(p.useSelector)(Ye),O=Object(h.useState)(!1),g=Object(r.a)(O,2),j=g[0],y=g[1],w=Object(h.useContext)(ue.a),C=w.getFormData,x=w.updateFormData,S=Object(p.useDispatch)(),k=C(),A=k.canReward,R=k.rewardTagline,T=Object(h.useState)(o||R),I=Object(r.a)(T,2),E=I[0],B=I[1];Object(h.useEffect)((function(){A&&B(!0)}),[A]);return Object(h.useEffect)((function(){x({rewardTagline:v})}),[v,x]),Object(h.useEffect)((function(){l&&(N.a.get("rewardNotication")||(y(!0),N.a.set("rewardNotication",!0)))}),[l]),Object(ve.l)((function(){return y(!1)}),j?2e3:null),l?Object(d.c)(d.a,{children:[Object(d.b)(de.c,{checked:E,onChange:function(e){if(!s)return!e.target.checked||R?(x({rewardTagline:""}),B(!1),void S(Object(Qe.n)(c,!1))):void m(!0);S(Object(J.h)("匿名回答无法开启赞赏，请先取消匿名","red"))},forceControlled:!0}),f&&Object(d.b)(We.a,{submitRewardText:function(e){x({rewardTagline:e}),B(!0),S(Object(Qe.n)()),m(!1)},onClose:function(){return m(!1)},tagline:R,edit:!1})]}):null}var Je=n(645),Xe=n(1074);function $e(e){var t=e.setScheduledPublish,n=Object(h.useRef)(),r=new Date;return Object(d.b)(Xe.a,{css:function(e){return{fontSize:13,color:e.colors.GBL05A}},onRef:n,value:r,min:r,max:Je.a(r,7),onChange:function(e,r){t(!0,e),_.a.setModule(n.current,{module:"Unknown",module_name:r.date?"日期":r.hours?"小时":r.minutes?"分钟":void 0}),_.a.trackEvent(n.current,{action:"Click",id:5731,name:"回答"})}})}var et=n(1591),tt=n(419),nt=n(1735),rt=function(e){var t=e.questionId,n=e.currentUser,r=Object(p.useSelector)((function(e){return e.question.bio})),a=Object(p.useSelector)((function(e){return e.topic.bios})),o=(r[t]||{result:{type:"headline"}}).result;return"topic"===o.type&&(o.bio=a[o.topic.id]||o.bio),o.bio&&"headline"!==o.type?o.bio:n.headline?Object(d.b)(tt.a,{inline:!0,html:(o||{}).bio||n.headline}):""};function at(e){var t=e.question,n=e.currentUser,a=Object(h.useState)(!1),o=Object(r.a)(a,2),i=o[0],c=o[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{maxWidth:454,color:"GBL05A",alignItems:"center",css:{cursor:"pointer"},onClick:function(){c(!0)},children:[Object(d.b)(et.a,{size:20}),Object(d.b)(j.Text,{ml:"5px",fontSize:13,color:"GBK06A",css:[Object(re.d)(1)],children:Object(d.b)(rt,{questionId:t.id,currentUser:n})})]}),Object(d.b)(nt.a,{shown:i,question:t,onClose:function(){return c(!1)}})]})}function ot(e){var t=e.question,n=e.answer,r=e.settingExpanded,a=e.positionStatus,o=e.setScheduledPublish,i=e.canScheduledPublish,c=e.shouldShowAnonymousButton,s=e.handleToggleAnonymous,l=e.isReediting,u=e.isAnonymous,b=e.setShowCampaignModal,f=e.allowSelectCampaign,m=e.isNotOrgUser,v=e.currentUser,O=e.isVideoAnswer,g=e.resetCampaign,j=e.isReport,y=e.bizExtendsInfo,w=e.updateBizVipStatus,C=Object(p.useDispatch)(),x=Object(p.useSelector)((function(e){return e.switches})).isAnswerRewardable,S=Boolean(t||n)&&!(null!=n&&n.id),k=Object(ee.q)();Object(h.useEffect)((function(){void 0===x&&C(Object(Me.b)(["isAnswerRewardable"]))}),[C,x]);var A=Object(h.useMemo)((function(){return null!=k&&k.title?De:Le}),[null==k?void 0:k.title]);return Object(d.c)("div",{css:{maxHeight:r?"auto":0,overflowY:"hidden"},children:[!O&&Object(d.b)(ze,{customTitle:Object(d.b)(Te,{}),children:Object(d.b)(Ie,{question:t,answer:n,positionStatus:a})}),c&&!l&&Object(d.b)(ze,{title:"启用匿名",children:Object(d.b)(be,{isAnonymous:u,answer:n,handleToggleAnonymous:s,isReport:j})}),(null==y?void 0:y.isShowTab)&&Object(d.b)(ze,{customTitle:Object(d.b)(xe,{}),children:Object(d.b)(Se,{positionStatus:a,isReport:j,bizExtendsInfo:y,updateBizVipStatus:w,isAnonymous:u,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"})}),!l&&i&&Object(d.b)(ze,{title:"定时发布",children:Object(d.b)($e,{setScheduledPublish:o})}),O&&Object(d.b)(ze,{title:"绑定活动",children:Object(d.b)(A,{resetCampaign:g,setShowCampaignModal:b,campaign:k,allowSelectCampaign:f})}),!l&&m&&Object(d.b)(ze,{title:"编辑一句话介绍 / 话题经验",children:Object(d.b)(at,{question:t,currentUser:v})}),(t||n)&&x&&Object(d.b)(ze,{title:"开启赞赏",children:Object(d.b)(Ze,{question:t,answer:n,isAnswerRewardable:!0})}),S&&!O&&Object(d.b)(ze,{title:"推送给关注者",children:Object(d.b)(he,{})}),!l&&Object(d.c)(d.a,{children:[Object(d.b)(Ke,{currentUser:v}),Object(d.b)(He,{})]})]})}var it=Object(v.withRouter)((function(e){var t,n,a,o=e.question,i=e.answer,c=e.isVideoAnswer,s=e.handleToggleAnonymous,l=e.positionStatus,u=e.isReediting,b=e.settingExpanded,f=e.handleExpand,m=e.isFullScreen,v=e.inEditor,O=e.location,g=Object(p.useDispatch)(),y=Object(h.useContext)(ue.a),w=y.updateFormData,C=y.getFormData,x=((null==O?void 0:O.query)||{}).push_activity,S=Object(ee.q)(),k=Object(p.useSelector)(X.b),A=null==i||null===(t=i.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,R=Boolean(!A||!A.title),T=Object(h.useState)(!1),I=Object(r.a)(T,2),E=I[0],B=I[1],N=Object(h.useState)([]),L=Object(r.a)(N,2),D=L[0],M=L[1],z=Object(h.useState)({}),P=Object(r.a)(z,2),_=P[0],U=P[1],V=C().isReport;Object(h.useEffect)((function(){g(Object(ie.l)()).then((function(e){var t=e.payload;M(t.data)}))}),[g]),Object(h.useEffect)((function(){g(Object(se.b)(null==o?void 0:o.id)).then((function(e){var t=e.payload;U(t.commercialPermissionInfo)}))}),[g,null==o?void 0:o.id]),Object(h.useEffect)((function(){null!=i&&i.id&&g(Object(Y.y)(null==i?void 0:i.id)).then((function(e){var t,n=e.payload;w({isReport:null===(t=n.commercialReportInfo)||void 0===t?void 0:t.isReport})})),null!=o&&o.id&&g(Object(ce.Y)(null==o?void 0:o.id)).then((function(e){var t=e.payload;w(null==t?void 0:t.settings)})),g(Object(ce.X)()).then((function(e){var t=e.payload;w(Object.assign(Object.assign({},null==t?void 0:t.settings),x&&{pushActivity:Boolean(Number(x))}))}))}),[g,null==i?void 0:i.id,w,null==o?void 0:o.id]);var H=Object(h.useCallback)((function(e){B(!1),g(Object(ee.m)(e))}),[g]),q=Object(h.useCallback)((function(){g(Object(ee.m)(null))}),[g]),G=function(e,t){w({isReport:e}),e&&t&&g(Object(se.b)(null==o?void 0:o.id)).then((function(e){var t=e.payload;U(t.commercialPermissionInfo)}))},K=null==o||null===(a=o.relationship)||void 0===a?void 0:a.isAnonymous,W="show"===Object($.useAbParam)("gue_anonymous"),Q=(o||{}).questionType,Z=k&&!k.isOrg,J=Z&&("normal"===Q||"commercial"===Q&&W||K)&&!c;return c&&u?null:Object(d.c)(j.Box,Object.assign(Object.assign({p:"0 20px",width:"100%"},m&&{mx:"auto",maxWidth:688}),{},{bg:"GBK99A",css:function(e){return Object.assign(Object.assign({position:"relative"},b?Object(re.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}):{boxShadow:"0 -1px 3px ".concat(e.colorMod(e.colors.GBK02B).alpha(.12))}),(v&&!b||!v&&b)&&{height:0,overflow:"hidden"})},children:[Object(d.c)(j.Flex,{py:"13px",justifyContent:"space-between",alignItems:"center",css:function(e){return Object.assign({whiteSpace:"nowrap"},Object(re.c)({borderBottom:"1px solid ".concat(e.colors.GBK09A)}))},children:[Object(d.c)(j.Flex,{alignItems:"center",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:15,fontWeight:"bold",color:"GBK03A",children:"发布设置"}),!b&&c&&Object(d.b)(Ne,{setShowCampaignModal:B,allowSelectCampaign:R,resetCampaign:q}),!b&&!c&&Object(d.c)(d.a,{children:[!(null!=_&&_.isShowTab)&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(Te,{}),Object(d.b)(Ie,{isSmall:!0,question:o,answer:i,positionStatus:l})]}),J&&!u&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(j.Text,{as:"label",htmlFor:"publish-anonymous-setting",fontSize:14,fontWeight:"bold",color:"GBL05A",children:"启用匿名"}),Object(d.b)(be,{isSmall:!0,isAnonymous:K,answer:i,handleToggleAnonymous:s,isReport:V})]}),!u&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(j.Text,{as:"label",htmlFor:"publish-push-to-followers",fontSize:14,fontWeight:"bold",color:"GBL05A",children:"推送给关注者"}),Object(d.b)(he,{isSmall:!0})]}),(null==_?void 0:_.isShowTab)&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(xe,{}),Object(d.b)(Se,{isSmall:!0,positionStatus:l,bizExtendsInfo:_,isReport:V,isAnonymous:K,updateBizVipStatus:G,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"})]})]})]}),Object(d.c)(F.a,{as:j.Flex,zaAction:"Unknown",zaText:b?"收起":"全部设置",zaType:"Button",alignItems:"center",color:"GBL05A",css:{cursor:"pointer"},onClick:f,children:[Object(d.b)(j.Text,{fontSize:14,mr:"4px",children:b?"收起":"全部设置"}),b?Object(d.b)(ae.a,{size:20,center:!0}):Object(d.b)(oe.a,{size:20,center:!0})]})]}),Object(d.b)(ot,Object.assign(Object.assign({},e),{},{settingExpanded:b,shouldShowAnonymousButton:J,isAnonymous:K,setShowCampaignModal:B,allowSelectCampaign:R,isNotOrgUser:Z,currentUser:k,resetCampaign:q,isReport:V,bizExtendsInfo:_,updateBizVipStatus:G})),Boolean(null==D?void 0:D.length)&&Object(d.b)(le.a,{shown:E,onClose:function(){B(!1)},defaultCampaignId:null==S?void 0:S.id,campaignList:D,onSubmit:H})]}))})),ct=n(1659),st=n(945),lt=n(1758),ut=n(1738),dt=n(1759),bt=n(1747),ft=n(1750),ht=n(1727),pt=n(1217),mt=n(1660),vt=n(2796),Ot=n(883),gt=n(915),jt=n(30),yt=n(1662),wt=function(e){var t=e.question,n=Object(p.useSelector)(X.b);return t.relationship.isAnonymous?Object(d.b)(gt.a,{className:"AnswerAdd-info",noLink:!0,author:jt.h}):n&&n.isOrg?Object(d.b)(gt.a,{className:"AnswerAdd-info",noLink:!0,author:n}):Object(d.b)(gt.a,{className:"AnswerAdd-info",noLink:!0,author:n,children:Object(d.b)(j.Text,{color:"GBK04A",children:Object(d.b)(rt,{questionId:t.id,currentUser:n})})})};function Ct(e){var t=e.question,n=e.handleHistoryVersion,r=e.handleImportDoc,a=Object(h.useRef)();return Object(d.c)(d.a,{children:[Object(d.b)(yt.a,{editorFrom:"answer-pc-editor"}),Object(d.c)(j.Flex,{p:"11px 20px",justifyContent:"space-between",mx:"auto",width:"100%",maxWidth:688,children:[Object(d.b)(wt,{question:t}),Object(d.c)(j.Flex,{justifyContent:"center",alignItems:"center",p:"7px 12px",height:34,fontSize:14,fontWeight:500,color:"GBL05A",bg:"GBK10A",css:{borderRadius:3},children:[Object(d.c)(F.a,{as:j.Text,zaAction:"Unknown",zaText:"文档导入",zaType:"Button",pr:"8px",css:function(e){return{cursor:"pointer",borderRight:"1px solid ".concat(e.colors.GBK08A)}},onClick:r,children:[Object(d.b)(vt.a,{center:!0,text:!0,css:{marginRight:4}}),"文档导入"]}),Object(d.b)(Oe.c,{arrowed:!1,toggler:Object(d.b)(ge.c,{preset:"plain",onRef:a,children:Object(d.b)(Ot.a,{css:{paddingLeft:8,position:"relative",top:1}})}),children:Object(d.b)(F.a,{as:Oe.b,zaAction:"Unknown",zaText:"历史版本",zaType:"Button",onClick:n,css:{padding:"10px 20px"},children:"历史版本"})})]})]})]})}var xt,St=n(1444),kt=n(1443);n(1663);function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Rt=function(e){Object(s.a)(n,e);var t=At(n);function n(e,r){var i;Object(o.a)(this,n),(i=t.call(this,e,r)).editableReady=function(){var e=i.props,t=e.reporter,n=e.draft;t.reportSuccess(St.a.editableInit),n&&t.reportSuccess(St.a.draftLoad)},i.onCompositionStart=function(){i.composition=!0,i.syncDraft.cancel()},i.onCompositionEnd=function(){i.composition=!1,i.prevValue&&i.syncDraft(i.prevValue),i.prevValue=null},i.onChangeContent=function(e){i.loggingDeltaTime||(i.loggingDeltaTime=!0,i.startCompositionTime=Math.floor((new Date).getTime()/1e3)),i.hasEdited=!0,i.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),i.composition?i.prevValue=e:i.syncDraft(e)},i.onInsertDoc=function(){return i.editable.handleKeyCommand("insert-doc")},i.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var r=n.getRangeAt(0).cloneRange();r.collapse(t);var a=r.getBoundingClientRect();if(0===a.height){var o=r.commonAncestorContainer;1===o.nodeType&&(a=o.getBoundingClientRect())}if(0!==a.height){var i=a.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},i.onDeleteDraftModalShow=function(){i.setState({deleteDraftModalShown:!0})},i.onDeleteDraft=function(){var e=i.props,t=e.isReediting,n=e.activeTabKey;t||(n===U.a.videoAnswer?i.editable.clearAllContent():i.editable.reset(),i.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),i.deleteDraft();var r=i.props.onDeleteDraft;r&&r()},i.onDeleteDraftModalHide=function(){i.setState({deleteDraftModalShown:!1})},i.checkVideoSectionReady=function(e){if(!e)return I.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return I.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var r=i.editable.checkVideoStatus();if(r.isUploading)return I.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(r.hasError)return I.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},i.checkEditorContentReady=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading"),!1):i.editable.hasImage("upload")?(i.handleError("image-uploading"),!1):i.editable.hasImage("error")||i.editable.hasVideo("error")&&!i.editable.hasVideo("error-review")?(I.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!i.editable.hasVideo("error-review")&&!i.editable.hasVideo("censor")||(I.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},i.getSubmitData=function(e,t,n){var r,a=i.state.scheduledPublishAt,o=i.props,s=o.answer,l=o.disclaimers,u=o.settings,b=o.isReediting,f={content:t},h=(0,o.getFormData)(),p=h.isDisclaimerChecked,m=h.disclaimerType,v=h.rewardTagline,O=h.pushActivity,g=h.commentPermission,j=h.reshipmentSettings,y=h.isReport;if(!b){var w=i.props.currentUser.caEnabled?"need_payment":"allowed";f.reshipmentSettings=j||w,f.commentPermission=g||"all"}if(f.rewardSetting={canReward:Boolean(v),tagline:v},e)return{content:t,attachment:n,rewardSetting:f.rewardSetting,reshipmentSettings:f.reshipmentSettings,commentPermission:f.commentPermission};if(l&&l.length&&(!s||u)&&(f.disclaimerStatus=p?"open":"close",f.disclaimerType=m||"none"),f.commercialReportInfo={isReport:!!y},f.isReport=!!y,a){if(_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5733,name:"回答"}),C.a(a,x.a(new Date,30)))return void I.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});f.publishAt=Math.floor(a/1e3)+0}return void 0!==O&&(f.pushActivity=O),null!=n&&n.bizExt&&(f.bizExt=Object(ne.a)(n.bizExt)),f.tableOfContentsEnabled=i.editable.hasCatalog(),Object.assign(f,null===(r=i.editable)||void 0===r?void 0:r.getExtraPluginData()),f},i.canSubmit=function(){var e,t,n=null===(e=i.editable)||void 0===e?void 0:e.toHTML(),r=i.isVideoAnswer?null===(t=i.editable)||void 0===t?void 0:t.getAttachment():null;return i.isVideoAnswer?Boolean(r||n):Boolean(n)},i.handleSubmit=i.context.authRequired((function(){var e=i.props.reporter;e.reportRequest(St.a.addAnswer);try{var t,n=i.props,r=n.answer,a=n.draft,o=n.isReediting,s=n.onSubmit,l=n.showNotification,u=n.question,d=u.id,b=u.questionType,f=n.currentUser,h=n.updateSettingsDisclaimer,p=n.loadLabel,m=n.onCancel;if(!i.editable)return m(),void e.reportSuccess(St.a.addAnswer);if(!i.canSubmit())return void e.reportSuccess(St.a.addAnswer);var v=i.editable.toHTML(),O=i.isVideoAnswer?i.editable.getAttachment():null==a?void 0:a.attachment;if(i.isVideoAnswer&&!i.checkVideoSectionReady(O))return void e.reportSuccess(St.a.addAnswer);if(!i.checkEditorContentReady())return void e.reportSuccess(St.a.addAnswer);var g=i.getSubmitData(i.isVideoAnswer,v,Object.assign(Object.assign({},O),{},{campaign_id:null===(t=i.props.campaign)||void 0===t?void 0:t.id}));Promise.resolve(s(g)).then((function(){r&&g.disclaimerStatus&&h(r.id,g.disclaimerStatus,g.disclaimerType),r&&p("answer",r.id),"commercial"===b&&l("已发布！由品牌筛选后进入推荐区。"),e.reportSuccess(St.a.addAnswer)})).then((function(){_.a.trackCardShow(null,{id:7879}),o||_.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(d),author_member_hash_id:f.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(St.a.addAnswer,t),o||_.a.trackEvent(Object(c.a)(i),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var j=o?"Edit":"Answer";"Answer"===j&&_.a.trackEvent(Object(c.a)(i),{id:4930}),_.a.trackEvent(Object(c.a)(i),{action:j,is_intent:!1})}catch(t){throw e.reportFail(St.a.addAnswer,t),t}})),i.onCancel=function(){var e=i.props.onCancel;i.editable.hasVideo("upload")?i.handleError("video-uploading-draft"):i.editable.hasImage("upload")?i.handleError("image-uploading-draft"):(i.hasEdited&&i.syncDraftImmediately(),e&&e())},i.onFocus=function(){"org"===i.props.question.questionType&&i.shouldAnswerOrgQuestionModalShow&&i.handleAnswerOrgQuestionModalShow(),i.setState({focusing:!0})},i.onFocusWithAuth=function(){return i.onFocusAuthChecked?i.onFocus():(i.onFocusAuthChecked=!0,i.context.authRequired(i.onFocus)())},i.onSelectText=function(e){i.setState({selectedText:e.replace(/\s/g,"")})},i.onLoadStart=function(){i.setState({loadingShown:!0})},i.onLoadEnd=function(){i.setState({loadingShown:!1})},i.handleInsertZVideo=function(){i.setState({showInsertableVideoUploader:!0})},i.getAllInviters=function(){var e=i.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},i.getToolbarSidePlugins=function(){var e=i.state,t=e.isFullscreen,n=e.isLeaveActive;return(!t||n)&&Object(d.b)(R.a,{icon:Object(d.b)(S.a,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:i.toggleFullscreen},"enterFullscreen")},i.getToolbarMenuPlugins=function(){var e=i.state.scheduledPublishAt;return Object(d.b)(h.Fragment,{children:i.canUseScheduledPublish&&Object(d.c)(R.c,{onClick:function(){i.setUseScheduledPublish(!e),_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(k.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},i.setUseScheduledPublish=function(e,t){if(e)if(t)i.setState({scheduledPublishAt:t});else{var n=x.a(new Date,30);i.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else I.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){i.setState({scheduledPublishAt:void 0}),_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5737,name:"回答"})})).catch((function(){_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5736,name:"回答"})})),_.a.trackCardShow(Object(c.a)(i),{id:5735,name:"回答"})},i.getEditorState=function(){return i.editable.state.editorState?i.editable.state.editorState:i.editable.getEditorState()},i.toggleFullscreen=function(){var e=i.state.isFullscreen,t=function(){var e=i.scroller.querySelector(".Editable");return e?e.offsetTop:0};i.scrollTop=e?i.scroller.scrollTop-t():Math.max(-i.scroller.getBoundingClientRect().top,0),i.setState({isFullscreen:!e},(function(){i.state.isFullscreen?i.scrollTop>0&&(i.scroller.scrollTop=i.scrollTop+t()):window.scrollTo(0,i.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+i.scrollTop)}))},i.exitFullscreen=function(){i.cloneEditor.resetWithValue(i.getCloneContent());i.fullscreenContent.addEventListener("animationend",(function e(){i.fullscreenContent.removeEventListener("animationend",e),i.setState({isLeaveActive:!1}),i.toggleFullscreen()})),i.setState({isLeaveActive:!0})},i.handleFullscreenRef=function(e){e?M.hide():(M.show(),i.setState({isToolbarSticky:!1}))},i.handleScroll=function(){i.isHandleScrollPending||(i.isHandleScrollPending=!0,requestAnimationFrame((function(){var e=i.state,t=e.isFullscreen,n=e.isToolbarSticky,r=!1;if(t&&i.scroller){var a=i.scroller.querySelector(".Editable-toolbar");r=!!a&&i.scroller.scrollTop===a.offsetTop}r!==n&&i.setState({isToolbarSticky:r}),i.isHandleScrollPending=!1})))},i.handleUploadStart=function(){i.setState({isUploading:!0})},i.handleUploadEnd=function(){i.setState({isUploading:!1})},i.handleUploadError=function(e,t){switch(t){case"video":i.handleError("video-upload-error");break;case"image":i.handleError("image-upload-error",e)}},i.handleAnswerOrgQuestionModalShow=function(){i.setState({answerModalShown:!0}),i.shouldAnswerOrgQuestionModalShow=!1},i.handleAnswerModalHide=function(){i.setState({answerModalShown:!1})},i.syncDraftImmediately=i.props.reporter.recordError(St.a.draftSave,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.content,n=i.props,r=n.reporter,a=n.draft,o=i.state.lastUpdatedTime,s=t.toHTML(),l=Math.floor(Date.now()/1e3);e=!o||i.startCompositionTime-o>180?l-i.startCompositionTime:l-o,i.setState({isTyping:!1});var u,d=i.props.answer,b=(d=void 0===d?{}:d).attachment;u=i.videoAnswerEditable||"zvideo"===(null==b?void 0:b.type)?"video_answer":"video"===(null==b?void 0:b.type)?"video_answer_v2":"normal";var f=i.isVideoAnswer?t.getAttachment():null==a?void 0:a.attachment,h=i.isVideoAnswer?Boolean(f||s):Boolean(s);h?i.updateDraft(s,e,u,f).then((function(e){var t;null!=e&&null!==(t=e.payload)&&void 0!==t&&t.updatedTime&&i.setState({lastUpdatedTime:e.payload.updatedTime}),i.loggingDeltaTime=!1,r.reportSuccess(St.a.draftSave),_.a.trackEvent(Object(c.a)(i),{action:"AutoSave"})}),(function(e){throw r.reportFail(St.a.draftSave,e),e})).finally((function(){delete i.startCompositionTime})):(i.deleteDraft(),r.reportSuccess(St.a.draftSave))})),i.syncDraft=Object(D.a)(i.syncDraftImmediately,2e3),i.updateDraft=function(){for(var e=i.props,t=e.question.id,n=e.draft,r=e.addDraft,a=e.updateDraft,o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return n?a.apply(void 0,[t].concat(c)):r.apply(void 0,[t].concat(c))},i.focus=function(){i.editable&&i.editable.focus()},i.hasVideo=function(){return!!i.editable&&i.editable.hasVideo()},i.hasADLinkCard=function(){return!!i.editable&&i.editable.hasADLinkCard()},i.hasFeeConsultCard=function(){return!!i.editable&&i.editable.hasFeeConsultCard()},i.hasMCNLinkCard=function(){return!!i.editable&&i.editable.hasMCNLinkCard()},i.hasCommercialReport=function(){var e=i.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},i.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;i.setState({commentPermission:n})},i.handleReshipmentSettings=function(e){"need_payment"!==e||i.props.currentUser.caEnabled||window.open("/copyright/invite"),i.setState({reshipmentSettings:e})},i.handleError=function(e,t){Object(te.b)(e,t,i.props.showNotification)},i.handleBeforeVideoUpload=function(){var e=i.props.question;return!e.relationship||!e.relationship.isAnonymous},i.handleReverted=function(e){i.editable.resetWithValue(e.draft.content)},i.getDraftStatus=function(){var e=i.props.draft,t=i.state,n=t.isTyping,r=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&r<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):w()(xt||(xt=Object(a.a)(["草稿保存于",""])),Object(E.toRelativeString)(e.updatedTime)):""},i.handleSettingExpand=function(){var e=i.state.settingExpanded;i.setState({settingExpanded:!e},(function(){var t=i.expandedSettingsRef;if(i.state.isFullscreen){i.scroller.scrollTo(0,e?-(null==t?void 0:t.offsetTop):null==t?void 0:t.offsetTop)}else{var n=i.expandedSettingsRef;window.scrollTo(0,e?-(null==n?void 0:n.offsetTop):null==n?void 0:n.offsetTop)}e&&i.focus()}))},i.handleEditGGRCard=function(e){var t=e.type,n=e.payload,r=i.state.mcnEditingGood,a=i.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||i.setState({mcnEditingGood:null}):a(Object.assign(Object.assign({},r),{},{title:null==n?void 0:n.title})).finally((function(){i.setState({mcnEditingGood:null}),i.editable.handleCommand("edit-mcn-link-card:".concat(r.id))}))},i.showDraftHistoryModal=function(){i.editable.handleCommand("toggle-draft-history-modal")},i.createEditorPlugins=function(){var e,t,n;return[Object(ut.a)({type:"question",id:i.props.question.id,draftType:null!==(e=i.props.answer)&&void 0!==e&&e.id?"answer":void 0,draftId:null===(t=i.props.answer)||void 0===t?void 0:t.id,syncDraft:i.syncDraft}),Object(ft.a)({getShouldShowToolbarButton:function(){return!i.isVideoAnswer},getAllInviters:i.getAllInviters,inviterQuery:i.props.inviterQuery,getInitialThankInviterInfo:function(){return i.props.thankInviterInfo}}),Object(dt.a)({shouldDisabled:function(){return i.props.question.relationship.isAnonymous},shouldShow:function(){return i.props.showUserProfitButton&&!i.isVideoAnswer},getContentInfo:function(){var e;return{type:"answer",id:null===(e=i.props.answer)||void 0===e?void 0:e.id}}}),Object(bt.a)(),Object(ht.a)({sourceType:"answer",sourceId:null===(n=i.props.question)||void 0===n?void 0:n.id})]},i.renderRichInput=function(){var e=i.props,t=e.answer,n=(t=void 0===t?{}:t).attachment,r=e.answer,a=e.question,o=e.isReediting,c=e.isPuQuestion,s=e.draft,l=e.defaultValue,u=i.state,b=u.isToolbarSticky,f=u.isFullscreen,h=u.toolbarMenuAttention,p=u.scheduledPublishAt,m=u.initialScheduledPublishAt,v="".concat(o?"修改":"写","回答...");if("commercial"===a.questionType&&!c){v="这是一个「".concat("品牌提问","」，请在回答前了解：「").concat("品牌提问","」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。")}i.isVideoAnswer&&(v="详细介绍下视频（选填）");var O,g=i.videoAnswerEditable||"video_answer"===(null==s?void 0:s.type)||"zvideo"===(null==n?void 0:n.type);if(s)O=null==s?void 0:s.attachment;else if("zvideo"===(null==n?void 0:n.type))O=n.zvideo;else if("video"===(null==n?void 0:n.type)){var j;O=Object.assign(Object.assign({},null===(j=n.video)||void 0===j?void 0:j.videoInfo),{},{videoId:n.attachmentId})}var y={isToolbarSticky:b,ref:function(e){return i.editable=e},answer:r,question:a,isFullscreen:f,toolbarMenuAttention:h,scheduledPublishAt:p,initialScheduledPublishAt:m,placeholder:v,draft:s,defaultValue:l,isLegacyVideoAnswer:g,defaultVideo:O,videoAnswerEditable:i.videoAnswerEditable,videoAnswerPublished:i.videoAnswerPublished,editableReady:i.editableReady,handleChangeContent:i.onChangeContent,handleAfterChangeContent:i.onAfterChangeContent,handleFocusWithAuth:i.onFocusWithAuth,handleSelectText:i.onSelectText,handleSubmit:i.handleSubmit,handleError:i.handleError,handleLoadStart:i.onLoadStart,handleLoadEnd:i.handleLoadEnd,handleUploadStart:i.handleUploadStart,handleUploadEnd:i.handleUploadEnd,handleUploadError:i.handleUploadError,handleBeforeVideoUpload:i.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){i.setState({mcnEditingGood:t})},isVideoAnswer:i.isVideoAnswer,handleInsertZVideo:i.handleInsertZVideo,getToolbarSidePlugins:i.getToolbarSidePlugins,createEditorPlugins:i.createEditorPlugins,getToolbarMenuPlugins:i.getToolbarMenuPlugins,getEditorBeforePlugins:i.getEditorBeforePlugins,setUseScheduledPublish:i.setUseScheduledPublish};return Object(d.b)(mt.a,Object.assign({},y))};var s=i.props,l=s.defaultValue,u=s.draft,b=u?u.editableContent:l,f=u?u.updatedTime:0;return i.state={draft:b,content:{toHTML:function(){return""}},isEmpty:!b,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:f,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,footerPositionStatus:"",settingExpanded:!1},i.hasEdited=!1,i}return Object(i.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,r=e.activeTabKey;return t&&t.autoSendingCreations&&r===U.a.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.reporter,a=t.draft;n.reportRequest(St.a.editableInit),a&&n.reportRequest(St.a.draftLoad),this.shouldAnswerOrgQuestionModalShow=!V.a.getKnown(),this.onFocusAuthChecked=!1;var o=this.props,i=o.fillCurrentUserIfNeeded,c=o.getUserProfitPermission,s=i(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);c(),Promise.resolve(s).then((function(){G.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(t){var n=Object(r.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),G.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&_.a.trackCardShow(e,{id:5738}))})),_.a.trackCardShow(e,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.pending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return e.setState({dateNow:Date.now()})}),6e4);var l=this.props,u=l.answer,d=l.settings,b=l.loadSettings;u&&!d&&b(u.id),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus.bind(this),hasVideo:this.hasVideo.bind(this),hasADLinkCard:this.hasADLinkCard.bind(this),hasMCNLinkCard:this.hasMCNLinkCard.bind(this),hasFeeConsultCard:this.hasFeeConsultCard.bind(this),toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!e.state.isEmpty}})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,r=this.state,a=e.currentUser,o={};r.reshipmentSettings||void 0===a.caEnabled||(o.reshipmentSettings=a.caEnabled?"need_payment":"allowed"),r.commentPermission||void 0===a.lastCommentPermission||(o.commentPermission=a.lastCommentPermission),Object.keys(o).length&&this.setState(o),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(St.a.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,r=n.focusing,a=n.thankInviterInfo,o=this.props,i=o.tagline,c=o.inviterFromNotification;if(i){var s=N.a.get("rewardNotication");r&&!s&&(this.setState({rewardNotication:!1}),N.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}a||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,r=t.isReediting,a=t.answer,o=t.question,i=t.handleToggleAnonymous,c=this.state,s=c.focusing,l=c.isEmpty,u=c.isFullscreen,b=c.selectedText,f=c.scheduledPublishAt,h=Object(d.c)("div",{className:g()("AnswerForm-footer",{"AnswerForm-footer--hidden":!u&&!s&&l}),children:[Object(d.b)(it,{question:o,answer:a,isVideoAnswer:this.isVideoAnswer,handleToggleAnonymous:i,isFullScreen:u,positionStatus:this.state.footerPositionStatus,isReediting:r,setScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,handleExpand:this.handleSettingExpand,settingExpanded:this.state.settingExpanded}),Object(d.b)(ct.b,{isFullScreen:u,type:"answer",questionId:o.id,textCount:null==b?void 0:b.length,draftStatus:this.getDraftStatus(),removeDraft:this.onDeleteDraftModalShow,isReediting:r,scheduledPublishAt:f,onCancelEdit:this.onCancel,draft:n,handleSubmit:this.handleSubmit,canSubmit:this.canSubmit()})]});return!u?Object(d.b)(T.a,{bottom:!0,container:function(){return e.form},children:h}):h}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===U.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isReediting,a=t.question,o=t.currentUser,i=t.answer,c=t.answer,s=(c=void 0===c?{}:c).answerType,l=t.activeTabKey,u=t.handleTabChange,b=this.state,f=b.deleteDraftModalShown,p=b.isFullscreen,m=b.isLeaveActive,v=b.showInsertableVideoUploader,O=b.mcnEditingGood;return Object(d.b)(L.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(a.id),author_member_hash_id:o.id},children:Object(d.c)("form",{ref:function(t){e.form=t},className:g()("AnswerForm",n),onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[p&&Object(d.b)("div",{className:g()("AnswerForm-fullscreenBackdrop",{isLeaveActive:m})}),Object(d.c)("div",{className:g()({"AnswerForm-fullscreenContent":p,isLeaveActive:m}),ref:function(t){return e.fullscreenContent=t},children:[p&&Object(d.c)(j.Box,{bg:"GBK99A",css:{position:"relative",boxShadow:"0 0 32px rgba(0, 0, 0, 0.06);"},children:[Object(d.b)("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef,children:Object(d.c)(j.Flex,{justifyContent:"space-between",alignItems:"center",children:[r?Object(d.b)(j.Box,{fontSize:15,fontWeight:"bold",lineHeight:"21px",color:"GBK03A",children:this.videoAnswerPublished?"本回答为视频回答":"本回答为图文回答"}):Object(d.b)(U.b,{activeTabKey:l,onChange:u}),Object(d.c)(F.a,{as:j.Flex,zaAction:"Unknown",zaText:"退出全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",lineHeight:"55px",onClick:this.toggleFullscreen,css:{cursor:"pointer"},children:[Object(d.b)(j.Text,{mr:"10px",children:"退出全屏编辑"}),Object(d.b)(A.a,{text:!0,center:!0})]})]})}),Object(d.b)(Ct,{question:a,handleImportDoc:this.onInsertDoc,handleHistoryVersion:this.showDraftHistoryModal})]}),Object(d.c)("div",{className:g()({"AnswerForm-fullscreenScroller":p}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll,children:[!p&&Object(d.b)(Ct,{question:a,handleImportDoc:this.onInsertDoc,handleHistoryVersion:this.showDraftHistoryModal}),this.renderRichInput(),Object(d.b)("div",{ref:function(t){e.expandedSettingsRef=t},children:Object(d.b)(it,{inEditor:!0,question:a,answer:i,isVideoAnswer:this.isVideoAnswer,handleToggleAnonymous:this.props.handleToggleAnonymous,isReediting:r,setScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,handleExpand:this.handleSettingExpand,settingExpanded:this.state.settingExpanded,isFullScreen:p})})]}),this.renderFooter()]}),p&&Object(h.cloneElement)(this.renderRichInput(),{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,ref:function(t){return e.cloneEditor=t}}),"org"===a.questionType&&Object(d.b)(V.a,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===a.questionType&&Object(d.b)(H.a,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(st.a,{title:"清除草稿",subtitle:r?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:f,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),v&&Object(d.b)(q.a,{show:v,onClose:function(){return e.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(t)))},onVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-video-card",t)}}),Object(d.b)(z.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){e.setState({mcnEditingGood:null})},children:Boolean(O)&&Object(d.b)(P.a,{className:"AnswerForm-MCNEditorIframe",src:Object(kt.a)({title:O.title,originTitle:O.originTitle,source:O.source,sourceId:O.sourceId,productTypeName:O.productTypeName}),onMessage:this.handleEditGGRCard})}),Object(d.b)(lt.a,{onClose:function(){e.props.onCancel()},shown:"slideshow"===s})]})})}}]),n}(h.Component);Rt.propTypes={activeTabKey:f.a.string,handleTabChange:f.a.func,question:f.a.object,isReediting:f.a.bool,defaultValue:f.a.string,getFormData:f.a.func,reporter:f.a.object},Rt.defaultProps={isReediting:!1},Rt.contextTypes={authRequired:f.a.func};var Tt={addDraft:Q.b,updateDraft:Q.lb,deleteDraft:Q.j,showNotification:J.h,fillCurrentUserIfNeeded:X.e,loadSettings:Y.y,updateSettingsDisclaimer:Y.M,loadLabel:Z.e,getUserProfitPermission:K.b,updateLinkCard:W.b,fetchAllInviters:Q.o},It=Object(m.compose)(v.withRouter,Object(p.connect)((function(e,t){var n,r,a=e.entities,o=a.questions,i=a.drafts,c=void 0===i?{}:i,s=e.question,l=t.location.query.inviter,u=Object(ee.b)(e),d=Object(X.b)(e),b=Object(Q.d)(e,t.question.id),f=l&&(null==b||null===(n=b.find)||void 0===n?void 0:n.call(b,(function(e){return e.id===l}))),h=c["question_".concat(t.question.id)];return{campaign:u,question:o[t.question.id]||t.question,draft:h,currentUser:d,isPuQuestion:Boolean(s&&s.brand&&s.brand.isPuQuestion),disclaimers:s.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(r=Object(Z.c)(e,t.answer))||void 0===r?void 0:r.thankInviterInfo,allInviters:b,inviterQuery:l,inviterFromNotification:f,isOffice:Object($.isOfficeSelector)(e)}}),Tt),ue.b,pt.e)(Rt)},1735:function(e,t,n){"use strict";var r=n(33),a=n(15),o=n(16),i=n(17),c=n(18),s=n(9),l=n(1),u=n(3),d=n.n(u),b=n(0),f=n(86),h=n(26),p=n(140),m=n(179),v=n(121),O=n(36),g=n(425),j=n(21),y=n.n(j),w=n(23),C=n.n(w),x=n(22),S=n.n(x),k=n(25),A=n.n(k),R=n(14),T=n.n(R),I=n(877),E=n(12),B=n.n(E),N=n(7);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T()(e);if(t){var a=T()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A()(this,n)}}var D=function(e){S()(n,e);var t=L(n);function n(){var e;y()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){e.props.onChange(t)},e}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.name,a=e.type,o=e.value,i=e.checked,c=JSON.stringify(o);return Object(N.g)("label",{className:B()("CheckItem",t)},Object(N.g)("input",{className:"CheckItem-input",type:a,name:r,value:c,onChange:this.handleChange,checked:i}),Object(N.g)("div",{className:"CheckItem-box"},Object(N.g)("div",{className:"CheckItem-inner"},n),Object(N.g)(I.a,{className:"CheckItem-icon",size:20})))}}]),n}(b.Component);D.propTypes={name:d.a.string,onChange:d.a.func,checked:d.a.bool,className:d.a.string,type:d.a.string,value:d.a.any},D.defaultProps={name:"checkitems",type:"checkbox"};var M=D,z=n(850),P=n(157),_=n(436),F=n(1072),U=n(915),V=n(419);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var q=function(e){Object(i.a)(n,e);var t=H(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,a=e.checked,o=e.rich,i=this.state,c=i.modifying,s=i.value;return c?Object(l.c)("div",{className:"TopicBioItem",children:[Object(l.b)("div",{className:"TopicBioItem-title",children:r}),Object(l.c)("form",{onSubmit:this.handleSubmit,children:[Object(l.b)("div",{className:"TopicBioItem-inner",children:Object(l.b)(U.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:Object(l.b)(P.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0})})}),Object(l.c)("div",{className:"TopicBioItem-inputFooter",children:[Object(l.b)(_.a,{current:s?s.length:0,max:40}),Object(l.c)("div",{className:"TopicBioItem-actions",children:[Object(l.b)(O.c,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),Object(l.b)(O.c,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?Object(l.c)("div",{className:"TopicBioItem",children:[Object(l.b)("div",{className:"TopicBioItem-title",children:r}),Object(l.b)(M,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:a,children:Object(l.b)(U.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:Object(l.c)("div",{children:[o?Object(l.b)(V.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(l.b)("span",{className:"TopicBioItem-bio",children:n}),Object(l.b)(F.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):Object(l.b)("div",{className:"TopicBioItem",children:Object(l.c)(O.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[Object(l.b)(z.a,{text:!0,center:!0})," 添加",r]})})}}]),n}(b.Component);q.propTypes={user:d.a.object.isRequired,title:d.a.node.isRequired,value:d.a.object.isRequired,onBioChange:d.a.func.isRequired,onSelect:d.a.func.isRequired,checked:d.a.bool.isRequired};var G=q;function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var W=function(e,t){var n=e.type,r=e.topic,a=(r=void 0===r?{}:r).id,o=t.type,i=t.topic,c=(i=void 0===i?{}:i).id;return n===o&&a===c},Q=function(e){Object(i.a)(n,e);var t=K(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(l.b)("div",{className:"TopicBios-loading",children:Object(l.b)(g.a,{})});var t=this.props,n=t.user,r=t.question.topics,a=t.bios,o=t.currentBio,i=t.onHeadlineUpdate,c=t.onBioUpdate,s=this.state.value||o,u={type:"headline"};return Object(l.c)("div",{children:[Object(l.c)("div",{className:"TopicBioItems",children:[Object(l.b)(G,{title:"一句话介绍",user:n,bio:n.headline,value:u,onBioChange:i,onSelect:this.handleSelect,checked:W(s,u),rich:!0}),r.map((function(t){var r={type:"topic",topic:{id:t.id}};return Object(l.b)(G,Object.assign(Object.assign({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(a,t.id)),{},{value:r,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:W(s,r)}),t.id)}))]}),Object(l.b)(f.a,{children:Object(l.b)(O.c,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(b.Component);Q.propTypes={onHeadlineUpdate:d.a.func.isRequired,onBioUpdate:d.a.func.isRequired,onBioChoose:d.a.func.isRequired,question:d.a.object.isRequired,user:d.a.object.isRequired};var Y=Q;function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var J=function(e){Object(i.a)(n,e);var t=Z(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(l.b)(Y,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(b.Component);J.contextTypes={currentUser:d.a.object},J.propTypes={question:d.a.object.isRequired};var X=Object(h.connect)((function(e,t){var n=e.currentUser,r=e.question.bio,a=e.entities,o=a.questions,i=a.users,c=e.topic.bios,s=t.question.id,l=o[s],u=(r[s]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:u.type,topic:u.topic},bios:l.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:l,user:i[n]}}),{updateProfile:p.n,updateBio:m.hb,chooseBio:v.e,loadBios:v.H})(J),$=["shown","onClose"];function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var te=function(e){Object(i.a)(n,e);var t=ee(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,a=Object(r.default)(e,$);return Object(l.b)(f.b,{title:"编辑话题经验",subtitle:Object(l.c)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",Object(l.b)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&Object(l.b)(X,Object.assign(Object.assign({},a),{},{onClose:n}))})}}]),n}(b.Component);te.propTypes=Object.assign({shown:d.a.bool.isRequired,onClose:d.a.func.isRequired},X.propTypes);t.a=te},1737:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n(26),c=n(61),s=n(44),l=n(35),u=n(86),d=n(36),b=n(861),f=n(29),h=n(430),p=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},m=n(951),v=function(e){var t=e.className;return Object(a.b)("div",{className:t,css:function(e){return{fontSize:14,lineHeight:"22px",color:e.colors.GBL05A,textAlign:"center",a:{textDecoration:"underline"}}},children:Object(a.c)("p",{children:["请不要添加无关的视频，详情查看"," ",Object(a.b)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",children:"知乎视频使用规范"}),Object(a.b)("br",{}),"上传视频，即代表你同意",Object(a.b)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",children:"《知乎视频用户协议》"})]})})},O=n(416),g=n(181),j=n(948),y=n(139),w=n(83);function C(e){var t=e.item,n=e.onCheck,i=Object(o.useState)(!1),s=Object(r.a)(i,2),l=s[0],u=s[1],d=t.id,b=t.title,f=t.description,h=t.imageUrl,p=t.publishedAt,v=t.video,O=null==v?void 0:v.duration;return Object(a.c)(c.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[Object(a.c)(c.Flex,{flex:1,children:[Object(a.c)(c.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[Object(a.b)(c.Image,{width:"100%",height:"100%",src:h,alt:"",css:{objectFit:"cover"}}),Object(a.b)(c.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:Object(m.b)(O)})]}),Object(a.c)(c.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[Object(a.b)(c.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[Object(w.d)(1)],children:b}),Object(a.b)(c.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[Object(w.d)(1)],children:f}),Object(a.b)(c.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:Object(y.toRelativeString)(p)})]})]}),Object(a.b)(j.a,{css:{marginLeft:16,flexShrink:0},checked:l,onChange:function(e){u(e.currentTarget.checked),n(d)}})]})}function x(e){var t,n=e.onClose,s=e.onSubmit,l=Object(o.useState)([]),u=Object(r.a)(l,2),b=u[0],f=u[1],p=Object(i.useSelector)((function(e){return e.zvideos.insertable}))||{},m=p.isLoading,v=p.data,j=p.paging,y=Object(i.useDispatch)(),w=Object(o.useCallback)((function(){y(Object(h.n)())}),[y]),x=Object(o.useCallback)((function(e){b.includes(e)?f(b.filter((function(t){return t!==e}))):f(b.concat([e]))}),[b]);return Object(a.c)(c.Box,{height:688,children:[Object(a.b)(c.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),Object(a.b)(O.b,{css:{marginBottom:100},onLoad:w,isLoading:null!=m&&m,isDrained:null!==(t=null==j?void 0:j.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:v.map((function(e,t){return Object(a.b)(g.a,{children:Object(a.b)(C,{item:e,onCheck:x})},t)}))}),Object(a.c)(c.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[Object(a.b)(d.c,{css:{flex:1},onClick:n,children:"返回"}),Object(a.b)(d.c,{disabled:0===b.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){s(b),n()},children:"添加"})]})]})}var S=n(12),k=n.n(S),A=n(74),R=n(30);var T=function(e){var t=e.className,n=e.text,r=e.onFiles,i=e.zaClickId,c=e.zaBlockText,s=e.multiple,u=void 0===s||s,b=e.disabled,f=e.handleMouseEnter,h=e.handleMouseLeave,p=Object(o.useRef)(null);return Object(a.c)(a.a,{children:[Object(a.b)(A.a,{zaText:!0,zaType:"Button",zaBlock:c,zaAction:"Upload",css:{display:"inline-block"},onMouseEnter:f,onMouseLeave:h,children:Object(a.b)(d.c,{className:k()("VideoUploadButton",t),preset:"primary",color:"blue",disabled:b,onClick:function(e){i&&l.a.trackEvent(e.target,{id:i,action:"Upload"}),p.current.click()},children:n})}),Object(a.b)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:p,onChange:function(){r(p.current.files,"Add"),p.current.value=null},accept:R.a.VIDEO.join(","),multiple:u})]})};t.a=function(e){var t=e.show,n=e.onZVideoSubmit,O=e.onVideoSubmit,g=e.onClose,j=(Object(i.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,y=Object(o.useState)(!1),w=Object(r.a)(y,2),C=w[0],S=w[1],k=Object(o.useState)(!1),A=Object(r.a)(k,2),R=A[0],I=A[1],E=Object(i.useDispatch)(),B=Object(s.d)((function(e){var t=Object(m.a)(e),n=t.message,r=t.abortUpload,a=t.validFiles;n&&(E(Object(f.h)(n,r?"red":"white")),r)||O({value:a[0]})}));return t?Object(a.c)(u.b,{css:{width:688},onClose:g,children:[R&&Object(a.b)(x,{onSubmit:n,onClose:function(){I(!1)}}),!R&&Object(a.c)(a.a,{children:[Object(a.b)(c.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),Object(a.c)(c.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return Object.assign({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},C&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return S(!0)},onDragLeave:function(){return S(!1)},onDrop:function(e){e.preventDefault(),B(p(e))},children:[Object(a.b)(b.a,{size:90,css:function(e){return{color:C?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),Object(a.b)(c.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),Object(a.c)(c.Box,{mt:"20px",children:[Object(a.b)(T,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:B}),Object(a.b)(d.c,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){l.a.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),(null==j?void 0:j.length)>0?I(!0):E(Object(h.n)()).then((function(e){e.payload.data.length?I(!0):E(Object(f.h)("还没有发布过视频"))}))},children:"选择已发布的视频"})]})]}),Object(a.b)(v,{})]})]}):null}},1738:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n.n(o),c=n(35),s=n(44),l=n(1598),u=n(15),d=n(16),b=n(17),f=n(18),h=n(9),p=n(3),m=n.n(p),v=n(86),O=n(26),g=n(607),j=n(12),y=n.n(j),w=n(1481),C=n(36),x=n(425),S=n(416),k=n(1073),A=n(98),R=Object.assign;var T=function(e){return i.a.createElement(A.a,R({width:"150",height:"120",viewBox:"0 0 150 120"},e),i.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0144 93V30.997A5.996 5.996 0 0150.002 25h48.996A5.996 5.996 0 01105 30.998V93a2 2 0 01-.396 1.2l-4.112-2.66z"}),i.a.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 01-.999.999H56a.993.993 0 01-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 110 3h-35.99A1.499 1.499 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 110 3h-24.99A1.499 1.499 0 0155 75.5z"}))};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var E={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},B=function(e){Object(b.a)(n,e);var t=I(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).formatDate=function(e){return w.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}return Object(d.a)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,r=e.draftId,i=e.draftType,c=t.isFetching,s=t.data;return Object(a.c)("div",{className:"DraftHistory-main",children:[c&&Object(a.b)(x.a,{className:"DraftHistory-loading"}),!c&&s&&Object(a.c)(o.Fragment,{children:[s.draft.title&&Object(a.b)("div",{className:"DraftHistory-draftTitle",children:s.draft.title}),Object(a.b)(k.a,{className:"DraftHistory-draft",html:s.draft.content,onClick:this.handleDraftClick,sourceType:i,sourceId:r}),Object(a.c)("div",{className:"DraftHistory-actions",children:[Object(a.c)("div",{className:"DraftHistory-meta",children:[this.formatDate(s)," ",E[s.versionType]]}),Object(a.b)(C.c,{className:"DraftHistory-revert",disabled:"current"===s.versionType,onClick:function(){return n(s)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,o=t.currentDraft,i=t.getHistory,c=t.onSelect;return n?n.isFetching&&!n.items?Object(a.b)("div",{className:"DraftHistory",children:Object(a.b)(x.a,{className:"DraftHistory-loading"})}):Object(a.c)("div",{className:"DraftHistory",children:[Object(a.c)("div",{className:"DraftHistory-side",children:[Object(a.b)("div",{className:"DraftHistory-title",children:"历史版本"}),Object(a.b)(S.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:i,children:Object(a.b)("div",{children:n.items&&n.items.map((function(t,n){return Object(a.c)("a",{href:"#",className:y()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(e){e.preventDefault(),c(t)},children:[Object(a.b)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),Object(a.b)("div",{className:"DraftHistory-versionType",children:E[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&Object(a.b)("div",{className:"DraftHistory-main",children:Object(a.c)("div",{className:"DraftHistory-empty",children:[Object(a.b)(T,{className:"DraftHistory-emptyIcon"}),Object(a.b)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),o&&this.renderCurrentDraft()]}):null}}]),n}(o.Component);B.propTypes={history:m.a.object,currentVersion:m.a.object,currentDraft:m.a.object,onSelect:m.a.func,onRevert:m.a.func};var N=B;function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var D=function(e){Object(b.a)(n,e);var t=L(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,r=t.id;(0,t.getHistory)(n,r)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,r=n.revert,a=n.onReverted;r(t.versionType,t.id).then((function(){a&&a(t)}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,a=n.getDraft,o=this.state.currentVersion,i=t.currentVersion;!o||i&&i.versionType===o.versionType&&i.id===o.id||r["".concat(o.versionType,"_").concat(o.id)]||a(o.versionType,o.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=e.draftId,o=e.draftType,i=this.state.currentVersion;return Object(a.b)(N,{history:t,currentVersion:i,currentDraft:i?n["".concat(i.versionType,"_").concat(i.id)]:null,draftId:r,draftType:o,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(o.Component);D.propTypes={type:m.a.string.isRequired,id:m.a.number.isRequired,onReverted:m.a.func};var M=Object(O.connect)((function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(r)],drafts:e.draftHistory.drafts}}),{getHistory:g.c,getDraft:g.b,revert:g.e,reset:g.d})(D);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var P=function(e){Object(b.a)(n,e);var t=z(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleReverted=function(t){var n=e.props,r=n.onClose,a=n.onReverted;a&&a(t),r&&r(),c.a.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),c.a.trackEvent(null,{id:5015,action:"Click"})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,r=e.id,o=e.draftId,i=e.draftType;return Object(a.b)(v.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&Object(a.b)(M,{type:n,id:r,draftId:o,draftType:i,onReverted:this.handleReverted})})}}]),n}(o.Component);P.propTypes={shown:m.a.bool.isRequired,onClose:m.a.func,type:m.a.string.isRequired,id:m.a.number.isRequired,onReverted:m.a.func},P.defaultProps={shown:!0};var _=P,F=Object(o.forwardRef)((function(e,t){var n,i,c=e.type,l=e.id,u=e.getId,d=e.handleReverted,b=e.draftId,f=e.draftType,h=e.getDraftId,p=Object(o.useState)(!1),m=Object(r.a)(p,2),v=m[0],O=m[1],g=Object(s.d)((function(){return O(!0)})),j=Object(s.d)((function(){return O(!1)}));return Object(o.useImperativeHandle)(t,(function(){return{handleOpen:g,handleClose:j}}),[g,j]),Object(a.b)(_,{shown:v,onClose:function(){return O(!1)},type:c,id:null!==(n=null==u?void 0:u())&&void 0!==n?n:l,draftId:null!==(i=null==h?void 0:h())&&void 0!==i?i:b,draftType:f,onReverted:d})}));t.a=function(e){var t=e.type,n=e.id,r=e.syncDraft,i=e.getId,s=e.getDraftId,u=e.draftId,d=e.draftType,b=e.shouldShowToolbarButton,f=void 0===b?function(){return!0}:b,h={};h.draftModalRef=Object(o.createRef)(null);return{initialize:function(e){Object.assign(h,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(h.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[Object(a.b)(F,{type:t,id:n,getId:i,draftId:u,getDraftId:s,draftType:d,ref:h.draftModalRef,handleReverted:function(e){h.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:l.a,onClick:function(){r.flush(),h.draftModalRef.current.handleOpen(),c.a.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:f}}}},1745:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(4),l=n(1),u=n(0),d=n(26),b=n(79),f=n(460),h=n(465),p=n(367),m=n(3),v=n.n(m),O=n(161),g=n(433),j=n(1014),y=n(36),w=n(178),C=n(899),x=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,a=e.canClick,o=e.onClick;if(!n)return null;var i=t.length,c=i===n?"":"".concat(Object(w.formatNumber)(n)," 人");return Object(l.c)(j.CJKSpace,{children:[t.map((function(e,t){return Object(l.c)("span",{children:[t>0&&"、",Object(l.b)(C.a,{noBadge:!0,user:e,children:e.name},t)]},t)})),i>0&&n-i>0&&"等",a?Object(l.c)(y.c,{preset:"plain",onClick:o,children:[c,r]}):c+r]})};x.propTypes={voteupCount:v.a.number.isRequired,upvotedFollowees:v.a.array.isRequired,actionText:v.a.string.isRequired,canClick:v.a.bool,onClick:v.a.func},x.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var S=x,k=n(1345);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var R=function(e){Object(o.a)(n,e);var t=A(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,a=e.type,o=e.too,i=e.isFetching,c=e.isDrained,s=e.items,u=e.onLoad;if(t<=0)return null;var d,b=this.state.modalShown;return d="pin"===a?"为该".concat(g.b[a],"鼓掌"):"column"===a?"关注":"".concat(o?"也":"","赞同了该").concat(g.b[a]),Object(l.c)("span",{className:"Voters",children:[Object(l.b)(S,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(l.b)(O.b,{size:"fullPage",onClose:this.handleListHide,children:b&&Object(l.b)(k.a,{isFetching:i,isDrained:c,text:"column"===a?"关注了":"赞同了",items:s,voteupCount:t,onLoad:u})})]})}}]),n}(u.Component);R.propTypes={openable:v.a.bool,upvotedFollowees:v.a.array,id:v.a.oneOfType([v.a.number,v.a.string]),type:v.a.oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:v.a.bool},R.defaultProps={openable:!0,defaultModalShown:!1};var T=R;function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var E={answer:"answers",article:"articles",pin:"pins",column:"columns"};var B=function(e){Object(o.a)(n,e);var t=I(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleLoad=function(){var t=e.props,n=t.type,r=t.id,a=t.loadAnswerVoters,o=t.loadPinVoters,i=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return a(r);case"pin":return o(r);case"article":return i(r);case"column":return c(r);default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){return Object(l.b)(T,Object.assign({onLoad:this.handleLoad},this.props))}}]),n}(u.Component);B.propsTypes=Object.assign({},T.propsTypes),B.defaultProps=Object.assign({},T.defaultProps);t.a=Object(d.connect)((function(e,t){var n=t.id,r=t.type,a=e.entities.users,o=e[E[r]]||{},i=o.voters,c=void 0===i?{}:i,l=o.concernedUpvoters,u=void 0===l?{}:l,d=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},b=d.isFetching,f=d.isDrained,h=d.order,p=d.ids,m=(u[n]||{ids:[]}).ids;return{isFetching:b,isDrained:f,order:h,items:[].concat(Object(s.a)(m),Object(s.a)(p.filter((function(e){return!m.includes(e)})))).map((function(e){return a[e]}))}}),{loadAnswerVoters:b.v,loadArticleVoters:f.e,loadPinVoters:h.f,loadColumnsFollowers:p.c})(B)},1747:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n(100),c=n(938),s=n(289),l=n(160),u=n(2806),d=n(1139),b=n(86),f=n(981);var h=function(e){var t=e.shown,n=e.onClose,r=e.onSubmit,i=Object(o.useCallback)((function(e){var t=e.type,a=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||r(a.files):n()}),[r,n]);return Object(a.b)(b.b,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&Object(a.b)("div",{className:"BaiduFileSelector-content",children:Object(a.b)(f.a,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:i})})})},p=Object(o.forwardRef)((function(e,t){var n=Object(o.useState)(!1),i=Object(r.a)(n,2),c=i[0],s=i[1];return Object(o.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:s}}),[]),Object(a.b)(h,{shown:c,onClose:function(){return s(!1)},onSubmit:function(t){s(!1),e.onSubmit(t)}})}));t.a=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return Object(d.a)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))},r=function(){n().size>=10?l.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=Object(o.createRef)(),{initialize:function(t){Object.assign(e,t)},components:Object(a.b)(p,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(r(),"handled"):"not-handled"},toolbar:{section:i.a.CUSTOM_MAIN,label:"上传附件",icon:u.a,toolType:s.e.ENTITY,onClick:function(){n().size>=10?l.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:c.a.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:u.a,toolType:s.e.ENTITY,onClick:function(){r()},priority:2}}}},1750:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n(2807),c=n(44),s=n(100),l=n(938),u=n(161),d=n(36),b=n(35),f=n(915),h=n(61),p=function(e){var t=e.className,n=e.onClose,r=e.shown,o=e.allInviters,i=e.onChoose;return Object(a.b)(u.b,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:r&&o.map((function(e){return Object(a.c)(h.Flex,{css:{padding:"12px 0"},children:[Object(a.b)(f.a,{author:e}),Object(a.b)(d.c,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){b.a.trackEvent(null,{id:7682,action:"Click"}),i&&i(e)},children:"选择"})]},e.id)}))})},m=n(1244),v=function(e){var t=e.shown,n=e.hasShown,r=e.children,a=Object(o.useRef)(n),i=Object(o.useRef)(t);return Object(o.useEffect)((function(){!t&&i.current&&(a.current=!0),i.current=t}),[t]),t&&!a.current&&r},O=function(e){var t=e.className,n=e.shown,i=e.hasShown,c=e.inviters,s=e.onConfirm,l=e.onCancel,u=Object(o.useState)(n),d=Object(r.a)(u,2),f=d[0],p=d[1],m=Object(o.useRef)(n);return Object(o.useEffect)((function(){m.current!==n&&p(n),m.current=n}),[n]),(null==c?void 0:c.length)>0&&Object(a.b)(v,{shown:f,hasShown:i,children:Object(a.c)(h.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[c.map((function(e,t){return Object(a.b)(h.Image,{src:c[0].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:c.length-t,marginLeft:t?"-14px":"0"}},e.id)})),Object(a.b)(h.Text,{ml:"8px",children:c[0].name+(c.length>1?"等 ".concat(c.length," 人"):"")}),"邀请你回答",Object(a.b)(h.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){b.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===c.length?"0":"1"}]},{button:{text:"添加谢邀"}}),s&&s(c)},children:"添加谢邀"}),Object(a.b)(h.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){p(!1),b.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===c.length?"0":"1"}]},{button:{text:"忽略"}}),l&&l()},children:"忽略"})]})})};var g=Object(o.forwardRef)((function(e,t){var n=e.getAllInviters,i=e.inviterQuery,s=e.getStore,l=e.getInitialThankInviterInfo,u=Object(o.useState)(!1),d=Object(r.a)(u,2),b=d[0],f=d[1],h=Object(o.useState)(l()),v=Object(r.a)(h,2),g=v[0],j=v[1],y=Object(o.useState)(null),w=Object(r.a)(y,2),C=w[0],x=w[1],S=Object(c.d)((function(){return f(!1)}));return Object(o.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return f(!0)},getInvitersData:function(){return C},getThankInviterInfo:function(){return g}}}),[C,g]),Object(o.useEffect)((function(){n().then((function(e){var t=e.payload;x(t.data);var n=s();n.setEditorState(n.getEditorState())}))}),[]),Object(a.c)(a.a,{children:[g&&Object(a.b)(m.a,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:g,onDelete:function(){j(null)}}),(null==C?void 0:C.length)>0&&Object(a.b)(O,{hasShown:Boolean(i)||Boolean(g),shown:!g,inviters:C,onConfirm:function(e){null!=e&&e.length&&(1!==e.length?f(!0):j(e[0]))}}),Object(a.b)(p,{onClose:S,shown:b,allInviters:C,onChoose:function(e){j(e),S()}})]})}));t.a=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,r=e.inviterQuery,c=e.getInitialThankInviterInfo,u={},d=Object(o.createRef)(null);return{initialize:function(e){Object.assign(u,e)},componentsBeforeEditor:[{component:Object(a.b)(g,{getAllInviters:n,inviterQuery:r,ref:d,getStore:function(){return u},getInitialThankInviterInfo:c}),priority:0}],getExtraPluginData:function(){var e,t,n;return t=c,n=null===(e=d.current)||void 0===e?void 0:e.getThankInviterInfo(),t?n?n.id===t.id?{}:{thankInviterStatus:"open",thankInviter:n.id}:{thankInviterStatus:"close"}:n?{thankInviterStatus:"open",thankInviter:n.id}:{}},toolbar:{label:"添加谢邀",section:s.a.CUSTOM_MAIN,priority:3,icon:i.a,onClick:function(){d.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=d.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=d.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:l.a.BUSINESS_MEDIA,text:"谢邀",icon:i.a,priority:3,onClick:function(){d.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=d.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=d.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}}},1755:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(19),d=n(26),b=n(1312),f=n.n(b),h=n(369),p=n.n(h),m=n(190),v=n(579);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function g(e,t){var n=t.os,r=t.id,a=t.sessionId,o=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",a).replace("__SESSIONID__",a).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",o)}var j=function(e){Object(o.a)(n,e);var t=O(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&Object(m.c)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,r=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:r}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=p()(),r=e.props,a=r.ua,o=r.id,i=r.type,c=encodeURIComponent("其他");a.Android?c="android":a.iOS&&(c="ios");var s={os:c,id:o,sessionId:n,type:i};return t.map((function(e){return g(e,s)}))},e}return Object(a.a)(n,[{key:"render",value:function(){return!this.state.logged&&Object(s.b)(f.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(l.Component),y=Object(u.compose)(Object(d.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:v.b}))(j)},1756:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n.n(o),c=n(12),s=n.n(c),l=n(44),u=n(74),d=n(45),b=n.n(d),f=n(36),h=n(98),p=Object.assign;var m=function(e){return i.a.createElement(h.a,p({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),i.a.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 012 2v1.134a1 1 0 011.207 1.573l-1.5 1.5a1 1 0 01-1.414 0l-1.5-1.5A1 1 0 0118 5.134V4h-2a1 1 0 110-2h2zm-8 4a1 1 0 010 2H4a1 1 0 110-2h6zm2-4a1 1 0 010 2H4a1 1 0 110-2h8z",fillRule:"evenodd"}))},v=n(1441),O=n(1100),g=n(55),j=!1,y=function(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(o.useRef)(null);Object(o.useEffect)((function(){b.a.get("vessayTipShown")||i(!0)}),[]),Object(O.a)((function(){i(!1),b.a.set("vessayTipShown",!0)}),c);var s=Object(l.d)((function(e){e.stopPropagation(),i(!1),b.a.set("vessayTipShown",!0)}));return n&&Object(a.b)("img",{ref:c,onClick:s,onKeyUp:s,src:"https://pic1.zhimg.com/v2-97ce1cdeee383ce98263fc787f08ba9e.png",alt:"一键生成视频",css:{width:"347px",height:"120px",objectFit:"cover",transform:"translate(-50%, -100%)",position:"absolute",top:"4px",left:"50%"}})};t.a=function(e){var t=e.className,n=e.type,i=e.id,c=e.useVessayV2,d=e.isAuthor,h=Object(v.c)(n,i,c),p=Object(g.isBrowser)()&&location.href.includes("/people"),O=Object(o.useState)(!1),w=Object(r.a)(O,2),C=w[0],x=w[1],S=Object(l.f)({once:!0}),k=Object(r.a)(S,2),A=k[0],R=k[1];return Object(o.useEffect)((function(){R&&!j&&(j=!0,x(!0))}),[R]),Object(a.c)(u.a,{as:f.c,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){b.a.set("vessayTipShown",!0),window.open(h)},className:s()("ContentItem-convertVideoButton",t),css:{position:"relative"},extra:{link:{url:h}},children:[C&&d&&p&&Object(a.b)(y,{}),Object(a.b)(m,{}),Object(a.b)("span",{ref:A,children:"一键生成视频"})]})}},1758:function(e,t,n){"use strict";var r=n(1),a=n(3),o=n.n(a),i=n(86),c=n(36),s=function(e){var t=e.shown,n=e.onClose;return Object(r.b)(i.b,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&Object(r.b)("div",{className:"SlideshowEditBlockModal",children:Object(r.b)(c.c,{preset:c.b.Primary,color:c.a.Blue,onClick:n,children:"知道了"})})})};s.propTypes={shown:o.a.bool.isRequired,onClose:o.a.func.isRequired};t.a=s},1759:function(e,t,n){"use strict";var r=n(49),a=n(1),o=n(0),i=n.n(o),c=n(27),s=function(e){return i.a.createElement(c.a,e,i.a.createElement("path",{d:"M17 3a1 1 0 0 1 .89 1.458l-.058.097-1.537 2.305C19.405 8.202 21.5 11 21.5 14.43 21.5 19.093 17.609 22 12 22s-9.5-2.907-9.5-7.571c0-3.43 2.096-6.227 5.205-7.569L6.168 4.555a1 1 0 0 1 .72-1.55L7 3h10zm-5 5c-4.273 0-7.5 2.761-7.5 6.429C4.5 17.826 7.37 20 12 20s7.5-2.174 7.5-5.571C19.5 10.76 16.273 8 12 8zm2.47.97l1.06 1.06a.25.25 0 0 1 0 .354L12.914 13h2.336a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v1h2.25a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v.75a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V18H8.75a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25H11v-1H8.75a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h2.336L8.47 10.384a.25.25 0 0 1 0-.354l1.06-1.06a.25.25 0 0 1 .354 0l1.94 1.939a.25.25 0 0 0 .353 0l1.94-1.94a.25.25 0 0 1 .353 0zM15.13 5H8.868l.668 1h4.928l.667-1z"}))};s.defaultProps={name:"Income"};var l=s,u=n(86),d=n(981),b=n(160),f=n(35),h=n(100),p=n(938),m=n(289),v=n(1139),O=n(1443),g=Object(o.forwardRef)((function(e,t){var n=e.getStore,i=e.getContentInfo,c=Object(o.useState)(!1),s=Object(r.a)(c,2),l=s[0],f=s[1],h=i(),p=h.id,m=h.type;Object(o.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:f}}),[]);var g=function(){return Object(v.a)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return Object(a.b)(a.a,{children:Object(a.b)(u.b,{className:"UserProfitCardSelector",size:"large",onClose:function(){f(!1)},children:l&&Object(a.b)("div",{className:"UserProfitCardSelector-content",children:Object(a.b)(d.a,{className:"UserProfitCardSelector-iframe",src:Object(O.b)({contentId:p,contentType:m}),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&null!=e&&e.payload){var r=e.payload,a=r.type,o=r.id,i=r.url;if(r.preventClose||f(!1),"inserLinkCard"===a&&t.props.handleCommand("insert-link-card:".concat(i)),"insertMCNLinkCard"===a){if(Object(v.a)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void b.a.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(o))}if("insertAdLinkCard"===a){if(o.startsWith("ZhiTask_"))if(g().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void b.a.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(o.startsWith("fee_"))if(g().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void b.a.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(o))}}}})})})})}));t.a=function(e){var t=e.shouldDisabled,n=e.shouldShow,r=void 0===n?function(){return!0}:n,i=e.getContentInfo,c=void 0===i?function(){}:i,s={};return s.containerRef=Object(o.createRef)(),{initialize:function(e){Object.assign(s,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(s.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:l,shouldShow:r,shouldDisabled:function(){return!(null==t||!t())||null},section:h.a.CUSTOM_MAIN,toolType:m.e.ENTITY,onClick:function(){s.containerRef.current.setShowUserProfitCardSelector(!0),f.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:l,shouldShow:r,shouldDisabled:function(){return!!t()||null},section:p.a.BUSINESS_MEDIA,toolType:m.e.ENTITY,onClick:function(){s.containerRef.current.setShowUserProfitCardSelector(!0),f.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:Object(a.b)(g,{ref:s.containerRef,getStore:function(){return s},getContentInfo:c})}}},1762:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(3),d=n.n(u),b=n(12),f=n.n(b),h=n(161),p=n(948),m=n(157),v=n(36),O=n(30);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var j=function(e){Object(o.a)(n,e);var t=g(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).onChangeInputType=function(e){a.setState({checked:e.target.checked})},a.onChangeInputValue=function(e){a.setState({text:e.target.value})},a.submit=function(){var e=a.state.text;a.props.submitRewardText(e)};var o,i=e.tagline;return a.state={text:(o=i,o.replace(/^「/,"").replace(/」$/,"")||O.p),checked:!0},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,a=r.text,o=r.checked;return Object(s.c)(h.b,{onClose:t,className:"RewardForm-rewardModal",children:[Object(s.b)("p",{className:"RewardForm-rewardTitle",children:n?"编辑赞赏描述":"开启赞赏"}),Object(s.b)(m.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:a,onChange:this.onChangeInputValue,disabled:!0}),Object(s.c)("div",{className:"RewardForm-remark",children:[!n&&Object(s.c)("label",{className:"RewardForm-protocol",children:[Object(s.b)(p.a,{className:"RewardForm-rewardCheckbox",onChange:this.onChangeInputType,checked:o,size:16}),"我已同意",Object(s.b)("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar",children:"《知乎赞赏功能使用协议》"})]}),Object(s.b)("p",{className:"RewardForm-prompting",children:"暂不支持修改赞赏文案"})]}),Object(s.b)(v.c,{className:f()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!o}),onClick:this.submit,disabled:!o,children:"确定"})]})}}]),n}(l.Component);j.propTypes={onClose:d.a.func,submitRewardText:d.a.func,edit:d.a.bool,tagline:d.a.string},j.defaultProps={tagline:O.p}},2247:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2248:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M10.47 12.47l1.06 1.06a.25.25 0 0 1 0 .354L6.413 19h4.337a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v4.335l5.116-5.115a.25.25 0 0 1 .354 0zM20.75 3a.25.25 0 0 1 .25.25v7.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V6.413l-5.116 5.117a.25.25 0 0 1-.354 0l-1.06-1.06a.25.25 0 0 1 0-.354L17.585 5H13.25a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h7.5z"}))};i.defaultProps={name:"FullscreenEnter"},t.a=i},2250:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(158),a=n(514),o=n(65);function i(e,t){Object(o.a)(2,arguments);var n=Object(r.a)(t);return Object(a.a)(e,6e4*n)}},2251:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12.9 11.433v-5.1a.9.9 0 1 0-1.8 0v6a.9.9 0 0 0 .9.9h4.8a.9.9 0 1 0 0-1.8h-3.9zM2.652 8.246a3.3 3.3 0 0 1 4.43-4.851 10.241 10.241 0 0 0-4.43 4.851zm14.266-4.851a3.3 3.3 0 0 1 4.43 4.851 10.241 10.241 0 0 0-4.43-4.851zM12 21.333a9 9 0 1 1 0-18 9 9 0 0 1 0 18z",fillRule:"evenodd"}))};i.defaultProps={name:"Clock"},t.a=i},2252:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M10.75 13a.25.25 0 0 1 .25.25v7.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25v-4.337L3.883 21.53a.25.25 0 0 1-.354 0l-1.06-1.06a.25.25 0 0 1 0-.354L7.585 15 3.25 15a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h7.5zm9.72-10.53l1.06 1.06a.25.25 0 0 1 0 .354l-5.117 5.115L20.75 9a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v4.335l5.116-5.115a.25.25 0 0 1 .354 0z"}))};i.defaultProps={name:"FullscreenExit"},t.a=i},2806:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M9.586 3a1 1 0 0 1 .707.293l1.414 1.414a1 1 0 0 0 .707.293H21a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6.586zM4 11v6.75c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25V11H4zm0-2h16V7.25a.25.25 0 0 0-.25-.25h-8.164a1 1 0 0 1-.707-.293L9.464 5.293A1 1 0 0 0 8.757 5H4.25a.25.25 0 0 0-.25.25V9z"}))};i.defaultProps={name:"Folder"},t.a=i},2817:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M4.125 21h15.75c.621 0 1.125-.593 1.125-1.324 0-.73-.504-1.323-1.125-1.323H4.125c-.621 0-1.125.593-1.125 1.323C3 20.407 3.504 21 4.125 21z"}),a.a.createElement("path",{d:"M15.69 3.826c0-.457-.418-.826-.92-.826H9.23c-.508 0-.92.37-.92.827V9.64H5.538c-1.015 0-1.255.526-.533 1.175l6.344 5.709a1 1 0 0 0 1.302 0l6.344-5.71c.722-.648.483-1.175-.535-1.175h-2.77V3.826z",fillRule:"nonzero"})))};i.defaultProps={name:"StickyUnset"},t.a=i},2818:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M4.125 3h15.75C20.496 3 21 3.593 21 4.324c0 .73-.504 1.323-1.125 1.323H4.125C3.504 5.647 3 5.054 3 4.324 3 3.593 3.504 3 4.125 3z"}),a.a.createElement("path",{d:"M15.69 20.174c0 .457-.418.826-.92.826H9.23c-.508 0-.92-.37-.92-.827V14.36H5.538c-1.015 0-1.255-.526-.533-1.175l6.344-5.709a1 1 0 0 1 1.302 0l6.344 5.71c.722.648.483 1.175-.535 1.175h-2.77v5.813z",fillRule:"nonzero"})))};i.defaultProps={name:"StickySet"},t.a=i},938:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var r=n(24),a=n.n(r),o=n(168),i=n.n(o),c=n(473),s=n.n(c);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={CONTENT_OPERATION:"content_operation",TEXT_STYLE:"text_style",LIST:"list",BLOCK:"block",STRUCTURE_GENERATION:"structure_generation",PROFESSIONAL_MEDIA:"professional_media",BASIC_MEDIA:"basic_media",BUSINESS_MEDIA:"business_media"},b=function(e){var t,n=Object.values(d).reduce((function(e,t){return Object.assign(Object.assign({},e),{},a()({},t,[]))}),{}),r=[],o=[],c=l(e);try{for(c.s();!(t=c.n()).done;){var u=t.value.toolbarV2;if(i()(u)||Array.isArray(u)){var b,f=l(i()(u)?[u]:u);try{for(f.s();!(b=f.n()).done;){var h=b.value;h.parentName?o.push(h):r.push(h)}}catch(e){f.e(e)}finally{f.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var p=function(){var e=v[m],t=e.section,r=e.parentName,a=n[t];if(r){var o=a.find((function(e){return e.name===r}));if(!o)return"continue";o.childItems||(o.childItems=[]),o.childItems.includes(e)||(o.childItems.push(e),o.childItems=s()(o.childItems,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0})))}else a.push(e),a=s()(a,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0}));n[t]=a},m=0,v=[].concat(r,o);m<v.length;m++)p();return n};t.a=d},945:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(12),d=n.n(u),b=n(36),f=n(161);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var p=function(e){Object(o.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleSubmit=function(){var t=e.props,n=t.onSubmit,r=t.onCancel,a=t.needCancel;(void 0===a||a)&&r(),n()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,a=e.onCancel,o=e.className,i=e.isMobile,c=e.confirmText,l=e.cancelText,u=e.showButtonHorizontal,h=e.showConfirmButtonRight,p=Object(s.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:c||"确认"},"confirm"),m=Object(s.b)(b.c,{onClick:a,children:l||"取消"},"cancel"),v=i||h?[m,p]:[p,m];return Object(s.b)(f.b,{wrapperClassName:"ConfirmModal-wrapper",className:d()("ConfirmModal",o),title:t,size:i?"small":"default",subtitle:n,onClose:a,closeButton:!1,buttonGroupOnly:!0,children:r&&Object(s.b)(f.a,{direction:i||u?"horizontal":"vertical",children:v})})}}]),n}(l.Component);t.a=p},948:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(28),a=n.n(r),o=n(0),i=n(12),c=n.n(i),s=n(1298),l=n(1299),u=n(7);var d=function(e){var t=e.style,n=e.className,r=e.id,i=e.name,d=e.size,b=void 0===d?20:d,f=e.checked,h=e.onChange,p=e.disabled,m=Object(o.useState)(!1),v=a()(m,2),O=v[0],g=v[1];return Object(u.g)("label",{style:t,className:c()("Checkbox",n,{"Checkbox--focused":O,"Checkbox--disabled":p})},f?Object(u.g)(s.a,{size:b,className:"Checkbox-iconOn"}):Object(u.g)(l.a,{size:b,className:"Checkbox-iconOff"}),Object(u.g)("input",{className:"Checkbox-input",id:r,name:i,type:"checkbox",checked:f,onFocus:function(){return g(!0)},onBlur:function(){return g(!1)},onChange:h,disabled:p}))}},958:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(0),u=n(85),d=n.n(u);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var f=Object(l.createContext)({updateFormData:function(){},formData:{}});t.b=function(e){var t=function(t){Object(o.a)(i,t);var n=b(i);function i(){var e;Object(r.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return Object(a.a)(i,[{key:"render",value:function(){return Object(s.b)(f.Provider,{value:this.answerFormDataProps,children:Object(s.b)(e,Object.assign(Object.assign({},this.props),this.answerFormDataProps))})}}]),i}(l.Component);return d()(t,e)}},975:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(35),f=n(139),h=n(178),p=n(898),m=n(1081),v=n(899),O=n(983),g=n(894),j=(n(1141),n(941)),y=n(931);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var C=function(e){Object(o.a)(n,e);var t=w(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.user;b.a.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return Object(s.c)("div",{className:"ContentItem-rewardDetails",children:[Object(s.b)("p",{className:"ContentItem-rewardAmount",children:t&&"赞赏了 ¥".concat(t/100)}),Object(s.b)("p",{className:"ContentItem-rewardTime",children:Object(f.toRelativeString)(n)})]})}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,r=t.isFollowed,a=t.isFollowing,o=t.answerCount,i=t.articlesCount,c=t.followerCount,l=t.id,u=t.isOrg,d=e.user,b=e.type,f=e.isRewardList,w=e.action,C=e.meta,x=e.status,S=e.noTrackCardShow,k=e.onClick,A=e.currentUser,R=!n,T=A&&A.id===l,I=void 0!==w?w:!T&&!R&&Object(s.b)(p.a,{id:d.urlToken,type:b||d.type,preset:p.a.PRESETS.primary,gender:d.gender,isFollowing:a,onClick:k}),E=void 0!==C?C:R||Object(s.b)(O.a,{user:d}),B=void 0!==x?Object(s.b)(g.d,{children:x}):!R&&Object(s.c)(g.d,{children:[Boolean(o)&&"".concat(Object(h.formatNumber)(o)," 回答"),Boolean(i)&&"".concat(Object(h.formatNumber)(i)," 文章"),Boolean(c)&&"".concat(Object(h.formatNumber)(c)," 关注者")]}),N="//www.zhihu.com/".concat(u?"org":"people","/").concat(n||l),L=this.props.userLinkV2;return Object(s.b)(g.e,{data:d,link:N,image:L?Object(s.b)(j.a,{className:"UserItem-avatar",avatarProps:{size:60},user:d,target:"_blank"}):Object(s.b)(v.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:d,target:"_blank"}),title:Object(s.c)("div",{className:"UserItem-title",children:[L?Object(s.b)(y.a,{user:d,target:"_blank"}):Object(s.b)(v.a,{user:d,target:"_blank"}),Object(s.b)(m.a,{isFollowing:a,isFollowed:r})]}),meta:Object(s.c)("div",{children:[E,B]}),noTrackCardShow:S,extra:f?this.renderRewardDetails():I})}}]),n}(d.Component);C.contextTypes={authRequired:u.a.func},C.propTypes={action:u.a.node,status:u.a.node,meta:u.a.node,type:u.a.string,isRewardList:u.a.bool,onClick:u.a.func,currentUser:u.a.object},t.a=C},979:function(e,t,n){var r=n(1104)();e.exports=r},981:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(49),a=n(15),o=n(16),i=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(52),b=n(3),f=n.n(b),h=n(12),p=n.n(h),m=n(1103),v=n(106),O=n.n(v),g="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,r=function(){var r=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===r[e]})))&&(n=r,t(r))},a=new(window.MutationObserver||window.WebKitMutationObserver)(O()(r,100));return a.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),r(),function(){a.disconnect()}};function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var y={auto:"auto",yes:"scroll",no:"hidden"},w=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={locationHref:"",iframeHeight:900},e.iframe=null,e.iframeMessenger=null,e.iframeObserver=null,e.handleIframeLoad=function(){e.iframe.contentDocument&&(e.unlistenResize=g(e.iframe.contentDocument.body,(function(t){e.setState({iframeHeight:t.height})})))},e.handleMessage=function(t){var n=e.props.onMessage;t.type===m.b.CHANGE_IFRAME_HEIGHT&&e.setState({iframeHeight:t.payload}),t.type===m.b.REDIRECT_URL&&(window.location.href=t.payload),n&&n(t)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({locationHref:window.location.href,timestamp:Date.now()}),this.iframeMessenger=new m.a({beforeMessage:function(e){return e.origin.endsWith("zhihu.com")},onMessage:this.handleMessage})}},{key:"componentWillUnmount",value:function(){this.iframeMessenger.close(),this.unlistenResize&&this.unlistenResize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,a=t.className,o=t.scrolling,i=t.withParentUrl,c=t.withTimestamp,s=this.state,u=s.locationHref,b=s.timestamp,f=s.iframeHeight,h=n.split("?"),m=Object(r.a)(h,2),v=m[0],O=m[1],g=Object(d.parse)(O);return i&&(g.parent_url=u),c&&(g.ts=b),Object(l.b)("iframe",{className:p()("Iframe",a),src:"".concat(v,"?").concat(Object(d.stringify)(g)),ref:function(t){return e.iframe=t},height:f,onLoad:this.handleIframeLoad,scrolling:o,style:{border:"none",display:"block",overflow:y[o],width:"100%"}})}}]),n}(u.Component);w.defaultProps={scrolling:"auto",withParentUrl:!0,withTimestamp:!1},w.propTypes={className:f.a.string,src:f.a.string,scrolling:f.a.oneOf(["auto","yes","no"]),onMessage:f.a.func};var C=w},982:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return y}));var r=n(2),a=n(15),o=n(16),i=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(3),b=n.n(d),f=n(26),h=n(12),p=n.n(h),m=n(1006),v=n(46),O=n(112);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var j={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},y={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},w=function(e){Object(i.a)(n,e);var t=g(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleClickOption=function(t){var n=e.props,r=n.isOrg,a=n.target,o=n.onChange,i=n.current;if(t!==i)if(a){var c=a.id;a.adminClosedComment?Object(O.b)("此内容无法更改评论权限",{theme:"red-ghost"}):r||"censor"!==t&&"censor"!==i?o(c,t):Object(O.a)("你确定要更改评论权限吗？",{content:"censor"===t?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then((function(){return o(c,t)})).catch((function(){return null}))}else o(t)},e.getCommentPermission=function(){var t=e.props.target,n=t&&"answer"===t.type&&"paid"===t.answerType;return Object.keys(y).filter((function(e){if("paid"!==e||n)return"follower"!==e||t&&"article"===t.type})).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(r.a)({},t,y[t]))}),{})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,r=t.current,a=t.className,o=n?j:this.getCommentPermission();return Object(l.b)(u.Fragment,{children:Object.keys(o).map((function(t){return Object(l.b)(m.a,{onClick:function(){return e.handleClickOption(t)},className:p()("CommentPermission-item",a),checked:t===r,children:o[t]},t)}))})}}]),n}(u.Component);w.propTypes={current:b.a.string.isRequired,target:b.a.object,onChange:b.a.func.isRequired};t.c=Object(f.connect)((function(e){return{isOrg:Object(v.h)(e)}}))(w)},985:function(e,t,n){"use strict";var r=n(890);t.a=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",i=e.getSelection(),c=e.getCurrentContent(),s=c.createEntity(t,n,a),l=s.getLastCreatedEntityKey(),u=r.EditorState.set(e,{currentContent:s}),d=(u=r.AtomicBlockUtils.insertAtomicBlock(u,l,o)).getCurrentContent(),b=d.getBlockMap(),f=i.getStartKey(),h=d.getBlockForKey(f);h!==b.first()&&0===h.getLength()&&(b=b.delete(f),d=d.merge({blockMap:b}));var p=u.getSelection().getFocusKey(),m=d.getBlockForKey(p);return m!==b.last()&&0===m.getLength()&&(b=b.delete(p),d=d.merge({blockMap:b,selectionAfter:r.SelectionState.createEmpty(d.getKeyAfter(p))})),u=r.EditorState.set(u,{currentContent:d}),r.EditorState.forceSelection(u,u.getCurrentContent().getSelectionAfter())}}}]);
//# sourceMappingURL=main.shared_f6192560e8f91627c7a8081d8baf39b6bd05016d.c1bb6b7ca32176b2205b.js.map