(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1092:function(e,t,n){"use strict";var a=n(31),r=n.n(a),i=n(39),c=n.n(i),o=n(0),l=n.n(o),u=n(3),s=n.n(u),d=n(12),f=n.n(d),g=n(88),m=n.n(g),p=n(138),h=n(1251),b=(n(1274),n(7)),v=["text","target","url","image","imageWidth","imageHeight","component","className","size","children"],k=l.a.forwardRef((function(e,t){if(!e.notCommerce&&Object(h.b)(e.url))return Object(b.g)(h.a,c()({},e,{className:f()("old",e.className)}));var n=m()(e,["entityType","entityData","notCommerce"]),a=n.text,i=n.target,o=n.url,u=n.image,s=n.imageWidth,d=n.imageHeight,g=n.component,k=n.className,O=n.size,j=n.children,C=r()(n,v),A=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(s,d),y=Object(p.imgUrl)(u,A);return Object(b.g)(g,c()({ref:t,target:i,href:o,"data-draft-node":"block","data-draft-type":"link-card"},y&&{"data-image":y},s&&{"data-image-width":s},d&&{"data-image-height":d},O&&{"data-size":O},a!==o&&a&&{"data-text":a},{className:f()("LinkCard new",k)},C),j||Object(b.g)(l.a.Fragment,null,Object(b.g)("span",{className:"LinkCard-contents"},Object(b.g)("span",{className:"LinkCard-title loading","data-text":!0}),Object(b.g)("span",{className:"LinkCard-desc loading"})),Object(b.g)("span",{className:"LinkCard-image LinkCard-image--default"})))}));k.propTypes={component:s.a.oneOfType([s.a.string,s.a.func]),target:s.a.string,url:s.a.string.isRequired,text:s.a.string,image:s.a.string,imageWidth:s.a.oneOfType([s.a.string,s.a.number]),imageHeight:s.a.oneOfType([s.a.string,s.a.number])},k.defaultProps={component:"a",target:"_blank"},t.a=k},1094:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n(0);var a=n(907),r=n(973),i=n(1517),c=n(7),o=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g;t.a=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,l=[];return n=n.replace(o,(function(e,n){var i=Object(r.e)(n,{decodeValue:!0}),o=i["data-text"],u=void 0===o?"":o,s=i["data-url"],d=void 0===s?"":s,f=i["data-numero"],g=t?"ref_".concat(t,"_").concat(f):"ref_".concat(f),m=l.filter((function(e){return e.refKey===g})),p="".concat(g,"_").concat(m.length);l.push({refKey:g,text:u,url:d,numero:f});var h=[u,d].filter(Boolean).join(" ");return Object(a.renderToStaticMarkup)(Object(c.g)("sup",{"data-text":u,"data-url":d,"data-numero":f,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":h,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(c.g)("a",{id:p,href:"#".concat(g),"data-reference-link":!0,"aria-labelledby":g},"[",f,"]")))})),l.length?n=n.concat(Object(a.renderToStaticMarkup)(Object(c.g)(i.a,{referenceList:l}))):n}(t,e)}}},1137:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},1156:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return x})),n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return T})),n.d(t,"d",(function(){return I})),n.d(t,"g",(function(){return q}));var a=n(0),r=n.n(a),i=n(35),c=n(74),o=n(973),l=function(e,t){var n=Object(c.i)().trackEvent,r=Object(a.useCallback)((function(a){!function(e,t,n){if(!e.defaultPrevented){var a=e.target.getAttribute("data-catalog-target-id");if(a){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),i.a.trackEvent(e.target);var r=t.querySelector("#"+a);r&&(e.preventDefault(),Object(o.a)(r,10,!1))}}}(a,t||e,n)}),[e,t,n]);Object(a.useEffect)((function(){if(e)return e.addEventListener("click",r),function(){e.removeEventListener("click",r)}}),[e,r])},u=function(e){Object(a.useEffect)((function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach((function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"}))}),[e])},s=n(28),d=n.n(s),f=(n(31),n(39)),g=n.n(f),m=(n(47),n(650),n(63),n(44)),p=(n(43),n(895)),h=(n(52),n(1734),n(299),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.rootMargin,i=n.threshold,c=n.once,o=void 0===c||c;e=Array.isArray(e)?e:e?[e]:[];var l=Object(a.useRef)(null),u=Object(m.d)(t);Object(a.useEffect)((function(){if(e.length)return l.current&&e.forEach((function(e){return l.current.unobserve(e)})),l.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(u(e),o&&l.current.unobserve(e.target))}))}),{rootMargin:r,threshold:i}),e.forEach((function(e){return l.current.observe(e)})),function(){e.forEach((function(e){return l.current.unobserve(e)}))}}),[e,r,JSON.stringify(i),o])}),b=n(1510),v=n(7),k=n(68),O=n.n(k),j=n(138),C=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")},A=O()((function(){return/Mobile/.test(navigator.userAgent)}));function y(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};i.a.trackMonitor({name:t},n)}var w=function(e){var t=e.onLoadStateChange,n=e.enableWebP,a=e.size,r=e.quality;return function(e){var i=e.target,c=function(e){var t=e.image,n=e.enableWebP,a=e.size,r=e.quality,i=void 0===r?80:r,c=t.dataset,o=c.actualsrc,l=c.actualgif;return n&&l&&l.match(/.gif$/i)?o:(a||(a="720w",!A()&&window.devicePixelRatio>=1.5&&(a="1440w"),A()&&window.devicePixelRatio*window.innerWidth>=1080&&(a="1440w")),Object(j.imgUrl)(o,{quality:i,size:a}))}({image:i,enableWebP:n,size:a,quality:r});if(n&&(c=C(c)),i.src=c,i.complete)i.dataset.lazyStatus="ok";else{t&&i.addEventListener("loadstart",(function(){t("loadstart",c)})),i.dataset.lazyStatus="loading";var o=setTimeout((function(){i.complete||y(i.url,"image_web_timeout_image"),t&&t("timeout",c)}),15e3);i.addEventListener("load",(function(){i.dataset.lazyStatus="ok",clearTimeout(o),y(i.url,"image_web_success_image"),t&&t("load",c)})),i.addEventListener("error",(function(){clearTimeout(o),y(i.url,"image_web_fail_image"),t&&t("error",c)}))}}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,r=void 0===n||n,i=t.disabled,c=void 0!==i&&i,o=t.onLoadStateChange,l=t.size,u=t.quality,s=Object(a.useState)([]),f=d()(s,2),g=f[0],m=f[1],p=Object(b.a)("lossless");h(g,w({onLoadStateChange:o,enableWebP:p&&r,size:l,quality:u}),{rootMargin:"300px"}),Object(a.useEffect)((function(){if(e&&!c){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&m(t)}}),[e,c])},L=function(e,t){var n=Object(m.d)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var a=e.target.getAttribute("href"),r=t.querySelector(a);if(r){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);r.focus({preventScroll:!0}),Object(o.a)(r),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(a.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},N=(n(644),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,i.a.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.clickViewId&&(t.dataset.zaDetailViewId=t.clickViewId)}},n=new IntersectionObserver((function(e){e.forEach(t)}),{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(t){var a=t.selector,r=t.cardShowViewId,i=t.clickViewId;Array.from(e.querySelectorAll(a)).forEach((function(e){e.cardShowViewId=r,e.clickViewId=i,n.observe(e)}))})),function(){n.disconnect()}}),z="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},T=function(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){if(e)return z((function(){e&&(t.current=N(e))})),function(){t.current&&t.current()}}),[e])},E=n(1333),S=n(1137),B=n(1249),I=function(e){var t=e.contentType,n=e.token,i=e.root,c=e.mcnLinkCardProps,o=e.isAuthor,l=Object(a.useState)(null),u=d()(l,2),s=u[0],f=u[1],m=Object(a.useState)(!1),p=d()(m,2),h=p[0],b=p[1];return Object(a.useEffect)((function(){var e=i&&i.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&Object(S.a)("/api/v4/mcn/v2/linkcards?content_type=".concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(f(t),b(!0))})).catch((function(){b(!0)}))}),[i]),Object(v.g)(r.a.Fragment,null,h&&Object(v.g)(B.a,null,Object(v.g)(E.c,g()({},c,{originalData:s,root:i,isAuthor:o}))))},R=n(1590),q=function(e,t,n){var r=Object(a.useRef)(n),i=Object(m.d)((function(e){var n=e.currentTarget,a={title:n.dataset.text,href:n.href};"IMG"===e.target.tagName?Object(R.b)(e,t,Object.assign(Object.assign({},a),{},{video:{}})):Object(R.c)(e,t,a)}));Object(a.useEffect)((function(){if(e&&r.current){var t=Array.from(e.querySelectorAll(".LinkCard.new.static.zvideo"));return t.forEach((function(e){Object(p.onViewedOnce)(e,(function(){return Object(R.d)(e)})),e.addEventListener("click",i)})),function(){t.forEach((function(e){e.removeEventListener("click",i)}))}}}),[e,r,i])}},1250:function(e,t,n){"use strict";var a=n(28),r=n.n(a),i=n(31),c=n.n(i),o=n(39),l=n.n(o),u=n(0),s=n.n(u),d=n(12),f=n.n(d),g=n(35),m=n(63),p=n.n(m),h=n(6),b=n(895),v=n(178),k=n(74),O=n(1054),j=n(1385),C=n(206),A=n(1137),y=n(1245),w=n(939),x=n(1338),L=n(7),N=["id","newLinkCard"];function z(e){var t=Object(u.useRef)(null),n=e.component,a=void 0===n?"a":n,r=e.className,i=e.onClick,c=e.onMouseDown,o=e.zvideo,l=e.enableInlinePlay,d=void 0!==l&&l,m=e.onImageClick,h=void 0===m?p.a:m,A=e.onInfoClick,x=void 0===A?p.a:A,N=e.renderInjection,z=e.zaProps,E=o.id,S=o.title,B=o.url,I=o.imageUrl,R=o.video,q=R.videoId,V=R.duration,_=R.status,F=o.author,U=o.playCount,Z=o.creationReferences,M=!B?"inlinezvideo":"zvideo";Object(u.useEffect)((function(){N||Object(b.onViewedOnce)(t.current,(function(){g.a.trackCardShow(t.current,{id:7844},{button:{text:M}})}))}),[M,N]);var P=Object(u.useCallback)((function(e){g.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:M}}),h(e,o)}),[h,o,M]),D=Object(u.useCallback)((function(e){g.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:M}}),x(e,o)}),[x,o,M]);if(N){if("function"!=typeof N)throw new Error("renderInjection must be function");return N(e)}return"converting_failure"===_?Object(L.g)(T,{error:"视频转码失败，请重新上传视频"}):Object(L.g)(s.a.Fragment,null,Object(L.g)(k.c,{as:a,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:"ZTextZVideoLinkCard",zaType:"Button",extra:{link:{url:B}},className:f()("ZVideoLinkCard",r),ref:t,href:B,target:"_blank",rel:"noopener noreferrer",onClick:i,onMouseDown:c,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:E,video_id:q}}})},d?Object(L.g)(y.a,{placeholder:Object(L.g)("div",{className:"ZVideoLinkCard-playerContainer"})},Object(L.g)("div",{className:"ZVideoLinkCard-playerContainer"},Object(L.g)(O.a,{type:"video",className:"ZVideoLinkCard-player",src:"https://www.zhihu.com/video/".concat(q),iframeProps:{allowFullScreen:!0},zaProps:Object.assign({token:E},z)}))):Object(L.g)("div",{className:"ZVideoLinkCard-image",style:{backgroundImage:"url(".concat(I,")")},onClick:P},Object(L.g)(w.a,{className:"ZVideoLinkCard-playIcon"}),Boolean(V)&&Object(L.g)("div",{className:"ZVideoLinkCard-duration"},Object(j.a)(V))),Object(L.g)("div",{className:"ZVideoLinkCard-info",onClick:D},Object(L.g)("div",{className:"ZVideoLinkCard-title"},S),Boolean(B)&&Object(L.g)("div",{className:"ZVideoLinkCard-author"},Object(L.g)(C.a,{className:"ZVideoLinkCard-avatar",url:F.avatarUrl,alt:"",size:20,round:!0}),Object(L.g)("div",null,F.name),null!=Z&&Z.plaintext?Object(L.g)("div",null," ",Z.plaintext):Object(L.g)("div",null,"的视频"),Boolean(U)&&Object(L.g)("div",null," · ",Object(v.cnNiceNumber)(U),"播放")))))}function T(e){var t=e.error;return Object(L.g)("div",{className:"ZVideoLinkErrorCard"},Object(L.g)("div",{className:"ZVideoLinkErrorCard-message"},t.message||"视频加载错误"))}function E(e){var t=e.id,n=e.newLinkCard,a=c()(e,N),i=Object(u.useState)(null),o=r()(i,2),s=o[0],d=o[1],f=Object(u.useState)(null),g=r()(f,2),m=g[0],p=g[1];return Object(u.useEffect)((function(){if(!n){var e="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card");Object(A.a)(e).then((function(e){return Object(h.camelizeKeys)(e)})).then((function(e){e.error?p(e.error):d(e)})).catch((function(e){p(e)}))}}),[n,t]),n?Object(L.g)(x.a,l()({inEditor:!0,component:"div",href:"https://www.zhihu.com/zvideo/".concat(t)},a)):m?Object(L.g)(T,{error:m}):s?Object(L.g)(z,l()({zvideo:s},a)):null}E.defaultProps={newLinkCard:!1};t.a=E},1251:function(e,t,n){"use strict";n.d(t,"b",(function(){return g}));var a=n(31),r=n.n(a),i=n(39),c=n.n(i),o=(n(0),n(88)),l=n.n(o),u=n(12),s=n.n(u),d=n(7),f=["target","url","image","imageWidth","imageHeight","component","size","className"],g=function(e){return e.includes("BIZ=ECOMMERCE")||e.includes(encodeURIComponent("BIZ=ECOMMERCE"))},m=function(e){return Object(d.g)("div",e,Object(d.g)("span",null),Object(d.g)("span",null))},p=function(e){var t=l()(e,["entityType","entityData","newLinkCard"]),n=t.target,a=t.url,i=t.image,o=t.imageWidth,u=t.imageHeight,g=t.component,p=t.size,h=t.className,b=r()(t,f);return Object(d.g)(g,c()({target:n,href:a,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1","data-image":i},o&&{"data-image-width":o},u&&{"data-image-height":u},p&&{"data-size":p},{className:s()("LinkCard",h)},b),Object(d.g)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard"},Object(d.g)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper"},Object(d.g)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})),Object(d.g)(m,{className:"LinkCard-ecommerceLoadingCardLoadingbar"})))};p.defaultProps={component:"a",target:"_blank"};t.a=p},1272:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return k}));var a=n(0),r=n.n(a),i=n(12),c=n.n(i),o=n(1273),l=n.n(o),u=n(178),s=n(2769),d=n(2013),f=n(7),g={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},m={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},p={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},h=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(f.g)("span",{className:c()("LinkCard-title",{"two-line":t})},n)},b=function(e){var t=e.data,n=t.objectType,a=(p[n]||p.default).map((function(e){var n=t[e];return"".concat(Object(u.cnNiceNumber)(n)).concat(m[e])})).filter(Boolean).join(" · ");return Object(f.g)("span",{className:"LinkCard-desc"},a,Object(f.g)("span",{className:"LinkCard-tag"},g[n]))},v=function(e){var t=e.url,n=Object(a.useMemo)((function(){var e=null,n=l()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(f.g)("span",{className:"LinkCard-desc"},Object(f.g)(s.a,{size:14,center:!0}),n)},k=function(e){var t=e.url,n=e.isVideo,a=e.ratio,r=void 0===a?1:a,i=e.onClick;return Boolean(t)&&Object(f.g)("span",{className:"LinkCard-image",style:{height:60*r}},Object(f.g)("img",{src:t,onClick:i,alt:n?"点击可播放视频":""}),n&&Object(f.g)("span",{className:"LinkCard-image--video"},Object(f.g)(d.a,{size:10,center:!0})))},O=function(e,t){var n=e.url,a=e.data,i=e.onClick,c=e.onClickImage,o=a.title,l=a.thumbnail,u=a.objectType;return Object(f.g)(r.a.Fragment,null,Object(f.g)("span",{ref:t,className:"LinkCard-contents",onClick:i},Object(f.g)(h,{twoLine:!0},o),u?Object(f.g)(b,{data:a}):Object(f.g)(v,{url:n})),Object(f.g)(k,{url:l,isVideo:"zvideo"===u,onClick:c}))};t.d=r.a.forwardRef(O)},1273:function(e,t,n){"use strict";(function(t){var a=n(467),r=n(468),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,o=/^[a-zA-Z]:/,l=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(e){return(e||"").toString().replace(l,"")}var s=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function f(e){var n,a=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},r={},c=typeof(e=e||a);if("blob:"===e.protocol)r=new p(unescape(e.pathname),{});else if("string"===c)for(n in r=new p(e,{}),d)delete r[n];else if("object"===c){for(n in e)n in d||(r[n]=e[n]);void 0===r.slashes&&(r.slashes=i.test(e.href))}return r}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=u(e),t=t||{};var n,a=c.exec(e),r=a[1]?a[1].toLowerCase():"",i=!!a[2],o=!!a[3],l=0;return i?o?(n=a[2]+a[3]+a[4],l=a[2].length+a[3].length):(n=a[2]+a[4],l=a[2].length):o?(n=a[3]+a[4],l=a[3].length):n=a[4],"file:"===r?l>=2&&(n=n.slice(2)):g(r)?n=a[4]:r?i&&(n=n.slice(2)):l>=2&&g(t.protocol)&&(n=a[4]),{protocol:r,slashes:i||g(r),slashesCount:l,rest:n}}function p(e,t,n){if(e=u(e),!(this instanceof p))return new p(e,t,n);var i,c,l,d,h,b,v=s.slice(),k=typeof t,O=this,j=0;for("object"!==k&&"string"!==k&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),i=!(c=m(e||"",t=f(t))).protocol&&!c.slashes,O.slashes=c.slashes||i&&t.slashes,O.protocol=c.protocol||t.protocol||"",e=c.rest,("file:"===c.protocol&&(2!==c.slashesCount||o.test(e))||!c.slashes&&(c.protocol||c.slashesCount<2||!g(O.protocol)))&&(v[3]=[/(.*)/,"pathname"]);j<v.length;j++)"function"!=typeof(d=v[j])?(l=d[0],b=d[1],l!=l?O[b]=e:"string"==typeof l?~(h=e.indexOf(l))&&("number"==typeof d[2]?(O[b]=e.slice(0,h),e=e.slice(h+d[2])):(O[b]=e.slice(h),e=e.slice(0,h))):(h=l.exec(e))&&(O[b]=h[1],e=e.slice(0,h.index)),O[b]=O[b]||i&&d[3]&&t[b]||"",d[4]&&(O[b]=O[b].toLowerCase())):e=d(e,O);n&&(O.query=n(O.query)),i&&t.slashes&&"/"!==O.pathname.charAt(0)&&(""!==O.pathname||""!==t.pathname)&&(O.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=n.length,r=n[a-1],i=!1,c=0;a--;)"."===n[a]?n.splice(a,1):".."===n[a]?(n.splice(a,1),c++):c&&(0===a&&(i=!0),n.splice(a,1),c--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(O.pathname,t.pathname)),"/"!==O.pathname.charAt(0)&&g(O.protocol)&&(O.pathname="/"+O.pathname),a(O.port,O.protocol)||(O.host=O.hostname,O.port=""),O.username=O.password="",O.auth&&(d=O.auth.split(":"),O.username=d[0]||"",O.password=d[1]||""),O.origin="file:"!==O.protocol&&g(O.protocol)&&O.host?O.protocol+"//"+O.host:"null",O.href=O.toString()}p.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),i[e]=t;break;case"port":i[e]=t,a(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var c="pathname"===e?"/":"#";i[e]=t.charAt(0)!==c?c+t:t}else i[e]=t;break;default:i[e]=t}for(var o=0;o<s.length;o++){var l=s[o];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.origin="file:"!==i.protocol&&g(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(n.slashes||g(n.protocol)?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},p.extractProtocol=m,p.location=f,p.trimLeft=u,p.qs=r,e.exports=p}).call(this,n(110))},1274:function(e,t,n){},1275:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(31),r=n.n(a),i=n(39),c=n.n(i),o=n(214),l=n(0),u=n.n(l),s=n(61),d=n(2770),f=n(1592),g=n(994),m=n(12),p=n.n(m),h=n(83),b=n(1065),v=n(973),k=n(7),O=["children","pl","targetId","handleScroll","index"],j=["className"],C=["className"];var A={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},y={name:"160ybly",styles:"cursor:pointer;align-items:center;"},w=function(e){var t=e.children,n=e.pl,a=e.targetId,i=e.handleScroll,l=e.index,u=r()(e,O);return Object(k.g)(s.Text,c()({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:A},u),Object(k.g)(s.Flex,{pl:n,css:y,"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){i(e,l)}},Object(k.g)(s.Text,{css:Object(o.a)([Object(h.d)(1),{pointerEvents:"none",wordBreak:"break-all"}],""),dangerouslySetInnerHTML:{__html:t}}),Object(k.g)(d.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})))},x={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},L=function(e){var t=e.className,n=r()(e,j);return Object(k.g)(w,c()({className:p()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:x},n))},N={name:"q7f27s",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:0px;}"},z={name:"4g6ai3",styles:"cursor:pointer;"},T={name:"eg4v4b",styles:"margin-top:1px;"},E=u.a.forwardRef((function(e,t){var n=e.isFold,a=e.onClick,r=n?f.a:g.a,i=n?"展开目录":"收起目录";return Object(k.g)(u.a.Fragment,null,Boolean(n)&&Object(k.g)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(k.g)(s.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:z,onClick:a},i,Object(k.g)(r,{size:18,css:T})))})),S={1:L,2:function(e){var t=e.className,n=r()(e,C);return Object(k.g)(w,c()({className:p()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:N},n))}},B={name:"7cjcr7",styles:"& .Catalog-wrapper{position:relative;}"},I={name:"npr4z8",styles:"margin-bottom:18px !important;margin-top:0px !important;"};t.b=function(e){var t=e.catalog,n=e.className,a=e.canFold,r=e.inEditor,i=e.scrollOffset,c=void 0===i?0:i,o=a&&!r&&(null==t?void 0:t.length)>3,u=Object(l.useCallback)((function(e,t){if(r){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(v.a)(a,c)}))}}}),[r,c]);return null!=t&&t.length?Object(k.g)(s.Box,{className:p()(n,"Catalog"),mb:"48px",css:B,"data-za-detail-view-name":"正文"},Object(k.g)("h2",{css:I},"目录"),Object(k.g)(s.Box,{className:"Catalog-wrapper"},Object(k.g)(s.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:o?"84px":"auto"},t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,r=e.index;if(e.status===b.a.removed)return null;var i=S[t]||L;return Object(k.g)(i,{key:String([a,r]),targetId:a,handleScroll:u,index:r},n)}))),Boolean(o)&&Object(k.g)(E,{isFold:!0}))):r?Object(k.g)(s.Flex,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(k.g)(s.Box,{size:"160px",mb:"10px"},Object(k.g)(s.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(k.g)(s.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center"},"在内容中设置标题将会在此处同步展示")):null}},1333:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return F})),n.d(t,"e",(function(){return Z})),n.d(t,"d",(function(){return W})),n.d(t,"f",(function(){return ee})),n.d(t,"b",(function(){return ie}));var a,r=n(31),i=n.n(r),c=n(28),o=n.n(c),l=n(39),u=n.n(l),s=n(0),d=n.n(s),f=n(63),g=n.n(f),m=n(47),p=n(7),h=["root"],b=function(e){return function(t){var n=Object(s.useState)(null),a=o()(n,2),r=a[0],c=a[1],l=e.idAttr,d=e.selector,f=e.component,b=e.targetClassName,v=e.cardDataFilter,k=e.getCardProps,O=t.root,j=i()(t,h),C=l&&d&&b&&Object(s.useCallback)(function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var a=e.getAttribute(t),r=document.createElement("div");return r.className=n,e.parentNode.replaceChild(r,e),{data:{id:a},target:r}}}({idAttr:l,targetClassName:b}),[l,b]),A=Object(s.useMemo)((function(){return C?function(e){return Array.from(e.querySelectorAll(d)).map(C)}:g.a}),[C,O,d]);return Object(s.useEffect)((function(){if(O||d&&v){var e=(v||A)(O).map((function(e){var t=e.data,n=e.target,a=null;return"function"==typeof k&&(a=k(t)),Object(m.createPortal)(Object(p.g)(f,u()({key:t.id,id:t.id},a,j)),n)}));e.length>0&&c(e)}}),[O]),r}},v=b({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:n(1516).a}),k=n(35),O=n(74),j=n(6),C=n(1137),A=n(435),y=n.n(A),w=n(12),x=n.n(w),L=n(209),N=n.n(L),z=n(138),T=n(178),E=function(e){var t=e.authorName,n=e.voteupCount;return Object(p.g)(d.a.Fragment,null,N()(a||(a=y()(["","的文章"])),t),n>=100&&" · ".concat(Object(T.cnNiceNumber)(n),"赞同"))};function S(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,i=e.excerptText,c=e.imgUrlSrc,o=e.voteupCount,l=e.commentCount;return Object(p.g)("div",{className:"ArticleLinkCard",ref:t},Object(p.g)("span",{className:"ArticleLinkCard-title"},r),Boolean(i)&&Object(p.g)("div",{className:"ArticleLinkCard-excerpt"},i),c&&Object(p.g)("div",{className:"ArticleLinkCard-imageWrapper"},Object(p.g)("img",{src:Object(z.imgUrl)(c,"540x300"),className:"ArticleLinkCard-image",alt:""})),Object(p.g)("div",{className:"ArticleLinkCard-bottom"},Object(p.g)("span",{className:"ArticleLinkCard-hint"},"".concat(Object(T.cnNiceNumber)(o),"赞同 · ").concat(Object(T.cnNiceNumber)(l),"评论")),n&&Object(p.g)("span",{onClick:a,className:"ArticleLinkCard-hybridLink"},"查看完整文章")),Object(p.g)("div",{className:"ArticleLinkCard-bottomCardGradient"}))}function B(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,i=e.content,c=e.imgUrlSrc,o=e.voteupCount,l=e.authorName,u=e.avatarUrl;return Object(p.g)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",ref:t},Object(p.g)("div",{className:"AvatarArticleLinkCard-info"},Object(p.g)("div",{className:"AvatarArticleLinkCard-hint"},u&&Object(p.g)("img",{className:"AvatarArticleLinkCard-avatar",src:u,alt:""}),Object(p.g)(E,{authorName:l,voteupCount:o})),n&&Object(p.g)("span",{onClick:a,className:"AvatarArticleLinkCard-hybridLink"},"查看全文")),Object(p.g)("span",{className:"ArticleLinkCard-title"},r),Object(p.g)("div",{className:x()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!c})},Object(p.g)("div",{dangerouslySetInnerHTML:{__html:i}})),!c&&Object(p.g)("span",{className:"AvatarArticleLinkCard-more"},"更多内容"),c&&Object(p.g)("img",{className:"AvatarArticleLinkCard-image",src:c,alt:""}))}function I(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,i=e.content,c=e.imgUrlSrc,o=e.voteupCount,l=e.authorName;return Object(p.g)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",ref:t},Object(p.g)("span",{className:"ArticleLinkCard-title"},r),Object(p.g)("div",{className:"QuoteArticleLinkCard-hint"},Object(p.g)(E,{authorName:l,voteupCount:o})),Object(p.g)("div",{className:x()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!c})},Object(p.g)("div",{dangerouslySetInnerHTML:{__html:i}})),!c&&n&&Object(p.g)("div",{onClick:a,className:"QuoteArticleLinkCard-hybridLink"},"查看全文"),c&&Object(p.g)("img",{className:"QuoteArticleLinkCard-image",src:c,alt:""}))}function R(e){var t=e.article,n=t.title,a=t.excerpt,r=t.content,i=t.imageUrl,c=t.voteupCount,o=t.commentCount,l=t.author,u=void 0===l?{}:l,d=e.styleAbParam,f=e.cardRef,g=e.useOpenArticleButton,m=e.handleClickLink,h=Object(s.useMemo)((function(){var e=document.createElement("div");return e.innerHTML=a,e.textContent}),[a]),b=u.name,v=u.avatarUrl;return"1"===d?Object(p.g)(B,{cardRef:f,useOpenArticleButton:g,handleClickLink:m,title:n,content:r,imgUrlSrc:i,voteupCount:c,authorName:b,avatarUrl:v}):"2"===d?Object(p.g)(I,{cardRef:f,useOpenArticleButton:g,handleClickLink:m,title:n,content:r,imgUrlSrc:i,voteupCount:c,authorName:b}):Object(p.g)(S,{cardRef:f,useOpenArticleButton:g,handleClickLink:m,title:n,excerptText:h,imgUrlSrc:i,voteupCount:c,commentCount:o})}var q=["id","useOpenArticleButton","enableZa","styleAbParam"],V=function(e){var t=e.article.id,n=e.article,a=e.useOpenArticleButton,r=e.enableZa,i=e.styleAbParam,c=Object(s.useRef)(null);Object(s.useEffect)((function(){r&&(k.a.setModule(c.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),k.a.trackCardShow(c.current,{id:8589,element:"Card"}))}),[r,t]);var o="https://zhuanlan.zhihu.com/p/".concat(t),l=Object(s.useCallback)((function(){r&&k.a.trackEvent(c.current,{id:8590,action:"OpenUrl",element:"Card"})}),[r]);return Object(p.g)(O.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:o}},href:o,"data-za-not-track-link":!0,onClick:l,rel:"noopener noreferrer",target:"_blank"},Object(p.g)(R,{styleAbParam:i,cardRef:c,useOpenArticleButton:a,linkUrl:o,handleClickLink:l,article:n}))},_=(b({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type"),r="normal"===e.getAttribute("data-size");if(!n||!a||!r)return null;var i=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(i){var c=document.createElement("div");return c.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(c,e),{data:{id:i},target:c}}return null})).filter(Boolean)},component:function(e){var t=e.id,n=e.useOpenArticleButton,a=e.enableZa,r=e.styleAbParam,c=i()(e,q),l=Object(s.useState)(null),d=o()(l,2),f=d[0],g=d[1],m=Object(s.useState)(null),h=o()(m,2),b=h[0],v=h[1],k=r&&["1","2"].includes(r)?"1":"0";return Object(s.useEffect)((function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(k);Object(C.a)(e).then((function(e){return Object(j.camelizeKeys)(e)})).then((function(e){e.error?v(e.error.message):g(e)})).catch((function(e){v(e.message||"未知错误")}))}),[t,k]),b?Object(p.g)("div",{className:"ArticleLinkCard-error"},b):f?Object(p.g)(V,u()({article:f,useOpenArticleButton:n,enableZa:a,styleAbParam:r},c)):Object(p.g)("div",{className:"ArticleLinkCard-loading"},"加载中...")}}),n(1154)),F=b({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:_.a}),U=n(1338),Z=b({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),a=document.createElement("div");return a.className="RichText-LinkCardContainer",e.parentNode.replaceChild(a,e),{data:n,target:a}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:U.a}),M=n(24),P=n.n(M),D=n(895),Q=n(1249),H=n(942),K=n.n(H),W=b({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,a=Object(s.useRef)(!1),r=Object(s.useState)({}),i=o()(r,2),c=i[0],l=i[1],u=Object(s.useState)(!1),d=o()(u,2),f=d[0],g=d[1];return Object(s.useEffect)((function(){Object(C.a)("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(j.camelizeKeys)(e)||{},a=n.title,r=n.desc,i=n.cover,c=n.button,o=n.resourceId,u=n.resourceName,s=n.price,d=n.error,f={};!K()(e)&&K()(d)&&(f=P()({},t,{id:t,skuId:o,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:a,subtitle:r,price:{price:s},goodsImg:{imgUrl:i,imgShape:"rectangle",cornerText:u},goodsUrl:{url:null==c?void 0:c.url},btnText:"去查看"}})),l(f),g(!0)})).catch((function(){g(!0)}))}),[t]),f&&!K()(c)?Object(p.g)(Q.a,null,Object(p.g)(_.a,{id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===a.current&&(k.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(D.onViewedOnce)(e,(function(){k.a.trackCardShow(e,{id:7203})})),a.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:c,onClick:function(e){k.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}})):null}}),G=n(44),J=function(e){return{elementLocation:{type:"Button",content:{type:e.dataset.zaContentType}}}},X=function(e){return{attachedInfoBytes:e.dataset.zaAttachInfo}},Y=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not([data-za-content-type="Zvideo"])',zaBlock:"ZTextLinkCard",viewInfoBuilder:J,extraInfoBuilder:X},{selector:'a.LinkCard.new.static[data-draft-type="link-card"][data-za-content-type="Zvideo"]',zaBlock:"ZTextZVideoLinkCard",viewInfoBuilder:J,extraInfoBuilder:X},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],$=function(e){var t,n,a=e.element,r=e.config,i=null===(t=r.viewInfoBuilder)||void 0===t?void 0:t.call(r,a,r),c=Object.assign({elementLocation:{type:"Button"},block:r.zaBlock},i),o=Object.assign({action:"OpenUrl",elementLocation:{type:"Button"},block:r.zaBlock,eventType:"Click"},i),l=Object.assign({link:{url:a.href}},null===(n=r.extraInfoBuilder)||void 0===n?void 0:n.call(r,a,r)),u=Object(O.i)().trackEvent,d=Object(O.h)(c,l),f=Object(G.d)((function(e){u(o,l),"ZTextLinkCard"===r.zaBlock&&a.dataset.isEcommerce&&e.preventDefault()}));return Object(s.useEffect)((function(){return a.addEventListener("click",f),function(){a.removeEventListener("click",f)}}),[]),Object(s.useEffect)((function(){return d(a),function(){return d(null)}}),[]),null},ee=function(e){var t=e.root,n=Object(s.useState)([]),a=o()(n,2),r=a[0],i=a[1];return Object(s.useEffect)((function(){if(t){var e=[];Y.forEach((function(n){var a=n.selector;Array.from(t.querySelectorAll(a)).forEach((function(t){e.push({el:t,config:n})}))})),i(e)}}),[t]),Object(p.g)(d.a.Fragment,null,r.map((function(e,t){var n=e.el,a=e.config;return Object(p.g)($,{key:t,element:n,config:a})})))},te=(b({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type");if(!n||!a)return null;var r=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(r){var i=document.createElement("div");return i.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:r},target:i}}return null})).filter(Boolean)},component:n(1250).a}),n(61)),ne=n(1275);var ae={name:"1wtde8n",styles:"font-size:12px;overflow:hidden;"},re=function(e){var t=e.contentHTML,n=Object(s.useState)(!0),a=o()(n,2),r=a[0],i=a[1],c=Object(G.d)((function(){i(!r)}));return Object(p.g)(O.b,{block:"ZTextCatalog"},Object(p.g)(O.e,{as:te.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:ae,style:{height:r?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(p.g)(O.a,{as:ne.a,zaType:"Button",zaAction:r?"Expand":"Collapse",isFold:r,onClick:c}))},ie=function(e){var t=e.root,n=Object(s.useState)(null),a=o()(n,2),r=a[0],i=a[1];return Object(s.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,a=document.createElement("div");a.className="Catalog-wrapper",e.parentNode.replaceChild(a,e),i(Object(m.createPortal)(Object(p.g)(re,{contentHTML:n}),a))}}}),[t]),r}},1338:function(e,t,n){"use strict";var a=n(28),r=n.n(a),i=n(31),c=n.n(i),o=n(39),l=n.n(o),u=n(0),s=n.n(u),d=n(74),f=n(88),g=n.n(f),m=n(1272),p=n(1092),h=n(40),b=n.n(h),v=n(207),k=n.n(v),O=n(44),j=n(53),C=n.n(j),A=n(21),y=n.n(A),w=n(23),x=n.n(w),L=n(6),N=n(1273),z=n.n(N),T=function(){function e(t){var n=this;y()(this,e),this.fetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.url||(n.url=e),e!==n.url)throw new Error("mismatch url\n".concat(e,"\n").concat(n.url),e,n.url);return new Promise((function(e,a){n.addToQueue({options:t,resolve:e,reject:a})}))},this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return x()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,a=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),a&&(this.maxBatchCount=a),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=r()(e,1)[0].options,n=e.reduce((function(e,t){var n,a;return(null===(n=(a=t.options).dataBuilder)||void 0===n?void 0:n.call(a,e,t))||e}),{}),a=this.url,i=!t.method||"GET"===t.method.toUpperCase();if(i){var c=z()(a,!0);c.query=Object.assign(Object.assign({},c.query),n),a=c.toString()}return[a,Object.assign(Object.assign({},t),{},{data:i?null:Object.assign(Object.assign({},t.data),n)})]}},{key:"doFetch",value:(t=k()(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,C()(this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,a=e.resolve;t.resultBuilder?a(t.resultBuilder(n)):a(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),E=null,S=function(e){return function(t,n){return E||(E=new T(e)),E.fetch(t,n)}}(function(e){return function(){var t=k()(b.a.mark((function t(n,a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,a);case 2:return r=t.sent,t.t0=L.camelizeKeys,t.next=6,r.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(fetch)),B={},I=function(e){var t=Object(u.useRef)(0),n=e.inEditor,a=e["data-offset-key"],i=e["data-text"],c=e["data-image"],o=e.href,l=Object(u.useState)((function(){return n&&B[a]||null})),s=r()(l,2),d=s[0],f=s[1],g=Object(O.f)({once:!0}),m=r()(g,2),p=m[0],h=m[1],v=Object(O.d)((function(e){var t=e||d;if(!t||0===Object.keys(t).length)return{objectType:null,title:i||o,thumbnail:c};t.title=i||t.title||o,t.thumbnail=c||t.thumbnail;var r=Object.assign(Object.assign({},t),{},{cached:!0});return n&&(B[a]=r),r})),j=Object(O.d)(k()(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,S("https://www.zhihu.com/api/v4/link_card_infos",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(o),e},resultBuilder:function(e){return e[o]}});case 4:n=e.sent,f(v(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?j():f(v());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(u.useEffect)((function(){!h||d&&d.cached||j()}),[h,d,j]),Object(u.useEffect)((function(){n&&f(v())}),[n,v,i,c]),[p,d]},R=n(1590),q=n(299),V=n(7),_=["inEditor","data-text","href","zaBlock"],F={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},U=s.a.forwardRef((function(e,t){var n=g()(e,["zvideoLinkCardProps"]),a=n.inEditor,i=n["data-text"],o=n.href,s=n.zaBlock,f=c()(n,_),h=Object(u.useRef)(),b=I(e),v=r()(b,2),k=v[0],O=v[1],j=Object(R.a)(e,h,"zvideo"===(null==O?void 0:O.objectType)),C=j.handleImageClick,A=j.handleInfoClick,y=Object(u.useCallback)(Object(q.a)(t,k,h),[]),w=a?m.d:d.a,x=a?null:{as:m.d,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:s,extra:{link:{url:o}},"data-za-module":"Content"},L=Object(V.g)(w,l()({},x,{url:o,data:O,onClick:A,onClickImage:C}));return Object(V.g)(p.a,l()({ref:y,text:i,url:o,component:"a"},f),Boolean(O)&&Object(V.g)(d.b,{content:{type:F[O.objectType]||"Unknown"}},L))}));t.a=U},1385:function(e,t,n){"use strict";function a(e){var t=String(e);return t.length<2&&(t="0"+t),t}t.a=function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(a(n),":").concat(a(t))}},1510:function(e,t,n){"use strict";var a=n(28),r=n.n(a),i=n(0),c=n(131);var o="function"==typeof Image,l={},u=o?c((function(e){return new Promise((function(t){return n=e,a=function(e,n){l[e]=n,t(n)},(r=new Image).onload=function(){var e=r.width>0&&r.height>0;a(n,e)},r.onerror=function(){a(n,!1)},void(r.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,a,r}))})):function(){return Promise.resolve(!1)};t.a=function(e){var t=l[e],n=Object(i.useState)(t),a=r()(n,2),c=a[0],s=a[1];return o&&void 0===t&&u(e).then(s),c}},1516:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var a=n(3),r=n.n(a),i=n(44),c=n(7);function o(e){var t=e.id,a=e.parentType,r=e.parentId,o=e.suger,l=e.data,u=e.isEditor,s=void 0!==u&&u,d=Object(i.e)((function(){return Promise.all([n.e(12),n.e(29)]).then(n.bind(null,2859))}),t),f=Object(i.e)((function(){return n.e(30).then(n.bind(null,2857))}),t);return t.startsWith("fee_")&&f?Object(c.g)(f,{id:t,isEditor:s}):d?Object(c.g)(d,{id:t,parentType:a,urlToken:r,suger:o,data:l,isEditor:s}):null}o.propTypes={id:r.a.string.isRequired,parentType:r.a.oneOf(["answer","article"]),parentId:r.a.string,suger:r.a.object,data:r.a.object,isEditor:r.a.bool};var l=o},1517:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(185),c=n.n(i),o=n(7);t.a=function(e){var t=e.referenceList,n=e.onClick,a=e.listRef;return Object(o.g)(r.a.Fragment,null,Object(o.g)("h2",null,"参考"),Object(o.g)("ol",{className:"ReferenceList",onClick:n,ref:a},c()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),a=n.length>1?Object(o.g)(r.a.Fragment,null,Object(o.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(o.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(o.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(o.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(o.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&Object(o.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(o.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))}},1590:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(0),r=n(895),i=n(35),c=n(44),o=function(e){i.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}})},l=function(e,t,n){var a;i.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)},u=function(e,t,n){var a;i.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)};t.a=function(e,t,n){var i=e["data-text"],s=e.href,d=e.zvideoLinkCardProps;Object(a.useEffect)((function(){n&&Object(r.onViewedOnce)(t.current,(function(){return o(t.current)}))}),[n,t]);var f=Object(c.d)((function(e){l(e,{title:i,url:s,video:{}})})),g=Object(c.d)((function(e){u(e,d,{title:i,url:s})}));return n?{handleImageClick:f,handleInfoClick:g}:{}}},943:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return m}));n(0);var a=n(248),r=n(907),i=n(1094),c=n(1275),o=n(1065),l=n(7),u=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,s={h2:1,h3:2},d=function(e,t){return"h_".concat(e||"editor","_").concat(t)},f=function(e){return e.replace(i.b,"").replace(/<[^>]*>/g,"")},g=function(e){return s[e]},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var a=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(u,(function(e,r){var i,c,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=f(l),s=g(r),m=d(t,a.length),p=(null===(i=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===i||null===(c=i[0])||void 0===c?void 0:c.indexOf(o.a.removed))>-1?o.a.removed:"";return a.push({text:u,titleLevel:s,Tag:r,targetId:m,status:p}),n({text:u,titleLevel:s,targetId:m,Tag:r,originText:l,status:p})})),{catalog:a,html:e}},p=function(e){var t=e.originText,n=e.targetId,a=e.Tag,i=e.status;return Object(r.renderToStaticMarkup)(Object(l.g)(a,{id:n,"data-into-catalog-status":i,dangerouslySetInnerHTML:{__html:t}}))};t.a=function(e){return function(t,n){var i=n.sourceId,o=n.theme,u=n.shouldShowCatalog,s=n.shouldFoldCatalog;if(!t)return t;if(!u)return t;var d=m(t,i,p),f=d.catalog,g=d.html;return f.length?e?g:Object(r.renderToStaticMarkup)(Object(l.g)(a.a,{theme:o},Object(l.g)(c.b,{catalog:f,canFold:s}))).concat(g):g}}},973:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u}));var a=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,r=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.decodeValue,i=void 0!==r&&r,o={};t=a.exec(e);){var l=t[1],u=t[3]||t[4];o[l]=(i?c(u):u)||""}return o},i=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function o(){return Math.max(window.innerHeight/10,100)}var l=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=l(e),r=e.getBoundingClientRect().top+(a.pageYOffset||a.scrollTop||0)-(n?o():0)-t;a.scrollTo({top:r,behavior:"smooth"})}}}]);
//# sourceMappingURL=main.shared_f8ff04d964e022a8be008229adeca1f3328f4f35.219248c5f991ae368a59.js.map