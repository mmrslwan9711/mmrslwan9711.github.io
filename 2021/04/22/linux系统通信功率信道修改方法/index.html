<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="linux系统通信功率信道修改方法, 漫漫人生路">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>linux系统通信功率信道修改方法 | 漫漫人生路</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="漫漫人生路" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>




<body>
    
    
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">漫漫人生路</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/navigate" class="waves-effect waves-light">
      
      <i class="fas fa-location-arrow" style="zoom: 0.6;"></i>
      
      <span>导航</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Medias</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/movies">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>电影</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>书单</span>
        </a>
      </li>
      
      <li>
        <a href="/games">
          
          <i class="fas fa-gamepad" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>游戏</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">漫漫人生路</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/navigate" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-location-arrow"></i>
			
			导航
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Medias
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/movies " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>电影</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>书单</span>
                  </a>
                </li>
              
                <li>

                  <a href="/games " style="margin-left:75px">
				  
				   <i class="fa fas fa-gamepad" style="position: absolute;left:50px" ></i>
			      
		          <span>游戏</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/mmrslwan1110" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/mmrslwan1110" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/8.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">linux系统通信功率信道修改方法</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/linux/">
                                <span class="chip bg-color">linux</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/linux/" class="post-category">
                                linux
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-04-22
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-05-17
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    4.1k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    21 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="linux系统通信功率信道修改方法"><a href="#linux系统通信功率信道修改方法" class="headerlink" title="linux系统通信功率信道修改方法"></a>linux系统通信功率信道修改方法</h1><h2 id="配置频段"><a href="#配置频段" class="headerlink" title="配置频段"></a>配置频段</h2><h3 id="可以先查看有哪些频段："><a href="#可以先查看有哪些频段：" class="headerlink" title="可以先查看有哪些频段："></a>可以先查看有哪些频段：</h3><p><code>iwlist channel</code> </p>
<p>可用信道<br><pre class="line-numbers language-none"><code class="language-none">wlan0     13 channels in total; available frequencies :
          Channel 01 : 2.412 GHz
          Channel 02 : 2.417 GHz
          Channel 03 : 2.422 GHz
          Channel 04 : 2.427 GHz
          Channel 05 : 2.432 GHz
          Channel 06 : 2.437 GHz
          Channel 07 : 2.442 GHz
          Channel 08 : 2.447 GHz
          Channel 09 : 2.452 GHz
          Channel 10 : 2.457 GHz
          Channel 11 : 2.462 GHz
          Channel 12 : 2.467 GHz
          Channel 13 : 2.472 GHz
          Current Frequency:2.422 GHz (Channel 3)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h3 id="改变信道"><a href="#改变信道" class="headerlink" title="改变信道"></a>改变信道</h3><p><code>sudo iwconfig wlan1 channel 1</code></p>
<p>iwlist channel显示：</p>
<pre class="line-numbers language-none"><code class="language-none">13 channels in total; available frequencies :
        Current Frequency:2.412 GHz (Channel 1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="修改发射功率"><a href="#修改发射功率" class="headerlink" title="修改发射功率"></a>修改发射功率</h3><p><code>sudo iwconfig wlan1 txpower X</code></p>
<p>Tx 是发射（Transmits）的简称。无线电波的发射功率是指在给定频段范围内的能量，通常有两种衡量或测量标准：</p>
<ol>
<li>功率（W）：相对1 瓦（Watts）的线性水准。例如,WiFi 无线网卡的发射功率通常为0.036W ，或者说36mW。</li>
<li>增益（dBm）：相对1 毫瓦（milliwatt）的比例水准。例如,WiFi 无线网卡的发射增益为15.56dBm。</li>
</ol>
<ul>
<li>功率单位mW 和dBm 的换算：</li>
</ul>
<ol>
<li>dBm = 10 * lg[ 功率mW]               //即，以10为底数取[功率mW]对数，然再乘以10</li>
<li>mW = 10^[增益dBm / 10dBm]     //即，以10为底数，[增益dBm/10dBm]为指数，计算取值</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">    10    W        的无线发射功率为  40 dBm
    6.4   W        的无线发射功率为  38 dBm
    3.2   W        的无线发射功率为  35 dBm
    1.6   W        的无线发射功率为  32 dBm    
    1000  mW       的无线发射功率为  30 dBm
    800   mW       的无线发射功率为  29 dBm
    400   mW       的无线发射功率为  26 dBm
    200   mW       的无线发射功率为  23 dBm
    100   mW       的无线发射功率为  20 dBm
    50    mW       的无线发射功率为  17 dBm
    25    mW       的无线发射功率为  14 dBm
    12.5  mW       的无线发射功率为  11 dBm
    10.34 mW       的无线发射功率为  10 dBm
    8.26  mW       的无线发射功率为  9  dBm
    6.25  mW       的无线发射功率为  8  dBm
    3.125 mW       的无线发射功率为  5  dBm
    1     mW       的无线发射功率为  0  dBm
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>经测试树莓派的发射功率最大可以达到31dBm、linux电脑可以达到20dBm。<br>树莓派可以通过命令行切换信道，linux电脑无法切换信道。<br>和学长讨论后不知道是不是伪切换信道需要进行测试。</p>
<h2 id="测试是否为伪切换"><a href="#测试是否为伪切换" class="headerlink" title="测试是否为伪切换"></a>测试是否为伪切换</h2><p>让树莓派连接到一个固定信道的路由器进行测试。</p>
<ol>
<li><p>若无法切换信道则可以推断，树莓派确实能够切换上行信道</p>
</li>
<li><p>若可以切换信道，且可以上传则证明树莓派伪切换信道</p>
</li>
</ol>
<h2 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h2><pre><code>准备一个路由器，将信道调整为固定信道1，树莓派尝试进行连接(修改配置文件)。
</code></pre><h3 id="测试是否连接到固定信道路由器"><a href="#测试是否连接到固定信道路由器" class="headerlink" title="测试是否连接到固定信道路由器"></a>测试是否连接到固定信道路由器</h3><pre class="line-numbers language-none"><code class="language-none">iwconfig
wlan0     IEEE 802.11bgn  ESSID:&quot;CH1&quot;
          Mode:Managed  Frequency:2.412 GHz  Access Point: C8:3A:35:58:A4:D8
          Bit Rate&#x3D;72.2 Mb&#x2F;s   Tx-Power&#x3D;31 dBm
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:on
          Link Quality&#x3D;70&#x2F;70  Signal level&#x3D;-38 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:5  Invalid misc:0   Missed beacon:0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">ping 192.168.2.100
PING 192.168.2.100 (192.168.2.100) 56(84) bytes of data.
64 bytes from 192.168.2.100: icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;641 ms
64 bytes from 192.168.2.100: icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;143 ms
64 bytes from 192.168.2.100: icmp_seq&#x3D;3 ttl&#x3D;64 time&#x3D;64.2 ms
64 bytes from 192.168.2.100: icmp_seq&#x3D;4 ttl&#x3D;64 time&#x3D;84.8 ms
64 bytes from 192.168.2.100: icmp_seq&#x3D;5 ttl&#x3D;64 time&#x3D;214 ms
64 bytes from 192.168.2.100: icmp_seq&#x3D;6 ttl&#x3D;64 time&#x3D;141 ms<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结论:以上测试证明树莓派有正确连接到路由器</p>
<h3 id="测试树莓派是否能切换信道"><a href="#测试树莓派是否能切换信道" class="headerlink" title="测试树莓派是否能切换信道"></a>测试树莓派是否能切换信道</h3><ol>
<li><code>iwlist channel</code>显示：<pre class="line-numbers language-none"><code class="language-none">wlan0     11 channels in total; available frequencies :
          Channel 01 : 2.412 GHz
          Channel 02 : 2.417 GHz
          Channel 03 : 2.422 GHz
          Channel 04 : 2.427 GHz
          Channel 05 : 2.432 GHz
          Channel 06 : 2.437 GHz
          Channel 07 : 2.442 GHz
          Channel 08 : 2.447 GHz
          Channel 09 : 2.452 GHz
          Channel 10 : 2.457 GHz
          Channel 11 : 2.462 GHz
          Current Frequency:2.412 GHz (Channel 1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ol>
<p>2.切换信道</p>
<p> <code>sudo iwconfig wlan0 channel 3</code></p>
<pre class="line-numbers language-none"><code class="language-none">iwconfig
wlan0     IEEE 802.11bgn  ESSID:&quot;CH1&quot;
          Mode:Managed  Frequency:2.422 GHz  Access Point: Not-Associated
          Tx-Power&#x3D;31 dBm
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>信道被修改了</p>
<p>尝试进行ping<br><pre class="line-numbers language-none"><code class="language-none">ping 192.168.2.109
PING 192.168.2.109 (192.168.2.109) 56(84) bytes of data.
64 bytes from 192.168.2.109: icmp_seq&#x3D;1 ttl&#x3D;128 time&#x3D;9.72 ms
64 bytes from 192.168.2.109: icmp_seq&#x3D;2 ttl&#x3D;128 time&#x3D;6.33 ms
64 bytes from 192.168.2.109: icmp_seq&#x3D;3 ttl&#x3D;128 time&#x3D;22.0 ms
64 bytes from 192.168.2.109: icmp_seq&#x3D;4 ttl&#x3D;128 time&#x3D;44.1 ms
64 bytes from 192.168.2.109: icmp_seq&#x3D;5 ttl&#x3D;128 time&#x3D;8.24 ms
64 bytes from 192.168.2.109: icmp_seq&#x3D;6 ttl&#x3D;128 time&#x3D;7.62 ms<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<p>传输正常…</p>
<p>结论:树莓派很有可能是伪切换上行信道，但是我没有办法排除固定信道路由器无法接受非该信道信号的这个可能性。</p>
<h2 id="进一步实验"><a href="#进一步实验" class="headerlink" title="进一步实验"></a>进一步实验</h2><p>如果修改信道可能xmu201_1的信道会改变。</p>
<pre class="line-numbers language-none"><code class="language-none">iwlist scan
Cell 05 - Address: D4:EE:07:49:19:FC
                    Channel:3
                    Frequency:2.422 GHz (Channel 3)
                    Quality&#x3D;70&#x2F;70  Signal level&#x3D;-39 dBm
                    Encryption key:on
                    ESSID:&quot;xmu201_1&quot;
                    Bit Rates:1 Mb&#x2F;s; 2 Mb&#x2F;s; 5.5 Mb&#x2F;s; 11 Mb&#x2F;s; 9 Mb&#x2F;s
                              18 Mb&#x2F;s; 36 Mb&#x2F;s; 54 Mb&#x2F;s
                    Bit Rates:6 Mb&#x2F;s; 12 Mb&#x2F;s; 24 Mb&#x2F;s; 48 Mb&#x2F;s
                    Mode:Master
                    Extra:tsf&#x3D;0000000000000000
                    Extra: Last beacon: 27270ms ago
                    IE: Unknown: 0008786D753230315F31
                    IE: Unknown: 010882848B961224486C
                    IE: Unknown: 030103
                    IE: Unknown: 32040C183060
                    IE: Unknown: 0706434E20010D14
                    IE: Unknown: 33082001020304050607
                    IE: Unknown: 33082105060708090A0B
                    IE: Unknown: 050400010000
                    IE: WPA Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK
                    IE: IEEE 802.11i&#x2F;WPA2 Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK
                    IE: Unknown: 2A0106
                    IE: Unknown: 2D1AAC0117FFFF000000000000000000000000000000000000000000
                    IE: Unknown: 3D1603000400000000000000000000000000000000000000
                    IE: Unknown: DD180050F2020101000003A4000027A4000042435E0062322F00
                    IE: Unknown: 0B0502000B127A
                    IE: Unknown: DD07000C4300000000
                    IE: Unknown: DD06D4EE07010100
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>进行测试</p>
<p> <code>sudo iwconfig wlan0 channel 3</code></p>
<pre class="line-numbers language-none"><code class="language-none">iwconfig
wlan0     IEEE 802.11bgn  ESSID:&quot;CH1&quot;
          Mode:Managed  Frequency:2.422 GHz  Access Point: Not-Associated
          Tx-Power&#x3D;31 dBm
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>重新进行信道扫描</p>
<pre class="line-numbers language-none"><code class="language-none">iwlist scan
Cell 05 - Address: D4:EE:07:49:19:FC
                    Channel:3
                    Frequency:2.422 GHz (Channel 3)
                    Quality&#x3D;70&#x2F;70  Signal level&#x3D;-39 dBm
                    Encryption key:on
                    ESSID:&quot;xmu201_1&quot;
                    Bit Rates:1 Mb&#x2F;s; 2 Mb&#x2F;s; 5.5 Mb&#x2F;s; 11 Mb&#x2F;s; 9 Mb&#x2F;s
                              18 Mb&#x2F;s; 36 Mb&#x2F;s; 54 Mb&#x2F;s
                    Bit Rates:6 Mb&#x2F;s; 12 Mb&#x2F;s; 24 Mb&#x2F;s; 48 Mb&#x2F;s
                    Mode:Master
                    Extra:tsf&#x3D;0000000000000000
                    Extra: Last beacon: 27270ms ago
                    IE: Unknown: 0008786D753230315F31
                    IE: Unknown: 010882848B961224486C
                    IE: Unknown: 030103
                    IE: Unknown: 32040C183060
                    IE: Unknown: 0706434E20010D14
                    IE: Unknown: 33082001020304050607
                    IE: Unknown: 33082105060708090A0B
                    IE: Unknown: 050400010000
                    IE: WPA Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK
                    IE: IEEE 802.11i&#x2F;WPA2 Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK
                    IE: Unknown: 2A0106
                    IE: Unknown: 2D1AAC0117FFFF000000000000000000000000000000000000000000
                    IE: Unknown: 3D1603000400000000000000000000000000000000000000
                    IE: Unknown: DD180050F2020101000003A4000027A4000042435E0062322F00
                    IE: Unknown: 0B0502000B127A
                    IE: Unknown: DD07000C4300000000
                    IE: Unknown: DD06D4EE07010100
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>信道没有发生变化。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>树莓派的 <code>sudo iwconfig wlan0 channel 3</code>极有可能是伪修改：即树莓派修改了某个寄存器的数值，但是并没有实际修改信道，这个可以通过进一步的研究进行验证。</p>
<h2 id="树莓派开启热点功能"><a href="#树莓派开启热点功能" class="headerlink" title="树莓派开启热点功能"></a>树莓派开启热点功能</h2><p>研究了一下树莓派的开启热点方法，都有点不科学，最后找到一个比较稳定且合适的方法，需要使用HDMI线和鼠标键盘(因为断掉wifi后树莓派会和电脑断连接、若有插网线则可以无视)具体操作如下：</p>
<p>创建WiFi热点使用的GitHub上一个开源项目：<br><a target="_blank" rel="noopener" href="https://github.com/oblique/create_ap">https://github.com/oblique/create_ap</a></p>
<h3 id="下载开源项目包"><a href="#下载开源项目包" class="headerlink" title="下载开源项目包"></a>下载开源项目包</h3><pre class="line-numbers language-none"><code class="language-none">sudo git clone https:&#x2F;&#x2F;github.com&#x2F;oblique&#x2F;create_ap
cd create_ap
sudo make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>可能会存在说树莓派连接不上github的可能性(ps:我就遇到了)</p>
<ul>
<li>参考以下步骤：</li>
</ul>
<ol>
<li>用电脑从github下载zip格式文件</li>
<li>通过xftp将zip文件转存入树莓派</li>
<li>unzip xxx.zip文件<pre class="line-numbers language-none"><code class="language-none">cd create_ap
sudo make install <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
</ol>
<h3 id="运用该开源项目"><a href="#运用该开源项目" class="headerlink" title="运用该开源项目"></a>运用该开源项目</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/oblique/create_ap">参考</a></li>
</ul>
<h3 id="No-passphrase-open-network"><a href="#No-passphrase-open-network" class="headerlink" title="No passphrase (open network):"></a>No passphrase (open network):</h3><pre><code>create_ap wlan0 eth0 MyAccessPoint
</code></pre><h3 id="WPA-WPA2-passphrase"><a href="#WPA-WPA2-passphrase" class="headerlink" title="WPA + WPA2 passphrase:"></a>WPA + WPA2 passphrase:</h3><pre><code>create_ap wlan0 eth0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="AP-without-Internet-sharing"><a href="#AP-without-Internet-sharing" class="headerlink" title="AP without Internet sharing:"></a>AP without Internet sharing:</h3><pre><code>create_ap -n wlan0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="Bridged-Internet-sharing"><a href="#Bridged-Internet-sharing" class="headerlink" title="Bridged Internet sharing:"></a>Bridged Internet sharing:</h3><pre><code>create_ap -m bridge wlan0 eth0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="Bridged-Internet-sharing-pre-configured-bridge-interface"><a href="#Bridged-Internet-sharing-pre-configured-bridge-interface" class="headerlink" title="Bridged Internet sharing (pre-configured bridge interface):"></a>Bridged Internet sharing (pre-configured bridge interface):</h3><pre><code>create_ap -m bridge wlan0 br0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="Internet-sharing-from-the-same-WiFi-interface"><a href="#Internet-sharing-from-the-same-WiFi-interface" class="headerlink" title="Internet sharing from the same WiFi interface:"></a>Internet sharing from the same WiFi interface:</h3><pre><code>create_ap wlan0 wlan0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="Choose-a-different-WiFi-adapter-driver"><a href="#Choose-a-different-WiFi-adapter-driver" class="headerlink" title="Choose a different WiFi adapter driver"></a>Choose a different WiFi adapter driver</h3><pre><code>create_ap --driver rtl871xdrv wlan0 eth0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="No-passphrase-open-network-using-pipe"><a href="#No-passphrase-open-network-using-pipe" class="headerlink" title="No passphrase (open network) using pipe:"></a>No passphrase (open network) using pipe:</h3><pre><code>echo -e &quot;MyAccessPoint&quot; | create_ap wlan0 eth0
</code></pre><h3 id="WPA-WPA2-passphrase-using-pipe"><a href="#WPA-WPA2-passphrase-using-pipe" class="headerlink" title="WPA + WPA2 passphrase using pipe:"></a>WPA + WPA2 passphrase using pipe:</h3><pre><code>echo -e &quot;MyAccessPoint\nMyPassPhrase&quot; | create_ap wlan0 eth0
</code></pre><h3 id="Enable-IEEE-802-11n"><a href="#Enable-IEEE-802-11n" class="headerlink" title="Enable IEEE 802.11n"></a>Enable IEEE 802.11n</h3><pre><code>create_ap --ieee80211n --ht_capab &#39;[HT40+]&#39; wlan0 eth0 MyAccessPoint MyPassPhrase
</code></pre><h3 id="Client-Isolation"><a href="#Client-Isolation" class="headerlink" title="Client Isolation:"></a>Client Isolation:</h3><pre><code>create_ap --isolate-clients wlan0 eth0 MyAccessPoint MyPassPhrase
</code></pre><h2 id="Systemd-service"><a href="#Systemd-service" class="headerlink" title="Systemd service"></a>Systemd service</h2><p>Using the persistent <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/systemd#Basic_systemctl_usage">systemd</a> service</p>
<h3 id="Start-service-immediately"><a href="#Start-service-immediately" class="headerlink" title="Start service immediately:"></a>Start service immediately:</h3><pre><code>systemctl start create_ap
</code></pre><h3 id="Start-on-boot"><a href="#Start-on-boot" class="headerlink" title="Start on boot:"></a>Start on boot:</h3><pre><code>systemctl enable create_ap
</code></pre><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>FreeBSD</p>
<h2 id="个人热点尝试的操作"><a href="#个人热点尝试的操作" class="headerlink" title="个人热点尝试的操作"></a>个人热点尝试的操作</h2><h3 id="根据原开源项目内容设置自己需要的wifi"><a href="#根据原开源项目内容设置自己需要的wifi" class="headerlink" title="根据原开源项目内容设置自己需要的wifi"></a>根据原开源项目内容设置自己需要的wifi</h3><ol>
<li>创建一个没有输入网络的热点</li>
</ol>
<p><code>sudo create_ap -n wlan0 pi_wifi MyPassWord</code></p>
<ol>
<li>遇到错误</li>
</ol>
<p><code>ERROR: Your adapter can not be a station (i.e. be connected) and an AP at the same time</code></p>
<p>分析：应该是目前网络正在连接wifi，需要断开，turn off wifi ，重新进行尝试。</p>
<ol>
<li>重新<code>sudo create_ap -n wlan0 pi_wifi MyPassWord</code></li>
</ol>
<p>报错：RTNETLINK answers: Operation not possible due to RF-kill</p>
<p>分析:应该是因为wifi被我之间断开，不能之间关闭只需要断开连接就行了</p>
<ol>
<li>test：</li>
</ol>
<p>这时用<code>rfkill list</code>查看所有无线设备</p>
<pre class="line-numbers language-none"><code class="language-none">0: phy0: Wireless LAN
   Soft blocked: yes
   Hard blocked: no<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>发现wlan0软件关闭了。</p>
<p>运行命令<code>rfkill unblock wlan</code>再查看无线设备</p>
<pre class="line-numbers language-none"><code class="language-none">0: phy0: Wireless LAN
    Soft blocked: no
    Hard blocked: no<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>wlan0软件开启。</p>
<ol>
<li>再运行上面的<code>sudo create_ap -n wlan0 pi_wifi MyPassWord</code>出现：</li>
</ol>
<p><code>wlan0: AP-ENABLED</code></p>
<p>成功开启热点</p>
<h1 id="设置wifi的信道"><a href="#设置wifi的信道" class="headerlink" title="设置wifi的信道"></a>设置wifi的信道</h1><h2 id="但是不要忘记了我们的目的，查了很久都没有人修改过热点的信道！！！可能大家不需要该热点的信道，但是作为搞无线网络通信的，我们不能只追求这个，我们要改信道！"><a href="#但是不要忘记了我们的目的，查了很久都没有人修改过热点的信道！！！可能大家不需要该热点的信道，但是作为搞无线网络通信的，我们不能只追求这个，我们要改信道！" class="headerlink" title="但是不要忘记了我们的目的，查了很久都没有人修改过热点的信道！！！可能大家不需要该热点的信道，但是作为搞无线网络通信的，我们不能只追求这个，我们要改信道！"></a>但是不要忘记了我们的目的，查了很久都没有人修改过热点的信道！！！可能大家不需要该热点的信道，但是作为搞无线网络通信的，我们不能只追求这个，我们要改信道！</h2><h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><ol>
<li><p>方法1：使用命令行修改通信信道 <code>sudo iwconfig wlan0 channel 3</code></p>
</li>
<li><p>方法2：查看该开源项目的内部文件，找到设置信道的方法</p>
</li>
<li><p>方法3：更换其他方式设置热点的信道</p>
</li>
</ol>
<h2 id="实验-1"><a href="#实验-1" class="headerlink" title="实验"></a>实验</h2><h3 id="命令行修改信道"><a href="#命令行修改信道" class="headerlink" title="命令行修改信道"></a>命令行修改信道</h3><ol>
<li><code>sudo iwconfig wlan0 channel 3</code></li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">Error for wireless request &quot;Set Frequency&quot; (8B04) :
    SET failed on device wlan0 ; Operation not supported.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>直接报错，无法修改信道。</p>
<ol>
<li><code>iwconfig</code></li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">wlan0     IEEE 802.11bgn  Mode:Master  Tx-Power&#x3D;20 dBm
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:off

lo        no wireless extensions.

eth0      no wireless extensions.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这说明什么，命令行在ap状态下是无效的，没办法直接这样修改，该方案不可行。</p>
<h3 id="查看该开源项目的内部文件"><a href="#查看该开源项目的内部文件" class="headerlink" title="查看该开源项目的内部文件"></a>查看该开源项目的内部文件</h3><p>这个热点开源项目一共有以下文件<br><pre class="line-numbers language-none"><code class="language-none">bash_completion  create_ap.conf    create_ap.service  LICENSE   README.md
create_ap        create_ap.openrc  howto              Makefile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><br>于是一个一个的找（只花了几分钟而已哈哈）</p>
<h3 id="项目源代码"><a href="#项目源代码" class="headerlink" title="项目源代码"></a>项目源代码</h3><pre class="line-numbers language-none"><code class="language-none">usage() &#123;
    echo &quot;Usage: &quot;$PROGNAME&quot; [options] &lt;wifi-interface&gt; [&lt;interface-with-internet&gt;] [&lt;access-point-name&gt; [&lt;passphrase&gt;]]&quot;
    echo
    echo &quot;Options:&quot;
    echo &quot;  -h, --help              Show this help&quot;
    echo &quot;  --version               Print version number&quot;
    echo &quot;  -c &lt;channel&gt;            Channel number (default: 1)&quot;
    echo &quot;  -w &lt;WPA version&gt;        Use 1 for WPA, use 2 for WPA2, use 1+2 for both (default: 1+2)&quot;
    echo &quot;  -n                      Disable Internet sharing (if you use this, don&#39;t pass&quot;
    echo &quot;                          the &lt;interface-with-internet&gt; argument)&quot;
    echo &quot;  -m &lt;method&gt;             Method for Internet sharing.&quot;
    echo &quot;                          Use: &#39;nat&#39; for NAT (default)&quot;
    echo &quot;                               &#39;bridge&#39; for bridging&quot;
    echo &quot;                               &#39;none&#39; for no Internet sharing (equivalent to -n)&quot;
    echo &quot;  --psk                   Use 64 hex digits pre-shared-key instead of passphrase&quot;
    echo &quot;  --hidden                Make the Access Point hidden (do not broadcast the SSID)&quot;
    echo &quot;  --mac-filter            Enable MAC address filtering&quot;
    echo &quot;  --mac-filter-accept     Location of MAC address filter list (defaults to &#x2F;etc&#x2F;hostapd&#x2F;hostapd.accept)&quot;
    echo &quot;  --redirect-to-localhost If -n is set, redirect every web request to localhost (useful for public information networks)&quot;
    echo &quot;  --hostapd-debug &lt;level&gt; With level between 1 and 2, passes arguments -d or -dd to hostapd for debugging.&quot;
    echo &quot;  --isolate-clients       Disable communication between clients&quot;
    echo &quot;  --ieee80211n            Enable IEEE 802.11n (HT)&quot;
    echo &quot;  --ieee80211ac           Enable IEEE 802.11ac (VHT)&quot;
    echo &quot;  --ht_capab &lt;HT&gt;         HT capabilities (default: [HT40+])&quot;
    echo &quot;  --vht_capab &lt;VHT&gt;       VHT capabilities&quot;
    echo &quot;  --country &lt;code&gt;        Set two-letter country code for regularity (example: US)&quot;
    echo &quot;  --freq-band &lt;GHz&gt;       Set frequency band. Valid inputs: 2.4, 5 (default: 2.4)&quot;
    echo &quot;  --driver                Choose your WiFi adapter driver (default: nl80211)&quot;
    echo &quot;  --no-virt               Do not create virtual interface&quot;
    echo &quot;  --no-haveged            Do not run &#39;haveged&#39; automatically when needed&quot;
    echo &quot;  --fix-unmanaged         If NetworkManager shows your interface as unmanaged after you&quot;
    echo &quot;                          close create_ap, then use this option to switch your interface&quot;
    echo &quot;                          back to managed&quot;
    echo &quot;  --mac &lt;MAC&gt;             Set MAC address&quot;
    echo &quot;  --dhcp-dns &lt;IP1[,IP2]&gt;  Set DNS returned by DHCP&quot;
    echo &quot;  --daemon                Run create_ap in the background&quot;
    echo &quot;  --pidfile &lt;pidfile&gt;     Save daemon PID to file&quot;
    echo &quot;  --logfile &lt;logfile&gt;     Save daemon messages to file&quot;
    echo &quot;  --stop &lt;id&gt;             Send stop command to an already running create_ap. For an &lt;id&gt;&quot;
    echo &quot;                          you can put the PID of create_ap or the WiFi interface. You can&quot;
    echo &quot;                          get them with --list-running&quot;
    echo &quot;  --list-running          Show the create_ap processes that are already running&quot;
    echo &quot;  --list-clients &lt;id&gt;     List the clients connected to create_ap instance associated with &lt;id&gt;.&quot;
    echo &quot;                          For an &lt;id&gt; you can put the PID of create_ap or the WiFi interface.&quot;
    echo &quot;                          If virtual WiFi interface was created, then use that one.&quot;
    echo &quot;                          You can get them with --list-running&quot;
    echo &quot;  --mkconfig &lt;conf_file&gt;  Store configs in conf_file&quot;
    echo &quot;  --config &lt;conf_file&gt;    Load configs from conf_file&quot;
    echo
    echo &quot;Non-Bridging Options:&quot;
    echo &quot;  --no-dns                Disable dnsmasq DNS server&quot;
    echo &quot;  --no-dnsmasq            Disable dnsmasq server completely&quot;
    echo &quot;  -g &lt;gateway&gt;            IPv4 Gateway for the Access Point (default: 192.168.12.1)&quot;
    echo &quot;  -d                      DNS server will take into account &#x2F;etc&#x2F;hosts&quot;
    echo &quot;  -e &lt;hosts_file&gt;         DNS server will take into account additional hosts file&quot;
    echo
    echo &quot;Useful informations:&quot;
    echo &quot;  * If you&#39;re not using the --no-virt option, then you can create an AP with the same&quot;
    echo &quot;    interface you are getting your Internet connection.&quot;
    echo &quot;  * You can pass your SSID and password through pipe or through arguments (see examples).&quot;
    echo &quot;  * On bridge method if the &lt;interface-with-internet&gt; is not a bridge interface, then&quot;
    echo &quot;    a bridge interface is created automatically.&quot;
    echo
    echo &quot;Examples:&quot;
    echo &quot;  &quot;$PROGNAME&quot; wlan0 eth0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  echo -e &#39;MyAccessPoint\nMyPassPhrase&#39; | &quot;$PROGNAME&quot; wlan0 eth0&quot;
    echo &quot;  &quot;$PROGNAME&quot; wlan0 eth0 MyAccessPoint&quot;
    echo &quot;  echo &#39;MyAccessPoint&#39; | &quot;$PROGNAME&quot; wlan0 eth0&quot;
    echo &quot;  &quot;$PROGNAME&quot; wlan0 wlan0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  &quot;$PROGNAME&quot; -n wlan0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  &quot;$PROGNAME&quot; -m bridge wlan0 eth0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  &quot;$PROGNAME&quot; -m bridge wlan0 br0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  &quot;$PROGNAME&quot; --driver rtl871xdrv wlan0 eth0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  &quot;$PROGNAME&quot; --daemon wlan0 eth0 MyAccessPoint MyPassPhrase&quot;
    echo &quot;  &quot;$PROGNAME&quot; --stop wlan0&quot;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这一行明显及其关键，一看就是可以利用的代码。</p>
<p>其中：</p>
<p><code>echo &quot;  -c &lt;channel&gt;            Channel number (default: 1)&quot;</code></p>
<p>应该可以通过<code>sudo create_ap -n wlan0 pi_wifi MyPassWord -c 2</code>修改信道数值。</p>
<pre class="line-numbers language-none"><code class="language-none">WARN: brmfmac driver doesn&#39;t work properly with virtual interfaces and
      it can cause kernel panic. For this reason we disallow virtual
      interfaces for your adapter.
      For more info: https:&#x2F;&#x2F;github.com&#x2F;oblique&#x2F;create_ap&#x2F;issues&#x2F;203
WARN: Your adapter does not fully support AP virtual interface, enabling --no-virt
Config dir: &#x2F;tmp&#x2F;create_ap.wlan0.conf.d6khWCUL
PID: 4794<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>wlan0应该是被占用了</p>
<h2 id="修改信道"><a href="#修改信道" class="headerlink" title="修改信道"></a>修改信道</h2><p><code>sudo create_ap --s wlan0</code></p>
<p>通过<code>sudo create_ap -n wlan0 pi_wifi MyPassWord -c 1</code>修改信道数值。</p>
<p>通过其他设备进行测试’iwlist scan’</p>
<p>扫描信道结果：<br><pre class="line-numbers language-none"><code class="language-none">wlan0     Scan completed :
          Cell 01 - Address: 18:64:72:92:EC:81
                    Channel:1
                    Frequency:2.412 GHz (Channel 1)
                    Quality&#x3D;46&#x2F;70  Signal level&#x3D;-64 dBm
                    Encryption key:on
                    ESSID:&quot;pi_wifi&quot;
                    Bit Rates:1 Mb&#x2F;s; 2 Mb&#x2F;s; 5.5 Mb&#x2F;s; 6 Mb&#x2F;s; 9 Mb&#x2F;s
                              11 Mb&#x2F;s; 12 Mb&#x2F;s; 18 Mb&#x2F;s
                    Bit Rates:24 Mb&#x2F;s; 36 Mb&#x2F;s; 48 Mb&#x2F;s; 54 Mb&#x2F;s
                    Mode:Master
                    Extra:tsf&#x3D;0000000000000000
                    Extra: Last beacon: 200ms ago
                    IE: Unknown: 0007656475726F616D
                    IE: Unknown: 010882840B0C12161824
                    IE: Unknown: 030101
                    IE: Unknown: 2A0102
                    IE: Unknown: 32043048606C
                    IE: IEEE 802.11i&#x2F;WPA2 Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : 802.1x
                    IE: Unknown: 2D1AED111BFFFFFF0000000000000000000000000000000                                        000000000
                    IE: Unknown: 3D1601000A0000000000000000000000000000000000000                                        0
                    IE: Unknown: 7F080000080000000000
                    IE: Unknown: DD180050F2020101800003A4000027A4000042435E00623                                        22F00<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>通过<code>sudo create_ap -n wlan0 pi_wifi MyPassWord -c 11</code>修改信道数值。<br>通过其他设备进行测试’iwlist scan’</p>
<p>扫描信道结果：<br><pre class="line-numbers language-none"><code class="language-none">Cell 12 - Address: 18:64:72:92:EC:81
                    Channel:11
                    Frequency:2.462 GHz (Channel 11)
                    Quality&#x3D;66&#x2F;70  Signal level&#x3D;-44 dBm
                    Encryption key:off
                    ESSID:&quot;pi_wifi&quot;
                    Bit Rates:1 Mb&#x2F;s; 2 Mb&#x2F;s; 5.5 Mb&#x2F;s; 11 Mb&#x2F;s; 6 Mb&#x2F;s
                              9 Mb&#x2F;s; 12 Mb&#x2F;s; 18 Mb&#x2F;s
                    Bit Rates:24 Mb&#x2F;s; 36 Mb&#x2F;s; 48 Mb&#x2F;s; 54 Mb&#x2F;s
                    Mode:Master
                    Extra:tsf&#x3D;0000000000000000
                    Extra: Last beacon: 17620ms ago
                    IE: Unknown: 0003434832
                    IE: Unknown: 010882848B960C121824
                    IE: Unknown: 03010B
                    IE: Unknown: 2A0100
                    IE: Unknown: 32043048606C
                    IE: Unknown: 2D1A2C0003FF00000000000000000000000000000000000000000000
                    IE: Unknown: 3D160B001100000000000000000000000000000000000000
                    IE: Unknown: DD180050F2020101000003A4000027A4000042435E0062322F00
                    IE: Unknown: DD05000AEB0100
                    IE: Unknown: DD8E0050F204104A0001101044000102103B0001031047001000000000000010000000FCD7330F3A461021000754502D4C494E4B10230009544C2D57523734324E10240003372E3010420007312E312E312E331054000800060050F204000110110018576972656C657373204E20526F757465722057523734324E100800022288103C0001011049000600372A000120
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<p>成功修改信道！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>综上所示：</p>
<ol>
<li>可以通过命令行修改功率</li>
</ol>
<p><code>sudo iwconfig wlan1 txpower X</code></p>
<ol>
<li>通过开源项目切换信道<pre class="line-numbers language-none"><code class="language-none">sudo create_ap --s wlan0

sudo create_ap -n wlan0 pi_wifi MyPassWord -c 11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">生成ssh

ssh-keygen -t rsa -C &quot;kp@mmrsl.cn&quot;

ssh-agent -s

ssh-add ~&#x2F;.ssh&#x2F;id_rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="扩展：功率修改测试及方案"><a href="#扩展：功率修改测试及方案" class="headerlink" title="扩展：功率修改测试及方案"></a>扩展：功率修改测试及方案</h2><ol>
<li>开启热点 <pre class="line-numbers language-none"><code class="language-none">sudo create_ap --s wlan0

sudo create_ap -n wlan0 pi_wifi MyPassWord -c 11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
<li>修改功率</li>
</ol>
<p><code>sudo iwconfig wlan1 txpower 30</code></p>
<ol>
<li>检测功率</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">万鲲鹏</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://www.mmrsl.cn/2021/04/22/linux%E7%B3%BB%E7%BB%9F%E9%80%9A%E4%BF%A1%E5%8A%9F%E7%8E%87%E4%BF%A1%E9%81%93%E4%BF%AE%E6%94%B9%E6%96%B9%E6%B3%95/">http://www.mmrsl.cn/2021/04/22/linux%E7%B3%BB%E7%BB%9F%E9%80%9A%E4%BF%A1%E5%8A%9F%E7%8E%87%E4%BF%A1%E9%81%93%E4%BF%AE%E6%94%B9%E6%96%B9%E6%B3%95/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">万鲲鹏</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/linux/">
                                    <span class="chip bg-color">linux</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.JPG" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: '',
        owner: '',
        admin: null,
        id: '2021-04-22T15-36-33',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/04/28/python-%E5%AE%9E%E6%97%B6%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93-%E5%88%87%E5%89%B2%E5%8E%8B%E7%BC%A9%E3%80%81%E4%B8%A2%E5%8C%85%E7%BB%9F%E8%AE%A1/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/4.jpg" class="responsive-img" alt="实时视频传输_切割压缩、丢包统计">
                        
                        <span class="card-title">实时视频传输_切割压缩、丢包统计</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/python/" class="post-category">
                                    python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/04/20/%E6%A0%91%E8%8E%93%E6%B4%BE3BTL-WN726N%E9%A9%B1%E5%8A%A8/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="树莓派3BTL-WN726N驱动">
                        
                        <span class="card-title">树莓派3BTL-WN726N驱动</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/linux/" class="post-category">
                                    linux
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/linux/">
                        <span class="chip bg-color">linux</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 漫漫人生路<br />'
            + '文章作者: 万鲲鹏<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="5341377946"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2017-2021</span>
            
            <span id="year">2017</span>
            <a href="/about" target="_blank">万鲲鹏</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">125.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2017";
                    var startMonth = "11";
                    var startDate = "28";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/mmrslwan1110" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:kp@mmrsl.cn" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2415945009" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2415945009" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>

    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>
    <!--动态线条背景-->
    <script type="text/javascript"
    color="0 245 255" opacity='0.5' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <script src="/js/cursor.js"></script>
    <!-- <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script> -->
    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>');
        }
    </script>
    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/.js"></script>
        <script>
            $(document).ready(function () {
                setInterval(change_Tidio, 50);
                function change_Tidio() {
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";
                        document.getElementById("tidio-chat-iframe").style.right="-15px";
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;
                        document.getElementById("tidio-chat-iframe").style.right="-15px";
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                }
            });
        </script>
    

    
    <script>
        (function (i, s, o, g, r, a, m) {
            i["DaoVoiceObject"] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            a.charset = "utf-8";
            m.parentNode.insertBefore(a, m)
        })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
            "//widget.daovoice.io/widget/6984b559.js", "daovoice")
        daovoice('init', {
            app_id: ""
        });
        daovoice('update');
    </script>
    

	
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body>

</html>
